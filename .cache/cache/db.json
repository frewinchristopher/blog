{"keys":[{"id":"transformer-remark-markdown-ast-032861647cfa98891866fc7299236b99-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":{"type":"root","children":[{"type":"yaml","value":"title: Interacting with a Blockchain - Building a Webapp for RaiBlocks\ndate: \"2018-01-30\"\ndraft: true","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":5,"column":4,"offset":109},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Full stack","position":{"start":{"line":7,"column":4,"offset":114},"end":{"line":7,"column":14,"offset":124},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":111},"end":{"line":7,"column":14,"offset":124},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This post is going to go through how I built ","position":{"start":{"line":9,"column":1,"offset":126},"end":{"line":9,"column":46,"offset":171},"indent":[]}},{"type":"link","title":null,"url":"raiblocks-charts.herokuapp.com","children":[{"type":"text","value":"raiblocks-charts.herokuapp.com","position":{"start":{"line":9,"column":47,"offset":172},"end":{"line":9,"column":77,"offset":202},"indent":[]}}],"position":{"start":{"line":9,"column":46,"offset":171},"end":{"line":9,"column":110,"offset":235},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":126},"end":{"line":9,"column":110,"offset":235},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":10,"column":1,"offset":236}}}},{"id":"transformer-remark-markdown-ast-1394bab26ddea6adf8fd0b284fefff4e-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":{"type":"root","children":[{"type":"yaml","value":"title: Jump from SAPUI5 Apps to Transactions in Web GUI with Batch Input\ndate: \"2018-01-25\"\ndraft: true","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":5,"column":4,"offset":111},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"So, we don’t want to be rebuilding SAP GUI transactions 1:1 in the Web…","position":{"start":{"line":7,"column":4,"offset":116},"end":{"line":7,"column":77,"offset":189},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":113},"end":{"line":7,"column":77,"offset":189},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"That would be like reinventing the wheel.","position":{"start":{"line":9,"column":1,"offset":191},"end":{"line":9,"column":42,"offset":232},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":191},"end":{"line":9,"column":42,"offset":232},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In SAPUI5 function, that looks something like this:","position":{"start":{"line":11,"column":1,"offset":234},"end":{"line":11,"column":52,"offset":285},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":234},"end":{"line":11,"column":52,"offset":285},"indent":[]}},{"type":"html","lang":"javascript","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code>\n</code></pre>\n      </div>","position":{"start":{"line":13,"column":1,"offset":287},"end":{"line":15,"column":4,"offset":305},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Dear SAP Gods” You shout. I know, what the heck are those random %20??!?! What the heck is that * there for? I recognize the transaction CO03, but what is going on here?!?!?!?","position":{"start":{"line":17,"column":1,"offset":307},"end":{"line":17,"column":176,"offset":482},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":307},"end":{"line":17,"column":176,"offset":482},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"All shall become clear. Let’s break it down.","position":{"start":{"line":19,"column":1,"offset":484},"end":{"line":19,"column":45,"offset":528},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":484},"end":{"line":19,"column":45,"offset":528},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":20,"column":1,"offset":529}}}},{"id":"transformer-remark-markdown-ast-7c93f05bfa5efee2177a3e93c6c0611a-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":{"type":"root","children":[{"type":"yaml","value":"title: A Detailed Look at ABAP's BDC Method\ndate: \"2018-01-24\"\ndraft: true","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":5,"column":4,"offset":82},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"And some common gotchyas, too","position":{"start":{"line":7,"column":4,"offset":87},"end":{"line":7,"column":33,"offset":116},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":84},"end":{"line":7,"column":33,"offset":116},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">*                          S A P M S S Y 0</span>\n<span class=\"token comment\">*                  system routines for ABAP processing</span>\n<span class=\"token comment\">*</span>\n<span class=\"token comment\">*                  (must be declared as FUNCTION-POOL)</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">function-pool</span> sapmssy0  <span class=\"token keyword\">message-id</span> <span class=\"token number\">02</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">include</span> &lt;%_list><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">include</span> &lt;sys000><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">include</span> tskhincl<span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">tables</span><span class=\"token punctuation\">:</span> tfdir<span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span>  orders          <span class=\"token keyword\">type</span> <span class=\"token keyword\">standard</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">of</span> %_commit_orders<span class=\"token punctuation\">,</span>\n                                                  <span class=\"token eol-comment comment\">\"ON COMMIT orders</span>\n       rb_orders       <span class=\"token keyword\">type</span> <span class=\"token keyword\">standard</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">of</span> %_commit_orders<span class=\"token punctuation\">,</span>\n                                                  <span class=\"token eol-comment comment\">\"ON ROLLBACK orders</span>\n       imode_orders    <span class=\"token keyword\">type</span> <span class=\"token keyword\">standard</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">of</span> %_commit_orders<span class=\"token punctuation\">,</span>\n                                                  <span class=\"token eol-comment comment\">\"POC in CALL DIALOG</span>\n       imode_rb_orders <span class=\"token keyword\">type</span> <span class=\"token keyword\">standard</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">of</span> %_commit_orders<span class=\"token punctuation\">.</span>\n<span class=\"token eol-comment comment\">\"POR in CALL DIALOG</span>\n<span class=\"token comment\">* for RTM test concerning POC during OS event handling</span>\n<span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> os_orders        <span class=\"token keyword\">type</span> <span class=\"token keyword\">hashed</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">of</span> %_commit_orders\n                            <span class=\"token keyword\">with</span> <span class=\"token keyword\">unique</span> <span class=\"token keyword\">key</span> prog rout<span class=\"token punctuation\">.</span>      <span class=\"token eol-comment comment\">\"#EC NEEDED</span>\n<span class=\"token eol-comment comment\">\"OS ON COMMIT orders</span>\n<span class=\"token comment\">* end RTM</span>\n\n<span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span>  %_vbkey <span class=\"token keyword\">type</span> %_vbkey <span class=\"token keyword\">value</span> <span class=\"token string\">'%_'</span><span class=\"token punctuation\">,</span>                     <span class=\"token eol-comment comment\">\"#EC *</span>\n       %%vbkey <span class=\"token keyword\">type</span> %_vbkey <span class=\"token keyword\">value</span> <span class=\"token string\">'%%'</span><span class=\"token punctuation\">,</span>\n       %_vb_calls <span class=\"token keyword\">type</span> %_vb_calls <span class=\"token keyword\">occurs</span> <span class=\"token number\">50</span> <span class=\"token keyword\">with</span> <span class=\"token keyword\">header</span> <span class=\"token keyword\">line</span><span class=\"token punctuation\">.</span>\"#EC <span class=\"token operator\">*</span>\n<span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span>  i_level <span class=\"token keyword\">type</span> <span class=\"token keyword\">i</span> <span class=\"token keyword\">value</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">data</span> <span class=\"token punctuation\">:</span> arfc_pending <span class=\"token keyword\">type</span> <span class=\"token keyword\">c</span><span class=\"token punctuation\">,</span>\n       trfc_nowait_for_update <span class=\"token keyword\">type</span> <span class=\"token keyword\">c</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* bgRFC: something todo at COMMIT / ROLLBACK</span>\n<span class=\"token keyword\">data</span> <span class=\"token punctuation\">:</span> bgrfc_eot_action <span class=\"token keyword\">type</span> <span class=\"token keyword\">i</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* LDQ: something todo at COMMIT / ROLLBACK</span>\n<span class=\"token keyword\">data</span> <span class=\"token punctuation\">:</span> ldq_writer_eot_action <span class=\"token keyword\">type</span> <span class=\"token keyword\">i</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">data</span> <span class=\"token punctuation\">:</span> ldq_reader_eot_action <span class=\"token keyword\">type</span> <span class=\"token keyword\">i</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* O R D E R _ F O R M _ L E V E L</span>\n<span class=\"token comment\">* order given form to be run when work is committed</span>\n<span class=\"token comment\">*</span>\n<span class=\"token comment\">* Input : program name, form name, execution level</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_order_form_level <span class=\"token keyword\">using</span> prog rout u_level<span class=\"token punctuation\">.</span>            <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> allow_nested_poc<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">type</span> <span class=\"token keyword\">c</span><span class=\"token punctuation\">,</span>\n        caller <span class=\"token keyword\">type</span> sy<span class=\"token token-operator punctuation\">-</span>repid<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> mpar1<span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mpar2<span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mpar3<span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mpar4<span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> imode_orders_wa <span class=\"token keyword\">type</span> %_commit_orders<span class=\"token punctuation\">,</span>\n        orders_wa <span class=\"token keyword\">type</span> %_commit_orders<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'N'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">call</span> <span class=\"token string\">'ThVBCall'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'OPCODE'</span> <span class=\"token keyword\">field</span> get_vb_key  <span class=\"token eol-comment comment\">\"#EC CI_CCALL</span>\n                    <span class=\"token keyword\">id</span> <span class=\"token string\">'VBKEY'</span>  <span class=\"token keyword\">field</span> %_vbkey<span class=\"token token-operator punctuation\">-</span>vbkey<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">import</span> imode_orders imode_rb_orders <span class=\"token keyword\">from</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %_vbkey<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">read</span> <span class=\"token keyword\">table</span> imode_orders\n      <span class=\"token keyword\">into</span> imode_orders_wa\n      <span class=\"token keyword\">with</span> <span class=\"token keyword\">key</span> prog <span class=\"token operator\">=</span> prog\n               rout <span class=\"token operator\">=</span> rout\n      <span class=\"token keyword\">binary</span> <span class=\"token keyword\">search</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">describe</span> <span class=\"token keyword\">table</span> imode_orders <span class=\"token keyword\">lines</span> i_level<span class=\"token punctuation\">.</span>\n      imode_orders_wa<span class=\"token token-operator punctuation\">-</span>prog <span class=\"token operator\">=</span> prog<span class=\"token punctuation\">.</span>\n      imode_orders_wa<span class=\"token token-operator punctuation\">-</span>rout <span class=\"token operator\">=</span> rout<span class=\"token punctuation\">.</span>\n      imode_orders_wa<span class=\"token token-operator punctuation\">-</span>i_level <span class=\"token operator\">=</span> i_level<span class=\"token punctuation\">.</span>\n      imode_orders_wa<span class=\"token token-operator punctuation\">-</span>u_level <span class=\"token operator\">=</span> u_level<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">insert</span> imode_orders_wa <span class=\"token keyword\">into</span> imode_orders <span class=\"token keyword\">index</span> sy<span class=\"token token-operator punctuation\">-</span>tabix<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">export</span> imode_orders imode_rb_orders <span class=\"token keyword\">to</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %_vbkey<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">else</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'P'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*     already in PERFORM ON COMMIT</span>\n      <span class=\"token keyword\">call</span> <span class=\"token string\">'C_SAPGPARAM'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'NAME'</span>  <span class=\"token keyword\">field</span> <span class=\"token string\">'abap/allow_nested_poc'</span>  <span class=\"token eol-comment comment\">\"#EC CI_CCALL</span>\n                         <span class=\"token keyword\">id</span> <span class=\"token string\">'VALUE'</span> <span class=\"token keyword\">field</span> allow_nested_poc<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">if</span> allow_nested_poc <span class=\"token operator\">&lt;></span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*       nested PERFORM ON COMMIT not allowed</span>\n        <span class=\"token keyword\">call</span> <span class=\"token string\">'AB_GET_CALLER'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'PROGRAM'</span> <span class=\"token keyword\">field</span> caller<span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"#EC CI_CCALL</span>\n        <span class=\"token keyword\">if</span> caller <span class=\"token operator\">&lt;></span> <span class=\"token string\">'SAPMSSY0'</span><span class=\"token punctuation\">.</span>\n          mpar1 <span class=\"token operator\">=</span> <span class=\"token string\">'NESTED_PERFORM_ON_COMMIT'</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">concatenate</span> <span class=\"token string\">'caller:'</span>  caller <span class=\"token keyword\">into</span> mpar2 <span class=\"token keyword\">separated</span> <span class=\"token keyword\">by</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">concatenate</span> <span class=\"token string\">'program:'</span> prog   <span class=\"token keyword\">into</span> mpar3 <span class=\"token keyword\">separated</span> <span class=\"token keyword\">by</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">concatenate</span> <span class=\"token string\">'form:'</span>    rout   <span class=\"token keyword\">into</span> mpar4 <span class=\"token keyword\">separated</span> <span class=\"token keyword\">by</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*         switch back kernel flag: just for sure.</span>\n          <span class=\"token keyword\">call</span> <span class=\"token string\">'SET_SWITCH_TXEND'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"#EC CI_CCALL</span>\n<span class=\"token comment\">*         issue short dump</span>\n          <span class=\"token keyword\">message</span> x081<span class=\"token punctuation\">(</span><span class=\"token number\">00</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">with</span> mpar1 mpar2 mpar3 mpar4<span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">read</span> <span class=\"token keyword\">table</span> orders\n      <span class=\"token keyword\">into</span> orders_wa\n      <span class=\"token keyword\">with</span> <span class=\"token keyword\">key</span> prog <span class=\"token operator\">=</span> prog\n               rout <span class=\"token operator\">=</span> rout\n      <span class=\"token keyword\">binary</span> <span class=\"token keyword\">search</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">describe</span> <span class=\"token keyword\">table</span> orders <span class=\"token keyword\">lines</span> i_level<span class=\"token punctuation\">.</span>\n      orders_wa<span class=\"token token-operator punctuation\">-</span>prog <span class=\"token operator\">=</span> prog<span class=\"token punctuation\">.</span>\n      orders_wa<span class=\"token token-operator punctuation\">-</span>rout <span class=\"token operator\">=</span> rout<span class=\"token punctuation\">.</span>\n      orders_wa<span class=\"token token-operator punctuation\">-</span>i_level <span class=\"token operator\">=</span> i_level<span class=\"token punctuation\">.</span>\n      orders_wa<span class=\"token token-operator punctuation\">-</span>u_level <span class=\"token operator\">=</span> u_level<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">insert</span> orders_wa <span class=\"token keyword\">into</span> orders <span class=\"token keyword\">index</span> sy<span class=\"token token-operator punctuation\">-</span>tabix<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*   for RTM test concerning POC during OS event handling</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">.</span>\n      orders_wa<span class=\"token token-operator punctuation\">-</span>prog <span class=\"token operator\">=</span> prog<span class=\"token punctuation\">.</span>\n      orders_wa<span class=\"token token-operator punctuation\">-</span>rout <span class=\"token operator\">=</span> rout<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">insert</span> orders_wa <span class=\"token keyword\">into</span> <span class=\"token keyword\">table</span> os_orders<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*   end RTM</span>\n\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_order_form_level</span>\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* O R D E R _ F O R M _ F O R _ R O L L B A C K</span>\n<span class=\"token comment\">* order given form to be run when work is rolled back</span>\n<span class=\"token comment\">* Input : program name, form name</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_order_form_for_rollback <span class=\"token keyword\">using</span> prog rout<span class=\"token punctuation\">.</span>             <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> mpar1<span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mpar2<span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mpar3<span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mpar4<span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        caller <span class=\"token keyword\">type</span> sy<span class=\"token token-operator punctuation\">-</span>repid<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> rb_orders_wa       <span class=\"token keyword\">type</span> %_commit_orders<span class=\"token punctuation\">,</span>\n        imode_rb_orders_wa <span class=\"token keyword\">type</span> %_commit_orders<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'N'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">call</span> <span class=\"token string\">'ThVBCall'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'OPCODE'</span> <span class=\"token keyword\">field</span> get_vb_key  <span class=\"token eol-comment comment\">\"#EC CI_CCALL</span>\n                    <span class=\"token keyword\">id</span> <span class=\"token string\">'VBKEY'</span>  <span class=\"token keyword\">field</span> %_vbkey<span class=\"token token-operator punctuation\">-</span>vbkey<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">import</span> imode_orders imode_rb_orders <span class=\"token keyword\">from</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %_vbkey<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">read</span> <span class=\"token keyword\">table</span> imode_rb_orders\n      <span class=\"token keyword\">into</span> imode_rb_orders_wa\n      <span class=\"token keyword\">with</span> <span class=\"token keyword\">key</span> prog <span class=\"token operator\">=</span> prog\n           rout <span class=\"token operator\">=</span> rout\n      <span class=\"token keyword\">binary</span> <span class=\"token keyword\">search</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">describe</span> <span class=\"token keyword\">table</span> imode_rb_orders <span class=\"token keyword\">lines</span> i_level<span class=\"token punctuation\">.</span>\n      imode_rb_orders_wa<span class=\"token token-operator punctuation\">-</span>prog <span class=\"token operator\">=</span> prog<span class=\"token punctuation\">.</span>\n      imode_rb_orders_wa<span class=\"token token-operator punctuation\">-</span>rout <span class=\"token operator\">=</span> rout<span class=\"token punctuation\">.</span>\n      imode_rb_orders_wa<span class=\"token token-operator punctuation\">-</span>i_level <span class=\"token operator\">=</span> i_level<span class=\"token punctuation\">.</span>\n      imode_rb_orders_wa<span class=\"token token-operator punctuation\">-</span>u_level <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">insert</span> imode_rb_orders_wa <span class=\"token keyword\">into</span> imode_rb_orders <span class=\"token keyword\">index</span> sy<span class=\"token token-operator punctuation\">-</span>tabix<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">export</span> imode_orders imode_rb_orders <span class=\"token keyword\">to</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %_vbkey<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">else</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'P'</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">call</span> <span class=\"token string\">'AB_GET_CALLER'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'PROGRAM'</span> <span class=\"token keyword\">field</span> caller<span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"#EC CI_CCALL</span>\n      mpar1 <span class=\"token operator\">=</span> <span class=\"token string\">'NESTED_PERFORM_ON_ROLLBACK'</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">concatenate</span> <span class=\"token string\">'caller:'</span>  caller <span class=\"token keyword\">into</span> mpar2 <span class=\"token keyword\">separated</span> <span class=\"token keyword\">by</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">concatenate</span> <span class=\"token string\">'program:'</span> prog   <span class=\"token keyword\">into</span> mpar3 <span class=\"token keyword\">separated</span> <span class=\"token keyword\">by</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">concatenate</span> <span class=\"token string\">'form:'</span>    rout   <span class=\"token keyword\">into</span> mpar4 <span class=\"token keyword\">separated</span> <span class=\"token keyword\">by</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*     switch back kernel flag: just for sure.</span>\n      <span class=\"token keyword\">call</span> <span class=\"token string\">'SET_SWITCH_TXEND'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*     already in PERFORM ON ROLLBACK issue short dump</span>\n      <span class=\"token keyword\">message</span> x081<span class=\"token punctuation\">(</span><span class=\"token number\">00</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">with</span> mpar1 mpar2 mpar3 mpar4<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">read</span> <span class=\"token keyword\">table</span> rb_orders <span class=\"token keyword\">into</span> rb_orders_wa\n      <span class=\"token keyword\">with</span> <span class=\"token keyword\">key</span> prog <span class=\"token operator\">=</span> prog\n               rout <span class=\"token operator\">=</span> rout\n      <span class=\"token keyword\">binary</span> <span class=\"token keyword\">search</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">describe</span> <span class=\"token keyword\">table</span> rb_orders <span class=\"token keyword\">lines</span> i_level<span class=\"token punctuation\">.</span>\n      rb_orders_wa<span class=\"token token-operator punctuation\">-</span>prog <span class=\"token operator\">=</span> prog<span class=\"token punctuation\">.</span>\n      rb_orders_wa<span class=\"token token-operator punctuation\">-</span>rout <span class=\"token operator\">=</span> rout<span class=\"token punctuation\">.</span>\n      rb_orders_wa<span class=\"token token-operator punctuation\">-</span>i_level <span class=\"token operator\">=</span> i_level<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">insert</span> rb_orders_wa <span class=\"token keyword\">into</span> rb_orders <span class=\"token keyword\">index</span> sy<span class=\"token token-operator punctuation\">-</span>tabix<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_order_form_for_rollback</span>\n\n\n<span class=\"token comment\">*---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*  %_COMMIT_PREPARE                                                   *</span>\n<span class=\"token comment\">*  Set date and time for aRFC</span>\n<span class=\"token comment\">*---------------------------------------------------------------------*</span>\n<span class=\"token keyword\">form</span> %_commit_prepare <span class=\"token keyword\">using</span> <span class=\"token keyword\">date</span> <span class=\"token keyword\">time</span><span class=\"token punctuation\">.</span>                      <span class=\"token eol-comment comment\">\"#EC *</span>\n\n  %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_time <span class=\"token operator\">=</span> <span class=\"token keyword\">time</span><span class=\"token punctuation\">.</span>\n  %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date <span class=\"token operator\">=</span> <span class=\"token keyword\">date</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_commit_prepare</span>\n\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token comment\">* FORM %_BEFORE_COMMIT</span>\n<span class=\"token comment\">* called from RSYN commit.rs1</span>\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_before_commit<span class=\"token punctuation\">.</span>                                       <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> l_oncom <span class=\"token keyword\">like</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> txend <span class=\"token keyword\">type</span> <span class=\"token keyword\">c</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* forbid COMMIT if already in ON ROLLBACK handling</span>\n<span class=\"token comment\">* allow COMMIT during ON COMMIT for backward compatibilty</span>\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'GET_SWITCH_TXEND'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> txend<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">if</span> txend <span class=\"token operator\">=</span> <span class=\"token string\">'R'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">message</span> x085<span class=\"token punctuation\">(</span><span class=\"token number\">00</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* COMMIT during CALL DIALOG/SUBMIT, POC, Update task</span>\n<span class=\"token comment\">* or End Transaction event?</span>\n  <span class=\"token keyword\">check</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'N'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'P'</span> <span class=\"token keyword\">and</span>\n        sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'E'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'V'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* change sy-oncom to avoid recursion</span>\n  l_oncom <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">.</span>                      <span class=\"token eol-comment comment\">\"E = Event Handling</span>\n\n<span class=\"token comment\">* no escape out off this form other than ENDFORM</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">set</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* Hook for Process Information Infrastructure</span>\n  <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'SPI_AGENT_COMMIT'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* Raise event 'Commit Requested' for Object Manager</span>\n  <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> cl_os_transaction_end_notifier<span class=\"token token-operator punctuation\">=></span>raise_commit_requested<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* restore sy-oncom</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> l_oncom<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* reset marker on call stack.</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">reset</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_before_commit</span>\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* C O M M I T</span>\n<span class=\"token comment\">* commit work</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_commit<span class=\"token punctuation\">.</span>                                              <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> %_state<span class=\"token punctuation\">,</span> %_direct_utask_active<span class=\"token punctuation\">.</span>                     <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> l_lines   <span class=\"token keyword\">like</span> sy<span class=\"token token-operator punctuation\">-</span>tabix<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> %_enqkey  <span class=\"token keyword\">type</span> eqeusrvb<span class=\"token punctuation\">.</span>                            <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> %_enqdone <span class=\"token keyword\">type</span> <span class=\"token keyword\">c</span><span class=\"token punctuation\">.</span>                                   <span class=\"token eol-comment comment\">\"#EC *</span>\n\n<span class=\"token comment\">* status processing of set update task local</span>\n<span class=\"token comment\">* value 'E': local update is active. Export tRFC/qRFC to memory!</span>\n<span class=\"token comment\">* value 'S': local update is active. Map the dialog tRFC/qRFC to called update trfc/qRFC.</span>\n<span class=\"token comment\">*            Import tRFC/qRFC form memory! Save it to the Database.</span>\n<span class=\"token comment\">* value 'X': local update is active. Execute the tRFC/qRFC within the Dialog workprocess.</span>\n\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> l_local_vb_status <span class=\"token keyword\">type</span> <span class=\"token keyword\">c</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* COMMIT during POC, Update task or End Transaction event?</span>\n  <span class=\"token keyword\">check</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'P'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'E'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'V'</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* no escape out off this form other than ENDFORM</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">set</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'ThVBCall'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'OPCODE'</span>  <span class=\"token keyword\">field</span> get_vb_key\n                  <span class=\"token keyword\">id</span> <span class=\"token string\">'VBKEY'</span>   <span class=\"token keyword\">field</span> %%vbkey<span class=\"token token-operator punctuation\">-</span>vbkey<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'N'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*   Not in CALL DIALOG</span>\n    %_vbkey<span class=\"token token-operator punctuation\">-</span>vbkey <span class=\"token operator\">=</span> %%vbkey<span class=\"token token-operator punctuation\">-</span>vbkey<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">perform</span> %_process_p_o_c<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*   Check if local update task is switched on?</span>\n    <span class=\"token keyword\">call</span> <span class=\"token string\">'GET_SWITCH_UTASK'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'MODE'</span>  <span class=\"token keyword\">field</span> <span class=\"token string\">'S'</span>\n                            <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> %_state<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> %_state <span class=\"token keyword\">eq</span> <span class=\"token string\">'N'</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">free</span> %_vb_calls<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">import</span> %_vb_calls <span class=\"token keyword\">from</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %%vbkey<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">describe</span> <span class=\"token keyword\">table</span> %_vb_calls <span class=\"token keyword\">lines</span> l_lines<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">if</span> l_lines <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*       Local update task is active,</span>\n<span class=\"token comment\">*       export the called tRFC/qRFCs from dialog to memory within arfc_end_transaction.</span>\n        l_local_vb_status <span class=\"token operator\">=</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*     Within sapmssy4 (commit work) we have to import and save all dia tRFC/qRFC</span>\n<span class=\"token comment\">*     in arfc_end_transaction</span>\n      <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>cprog <span class=\"token operator\">=</span> <span class=\"token string\">'SAPMSSY4'</span><span class=\"token punctuation\">.</span>\n        l_local_vb_status <span class=\"token operator\">=</span> <span class=\"token string\">'S'</span><span class=\"token punctuation\">.</span>\n        arfc_pending <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n\n    <span class=\"token keyword\">if</span> arfc_pending <span class=\"token operator\">&lt;></span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n      arfc_pending <span class=\"token operator\">=</span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">if</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>dontsend <span class=\"token operator\">&lt;></span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n        %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date  <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>datum<span class=\"token punctuation\">.</span>\n        %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_time  <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>uzeit <span class=\"token operator\">+</span> <span class=\"token number\">3600</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n      <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'ARFC_END_TRANSACTION'</span>\n        <span class=\"token keyword\">exporting</span>\n          <span class=\"token keyword\">mode</span>              <span class=\"token operator\">=</span> <span class=\"token string\">'COMMIT'</span>\n          starttime         <span class=\"token operator\">=</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_time\n          startdate         <span class=\"token operator\">=</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date\n          utask_local_state <span class=\"token operator\">=</span> l_local_vb_status\n          vbkey             <span class=\"token operator\">=</span> %%vbkey<span class=\"token token-operator punctuation\">-</span>vbkey\n          bgrfc_active      <span class=\"token operator\">=</span> bgrfc_eot_action<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*      clear %_sys000-arfc-send_time.</span>\n<span class=\"token comment\">*      clear %_sys000-arfc-send_date.</span>\n<span class=\"token comment\">*      clear %_sys000-arfc-dontsend.</span>\n\n<span class=\"token comment\">***************</span>\n<span class=\"token comment\">*   bgRFC</span>\n<span class=\"token comment\">***************</span>\n<span class=\"token comment\">*     Update task in Asynchronous mode!</span>\n<span class=\"token comment\">*     Wenn arfc_pending &lt;> SPACE dann wurde bereits durch classic qRFC der arfc_end_vb</span>\n<span class=\"token comment\">*     getriggert, falls lokale Verbuchung nicht aktiv ist.</span>\n<span class=\"token comment\">*     N = asynch. update task switched off: direct updates</span>\n      <span class=\"token keyword\">if</span> bgrfc_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"something happened with bgRFC</span>\n<span class=\"token comment\">*       In current LUW classic t/qRFC and bgRFC was called</span>\n\n        <span class=\"token keyword\">if</span> trfc_nowait_for_update <span class=\"token operator\">&lt;></span> <span class=\"token keyword\">space</span> <span class=\"token keyword\">OR</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date <span class=\"token keyword\">is</span> <span class=\"token keyword\">not</span> <span class=\"token keyword\">initial</span><span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"ARFC_END_VB wurde nicht im tRFC/qRFC gerufen</span>\n          <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_time<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>dontsend<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_BGRFC_DB_HELPER'</span><span class=\"token punctuation\">)</span>=>on_commit\n            <span class=\"token keyword\">exporting</span>\n              arfc_end_vb_already_called <span class=\"token operator\">=</span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" ARFC_END_VB wurde bereits im tRFC/qrfc gerufen.</span>\n          <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_time<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>dontsend<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_BGRFC_DB_HELPER'</span><span class=\"token punctuation\">)</span>=>on_commit\n            <span class=\"token keyword\">exporting</span>\n              arfc_end_vb_already_called <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">else</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_time<span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date<span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>dontsend<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*      clear %_sys000-arfc-send_time.</span>\n<span class=\"token comment\">*      clear %_sys000-arfc-send_date.</span>\n<span class=\"token comment\">*      clear %_sys000-arfc-dontsend.</span>\n\n<span class=\"token comment\">*   Wenn kein classic qRFC getriggert und keine lokale Verbuchung, dann</span>\n<span class=\"token comment\">*   muss ARFC_END_VB von bgRFC getriggert werden.</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">if</span> bgrfc_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"something happened with bgRFC</span>\n<span class=\"token comment\">*       In current LUW only bgRFC was called</span>\n        <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_BGRFC_DB_HELPER'</span><span class=\"token punctuation\">)</span>=>on_commit\n          <span class=\"token keyword\">exporting</span>\n            arfc_end_vb_already_called <span class=\"token operator\">=</span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">***************************</span>\n<span class=\"token comment\">*   Local Data Queue (LDQ)</span>\n<span class=\"token comment\">***************************</span>\n    <span class=\"token keyword\">if</span> ldq_writer_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"something happened with LDQ-Writer</span>\n      <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_LDQ_UNIT_WRITER'</span><span class=\"token punctuation\">)</span>=>on_commit<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">if</span> ldq_reader_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"something happened with LDQ-Reader</span>\n      <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_LDQ_UNIT_READER'</span><span class=\"token punctuation\">)</span>=>on_commit<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">if</span> %_state <span class=\"token keyword\">eq</span> <span class=\"token string\">'N'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*     N = asynch. update task switched off: direct updates</span>\n<span class=\"token comment\">*     free %_vb_calls.</span>\n<span class=\"token comment\">*     import %_vb_calls from memory id %%vbkey.</span>\n<span class=\"token comment\">*     describe table %_vb_calls lines l_lines.</span>\n      <span class=\"token keyword\">if</span> l_lines <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*       process direct updates (with the same vbkey)</span>\n        <span class=\"token keyword\">call</span> <span class=\"token string\">'ThVBCall'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'OPCODE'</span>  <span class=\"token keyword\">field</span> get_vb_key\n                        <span class=\"token keyword\">id</span> <span class=\"token string\">'VBKEY'</span>   <span class=\"token keyword\">field</span> %%vbkey<span class=\"token token-operator punctuation\">-</span>vbkey\n                        <span class=\"token keyword\">id</span> <span class=\"token string\">'ENQKEY'</span>  <span class=\"token keyword\">field</span> %_enqkey\n                        <span class=\"token keyword\">id</span> <span class=\"token string\">'ENQDONE'</span> <span class=\"token keyword\">field</span> %_enqdone<span class=\"token punctuation\">.</span>\n\n        <span class=\"token keyword\">submit</span> sapmssy4 <span class=\"token keyword\">with</span> vbkey_id <span class=\"token operator\">=</span> %%vbkey\n                        <span class=\"token keyword\">with</span> enqkey   <span class=\"token operator\">=</span> %_enqkey\n                        <span class=\"token keyword\">with</span> enqdone  <span class=\"token operator\">=</span> %_enqdone <span class=\"token keyword\">and</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*       Start new LUW, release locks that were acquired during dialog part</span>\n        <span class=\"token keyword\">call</span> <span class=\"token string\">'ThVBCall'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'OPCODE'</span>       <span class=\"token keyword\">field</span> reset_vb_enq_key\n                        <span class=\"token keyword\">id</span> <span class=\"token string\">'SYNC_DEQUEUE'</span> <span class=\"token keyword\">field</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* Call Dialog wurde gerufen; gerufene tRFC/qRFC Verarbeitung wie gehabt.</span>\n  <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'N'</span> <span class=\"token keyword\">or</span> l_local_vb_status <span class=\"token operator\">=</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> l_local_vb_status <span class=\"token operator\">=</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*     Lokale Verbuchung ist aktiv Ausführung im Dialog und UPD.</span>\n      l_local_vb_status <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>     <span class=\"token eol-comment comment\">\"Umsetzen auf Ausführung der trfc/qRFC im Dialog.</span>\n      arfc_pending      <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> arfc_pending <span class=\"token operator\">&lt;></span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n      arfc_pending <span class=\"token operator\">=</span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">if</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>dontsend <span class=\"token operator\">&lt;></span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n        %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date  <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>datum<span class=\"token punctuation\">.</span>\n        %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_time  <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>uzeit <span class=\"token operator\">+</span> <span class=\"token number\">3600</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n      <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'ARFC_END_TRANSACTION'</span>\n        <span class=\"token keyword\">exporting</span>\n          <span class=\"token keyword\">mode</span>              <span class=\"token operator\">=</span> <span class=\"token string\">'COMMIT'</span>\n          starttime         <span class=\"token operator\">=</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_time\n          startdate         <span class=\"token operator\">=</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date\n          utask_local_state <span class=\"token operator\">=</span> l_local_vb_status\n          vbkey             <span class=\"token operator\">=</span> %%vbkey<span class=\"token token-operator punctuation\">-</span>vbkey\n          bgrfc_active      <span class=\"token operator\">=</span> bgrfc_eot_action<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_time<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>dontsend<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>binpt <span class=\"token keyword\">eq</span> <span class=\"token string\">'X'</span> <span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'BDC_END_TRANSACTION'</span><span class=\"token punctuation\">.</span>       <span class=\"token eol-comment comment\">\"ende einer trans in BI</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* clear memory containing registrations for PERFORM ON ROLLBACK.</span>\n<span class=\"token comment\">* delete imode_orders and imode_rb_orders only if not in CALL DIALOG</span>\n  <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'N'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">free</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %_vbkey<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> rb_orders<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* reset marker on call stack.</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">reset</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_commit</span>\n\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token comment\">* FORM %_AFTER_COMMIT</span>\n<span class=\"token comment\">* called from RSYN commit.rs1</span>\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_after_commit<span class=\"token punctuation\">.</span>                                        <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> %_direct_utask_active<span class=\"token punctuation\">,</span> %_task_state<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">type</span> <span class=\"token keyword\">x</span><span class=\"token punctuation\">.</span>      <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">i</span> <span class=\"token keyword\">type</span> <span class=\"token keyword\">i</span><span class=\"token punctuation\">,</span> j <span class=\"token keyword\">type</span> <span class=\"token keyword\">i</span><span class=\"token punctuation\">,</span> x4<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">type</span> <span class=\"token keyword\">x</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> l_update_task <span class=\"token keyword\">type</span> boolean <span class=\"token keyword\">value</span> <span class=\"token string\">'-'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> l_oncom <span class=\"token keyword\">like</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> l_subrc <span class=\"token keyword\">like</span> sy<span class=\"token token-operator punctuation\">-</span>subrc<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* COMMIT during CALL DIALOG/SUBMIT, POC, Update task</span>\n<span class=\"token comment\">* or End Transaction event?</span>\n  <span class=\"token keyword\">check</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'N'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'P'</span> <span class=\"token keyword\">and</span>\n        sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'E'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'V'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* change sy-oncom to avoid recursion</span>\n  l_oncom <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">.</span>                      <span class=\"token eol-comment comment\">\"E = Event Handling</span>\n  l_subrc <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>subrc<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* no escape out off this form other than ENDFORM</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">set</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*</span>\n<span class=\"token comment\">* bgRFC</span>\n<span class=\"token comment\">*</span>\n  <span class=\"token keyword\">if</span> bgrfc_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\"something happened with bgRFC</span>\n    <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_BGRFC_DB_HELPER'</span><span class=\"token punctuation\">)</span>=>AFTER_COMMIT<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*</span>\n<span class=\"token comment\">* Local DATA Queue (LDQ)</span>\n<span class=\"token comment\">*</span>\n  <span class=\"token keyword\">if</span> ldq_writer_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\"something happened with LDW-Writer</span>\n    <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_LDQ_UNIT_WRITER'</span><span class=\"token punctuation\">)</span>=>after_commit<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">if</span> ldq_reader_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\"something happened with LDW-Reader</span>\n    <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_LDQ_UNIT_READER'</span><span class=\"token punctuation\">)</span>=>after_commit<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* Raise event 'Commit Finished' for Object Manager</span>\n<span class=\"token comment\">* for synchronous update task this is after all database changes.</span>\n<span class=\"token comment\">* for asynchronous update task this is after triggering the updates.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> cl_os_transaction_end_notifier<span class=\"token token-operator punctuation\">=></span>raise_commit_finished<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* COMMIT in (classic) update task?</span>\n  <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'TH_USER_INFO'</span>\n    <span class=\"token keyword\">importing</span>\n      task_state <span class=\"token operator\">=</span> <span class=\"token keyword\">i</span><span class=\"token punctuation\">.</span>\n  %_task_state <span class=\"token operator\">=</span> <span class=\"token keyword\">i</span><span class=\"token punctuation\">.</span>\n  j <span class=\"token operator\">=</span> task_vb<span class=\"token punctuation\">.</span> x4 <span class=\"token operator\">=</span> j<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> %_task_state <span class=\"token keyword\">z</span> x4<span class=\"token punctuation\">.</span>            <span class=\"token eol-comment comment\">\"update task must not be active</span>\n    l_update_task <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">if</span> l_update_task <span class=\"token operator\">&lt;></span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*   COMMIT in local update task?</span>\n    <span class=\"token keyword\">call</span> <span class=\"token string\">'GET_SWITCH_UTASK'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'MODE'</span>  <span class=\"token keyword\">field</span> <span class=\"token string\">'A'</span>          <span class=\"token eol-comment comment\">\"A = active?</span>\n                            <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> %_direct_utask_active<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> %_direct_utask_active <span class=\"token operator\">=</span> <span class=\"token string\">'Y'</span> <span class=\"token keyword\">or</span> sy<span class=\"token token-operator punctuation\">-</span>cprog <span class=\"token operator\">=</span> <span class=\"token string\">'SAPMSSY4'</span><span class=\"token punctuation\">.</span>\n      l_update_task <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* raise event 'transaction_finished' only if not in update task.</span>\n  <span class=\"token keyword\">if</span> l_update_task <span class=\"token operator\">&lt;></span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span>\n      cl_system_transaction_state<span class=\"token token-operator punctuation\">=></span>raise_transaction_finished\n      <span class=\"token keyword\">exporting</span>\n        <span class=\"token keyword\">kind</span> <span class=\"token operator\">=</span> cl_system_transaction_state<span class=\"token token-operator punctuation\">=></span>commit_work<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* restore sy-oncom</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> l_oncom<span class=\"token punctuation\">.</span>\n  sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">=</span> l_subrc<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* reset marker on call stack.</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">reset</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                                                <span class=\"token eol-comment comment\">\"%_after_commit</span>\n\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token comment\">* FORM %_PROCESS_P_O_C</span>\n<span class=\"token comment\">* Process PERFORM ON COMMIT orders</span>\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_process_p_o_c<span class=\"token punctuation\">.</span>                                       <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> last_oncom <span class=\"token keyword\">like</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> imode_orders_wa <span class=\"token keyword\">type</span> %_commit_orders<span class=\"token punctuation\">,</span>\n        orders_wa       <span class=\"token keyword\">type</span> %_commit_orders<span class=\"token punctuation\">.</span>\n\n  last_oncom <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">import</span> imode_orders <span class=\"token keyword\">from</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %_vbkey<span class=\"token punctuation\">.</span>\n  sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">sort</span> imode_orders <span class=\"token keyword\">by</span> u_level i_level<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">loop</span> <span class=\"token keyword\">at</span> imode_orders <span class=\"token keyword\">into</span> imode_orders_wa<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">perform</span> %_order_form_level <span class=\"token keyword\">using</span> imode_orders_wa<span class=\"token token-operator punctuation\">-</span>prog\n                                     imode_orders_wa<span class=\"token token-operator punctuation\">-</span>rout\n                                     imode_orders_wa<span class=\"token token-operator punctuation\">-</span>u_level<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endloop</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> imode_orders<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">sort</span> orders <span class=\"token keyword\">by</span> u_level i_level<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* signal begin of ON COMMIT handling</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'P'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'SET_SWITCH_TXEND'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">loop</span> <span class=\"token keyword\">at</span> orders <span class=\"token keyword\">into</span> orders_wa<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">perform</span> <span class=\"token punctuation\">(</span>orders_wa<span class=\"token token-operator punctuation\">-</span>rout<span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">in</span> <span class=\"token keyword\">program</span> <span class=\"token punctuation\">(</span>orders_wa<span class=\"token token-operator punctuation\">-</span>prog<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endloop</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> orders<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* for RTM test concerning POC during OS events</span>\n  <span class=\"token keyword\">free</span> os_orders<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* end RTM</span>\n\n<span class=\"token comment\">* signal end of ON COMMIT</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> last_oncom<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'SET_SWITCH_TXEND'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_process_p_o_c</span>\n\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token comment\">* FORM %_GET_VB_KEY</span>\n<span class=\"token comment\">* Update task without update task</span>\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_get_vb_key <span class=\"token keyword\">using</span> vb_func_name <span class=\"token keyword\">changing</span> vb_data_key<span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"#EC *</span>\n\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> %_vb_calls    <span class=\"token keyword\">type</span> <span class=\"token keyword\">standard</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">of</span> %_vb_calls<span class=\"token punctuation\">,</span>       <span class=\"token eol-comment comment\">\"#EC *</span>\n        %_vb_calls_wa <span class=\"token keyword\">type</span> %_vb_calls<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> utask_on<span class=\"token punctuation\">,</span>                  <span class=\"token eol-comment comment\">\"flag: asynchronous update task on?</span>\n        direct_utask_active<span class=\"token punctuation\">.</span>       <span class=\"token eol-comment comment\">\"flag: already in local update task?</span>\n\n  <span class=\"token keyword\">clear</span> vb_data_key<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'GET_SWITCH_UTASK'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'MODE'</span> <span class=\"token keyword\">field</span> <span class=\"token string\">'S'</span>\n                          <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> utask_on<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'GET_SWITCH_UTASK'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'MODE'</span>  <span class=\"token keyword\">field</span> <span class=\"token string\">'A'</span>\n                          <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> direct_utask_active<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">if</span> utask_on <span class=\"token keyword\">eq</span> <span class=\"token string\">'N'</span> <span class=\"token keyword\">and</span> direct_utask_active <span class=\"token keyword\">eq</span> <span class=\"token string\">'N'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*   update task switched to \"local\", but not yet inside update task.</span>\n    <span class=\"token keyword\">select</span> <span class=\"token keyword\">single</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> tfdir <span class=\"token keyword\">where</span> funcname <span class=\"token operator\">=</span> vb_func_name<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">message</span> a400 <span class=\"token keyword\">with</span> vb_func_name<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n    cl_abap_restrmode_utils<span class=\"token token-operator punctuation\">=></span>check_in_restr_mode_updtask<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> tfdir<span class=\"token token-operator punctuation\">-</span>utask <span class=\"token operator\">=</span> <span class=\"token string\">'1'</span>     <span class=\"token eol-comment comment\">\"direct update task call</span>\n       <span class=\"token keyword\">or</span> tfdir<span class=\"token token-operator punctuation\">-</span>utask <span class=\"token operator\">=</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"direct update task call, no later update</span>\n\n<span class=\"token comment\">*     get identifier for current LUW</span>\n      <span class=\"token keyword\">call</span> <span class=\"token string\">'ThVBCall'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'OPCODE'</span> <span class=\"token keyword\">field</span> get_vb_key\n                      <span class=\"token keyword\">id</span> <span class=\"token string\">'VBKEY'</span>  <span class=\"token keyword\">field</span> %%vbkey<span class=\"token token-operator punctuation\">-</span>vbkey<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">free</span> %_vb_calls<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">clear</span> %_vb_calls_wa<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*     import table with already registered function modules</span>\n      <span class=\"token keyword\">import</span> %_vb_calls <span class=\"token keyword\">from</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %%vbkey<span class=\"token punctuation\">.</span>\n\n      <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*       already got UUID for the parameters of the function module</span>\n        <span class=\"token keyword\">read</span> <span class=\"token keyword\">table</span> %_vb_calls <span class=\"token keyword\">index</span> <span class=\"token number\">1</span>\n          <span class=\"token keyword\">into</span> %_vb_calls_wa <span class=\"token keyword\">transporting</span> daten_id<span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">message</span> x675<span class=\"token punctuation\">(</span><span class=\"token number\">00</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">else</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*       get new UUID as key for the parameters of the function module</span>\n        <span class=\"token keyword\">try</span><span class=\"token punctuation\">.</span>\n          %_vb_calls_wa<span class=\"token token-operator punctuation\">-</span>daten_id<span class=\"token token-operator punctuation\">-</span>vbkey <span class=\"token operator\">=</span> cl_system_uuid<span class=\"token token-operator punctuation\">=></span>create_uuid_c22_static<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">catch</span> cx_uuid_error<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">message</span> x675<span class=\"token punctuation\">(</span><span class=\"token number\">00</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">endtry</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*     fill in name of function module</span>\n      %_vb_calls_wa<span class=\"token token-operator punctuation\">-</span>func_name <span class=\"token operator\">=</span> vb_func_name<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*     identify the function call by consecutive number</span>\n      <span class=\"token keyword\">describe</span> <span class=\"token keyword\">table</span> %_vb_calls <span class=\"token keyword\">lines</span> %_vb_calls_wa<span class=\"token token-operator punctuation\">-</span>daten_id<span class=\"token token-operator punctuation\">-</span>vbkey+<span class=\"token number\">22</span><span class=\"token punctuation\">.</span>\n      %_vb_calls_wa<span class=\"token token-operator punctuation\">-</span>data_temperature <span class=\"token operator\">=</span> cl_abap_stack_temperature<span class=\"token token-operator punctuation\">=></span>get_temperature<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">append</span> %_vb_calls_wa <span class=\"token keyword\">to</span> %_vb_calls<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*     (re-) export the table to memory</span>\n      <span class=\"token keyword\">export</span> %_vb_calls <span class=\"token keyword\">to</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %%vbkey<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">free</span> %_vb_calls<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*     return the identifier of this function call to call.rs1 to export</span>\n<span class=\"token comment\">*     the corresponding parameters with the same identifier.</span>\n      vb_data_key <span class=\"token operator\">=</span> %_vb_calls_wa<span class=\"token token-operator punctuation\">-</span>daten_id<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_get_vb_key</span>\n\n<span class=\"token comment\">*----------------------------------------------------------------------</span>\n<span class=\"token comment\">* FORM %_CALL_ROLLBACK</span>\n<span class=\"token comment\">* Call ROLLBACK-Handling</span>\n<span class=\"token comment\">* To be called by kernel code to perform rollback handling in ABAP</span>\n<span class=\"token comment\">*----------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_call_rollback<span class=\"token punctuation\">.</span>                                       <span class=\"token eol-comment comment\">\"#EC *</span>\n<span class=\"token comment\">* Save SUBRC for returncode after EXCEPTION ERROR_MESSAGE</span>\n  <span class=\"token keyword\">local</span><span class=\"token punctuation\">:</span> sy<span class=\"token token-operator punctuation\">-</span>subrc<span class=\"token punctuation\">,</span> sy<span class=\"token token-operator punctuation\">-</span>msgty<span class=\"token punctuation\">,</span> sy<span class=\"token token-operator punctuation\">-</span>msgid<span class=\"token punctuation\">,</span> sy<span class=\"token token-operator punctuation\">-</span>msgno<span class=\"token punctuation\">,</span>\n         sy<span class=\"token token-operator punctuation\">-</span>msgv1<span class=\"token punctuation\">,</span> sy<span class=\"token token-operator punctuation\">-</span>msgv2<span class=\"token punctuation\">,</span> sy<span class=\"token token-operator punctuation\">-</span>msgv3<span class=\"token punctuation\">,</span> sy<span class=\"token token-operator punctuation\">-</span>msgv4<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* Perform ROLLBACK with all registered rollback hooks</span>\n  <span class=\"token keyword\">rollback</span> <span class=\"token keyword\">work</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_call_rollback</span>\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* R O L L B A C K</span>\n<span class=\"token comment\">* rollback work</span>\n<span class=\"token comment\">* when called within CALL DIALOG --> no effect i.e. symmetrical to</span>\n<span class=\"token comment\">* COMMIT WORK</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_rollback<span class=\"token punctuation\">.</span>                                            <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> txend <span class=\"token keyword\">type</span> <span class=\"token keyword\">c</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> l_oncom <span class=\"token keyword\">like</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* forbid ROLLBACK if already in ON COMMIT/ROLLBACK handling</span>\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'GET_SWITCH_TXEND'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> txend<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">if</span> txend <span class=\"token operator\">=</span> <span class=\"token string\">'C'</span> <span class=\"token keyword\">or</span> txend <span class=\"token operator\">=</span> <span class=\"token string\">'R'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">message</span> x086<span class=\"token punctuation\">(</span><span class=\"token number\">00</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">check</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'N'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'V'</span> <span class=\"token keyword\">and</span>\n        sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'E'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'P'</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* change sy-oncom to avoid recursion</span>\n  l_oncom <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">.</span>                      <span class=\"token eol-comment comment\">\"E = Event Handling</span>\n\n<span class=\"token comment\">* no escape out off this form other than ENDFORM</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">set</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* Hook for Process Information Infrastructure</span>\n  <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'SPI_AGENT_ROLLBACK'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* restore sy-oncom</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> l_oncom<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'ThVBCall'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'OPCODE'</span>  <span class=\"token keyword\">field</span> get_vb_key\n                  <span class=\"token keyword\">id</span> <span class=\"token string\">'VBKEY'</span>  <span class=\"token keyword\">field</span> %%vbkey<span class=\"token token-operator punctuation\">-</span>vbkey<span class=\"token punctuation\">.</span>\n  %_vbkey<span class=\"token token-operator punctuation\">-</span>vbkey <span class=\"token operator\">=</span> %%vbkey<span class=\"token token-operator punctuation\">-</span>vbkey<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* perform ON ROLLBACK orders</span>\n  <span class=\"token keyword\">perform</span> %_process_p_o_r<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* free contents of memory and tables for update task</span>\n  <span class=\"token keyword\">free</span> %_vb_calls<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">import</span> %_vb_calls <span class=\"token keyword\">from</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %%vbkey<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">loop</span> <span class=\"token keyword\">at</span> %_vb_calls<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">free</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %_vb_calls<span class=\"token token-operator punctuation\">-</span>daten_id<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endloop</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %%vbkey<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> %_vb_calls<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* free contents of memory and tables</span>\n  %_vbkey<span class=\"token token-operator punctuation\">-</span>vbkey <span class=\"token operator\">=</span> %%vbkey<span class=\"token token-operator punctuation\">-</span>vbkey<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %_vbkey<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> imode_orders<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> orders<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> imode_rb_orders<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> rb_orders<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* for RTM test concerning POC during OS events</span>\n  <span class=\"token keyword\">free</span> os_orders<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* end RTM</span>\n\n  <span class=\"token keyword\">if</span> arfc_pending <span class=\"token operator\">&lt;></span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n    arfc_pending <span class=\"token operator\">=</span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'ARFC_END_TRANSACTION'</span>\n      <span class=\"token keyword\">exporting</span>\n        <span class=\"token keyword\">mode</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ROLLBACK'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*</span>\n<span class=\"token comment\">* bgRFC</span>\n<span class=\"token comment\">*</span>\n  <span class=\"token keyword\">if</span> bgrfc_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\"something happened with bgRFC</span>\n    <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_BGRFC_DB_HELPER'</span><span class=\"token punctuation\">)</span>=>ON_ROLLBACK<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*</span>\n<span class=\"token comment\">* Local DATA Queue (LDQ)</span>\n<span class=\"token comment\">*</span>\n  <span class=\"token keyword\">if</span> ldq_writer_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"something happened with LDQ-Writer</span>\n    <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_LDQ_UNIT_WRITER'</span><span class=\"token punctuation\">)</span>=>on_rollback<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">if</span> ldq_reader_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"something happened with LDQ-Writer</span>\n    <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_LDQ_UNIT_READER'</span><span class=\"token punctuation\">)</span>=>on_rollback<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* reset marker on call stack.</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">reset</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_rollback</span>\n\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token comment\">* FORM %_AFTER_ROLLBACK</span>\n<span class=\"token comment\">* called from RSYN rollback.rs1</span>\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_after_rollback<span class=\"token punctuation\">.</span>                                      <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> l_oncom <span class=\"token keyword\">like</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* ROLLBACK during POC, Update task or End Transaction event?</span>\n  <span class=\"token keyword\">check</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'P'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'E'</span> <span class=\"token keyword\">and</span>\n        sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'N'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'V'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* change sy-oncom to avoid recursion</span>\n  l_oncom <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">.</span>                      <span class=\"token eol-comment comment\">\"E = Event Handling</span>\n<span class=\"token comment\">* no escape out off this form other than ENDFORM</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">set</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> cl_os_transaction_end_notifier<span class=\"token token-operator punctuation\">=></span>raise_rollback_finished<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> cl_system_transaction_state<span class=\"token token-operator punctuation\">=></span>raise_transaction_finished\n    <span class=\"token keyword\">exporting</span>\n      <span class=\"token keyword\">kind</span> <span class=\"token operator\">=</span> cl_system_transaction_state<span class=\"token token-operator punctuation\">=></span>rollback_work<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* switch local update task to 'inactive'</span>\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'SET_SWITCH_UTASK_OFF'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> <span class=\"token string\">'N'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* restore sy-oncom</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> l_oncom<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* reset marker on call stack.</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">reset</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_after_rollback</span>\n\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token comment\">* FORM %_PROCESS_P_O_R</span>\n<span class=\"token comment\">* Process PERFORM ON ROLLBACK orders</span>\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_process_p_o_r<span class=\"token punctuation\">.</span>                                       <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> last_oncom <span class=\"token keyword\">like</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> rb_orders_wa       <span class=\"token keyword\">type</span> %_commit_orders<span class=\"token punctuation\">,</span>\n        imode_rb_orders_wa <span class=\"token keyword\">type</span> %_commit_orders<span class=\"token punctuation\">.</span>\n\n  last_oncom <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">import</span> imode_rb_orders <span class=\"token keyword\">from</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %_vbkey<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">loop</span> <span class=\"token keyword\">at</span> imode_rb_orders <span class=\"token keyword\">into</span> imode_rb_orders_wa<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">perform</span> %_order_form_for_rollback\n      <span class=\"token keyword\">using</span> imode_rb_orders_wa<span class=\"token token-operator punctuation\">-</span>prog\n            imode_rb_orders_wa<span class=\"token token-operator punctuation\">-</span>rout<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endloop</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> imode_rb_orders<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">sort</span> rb_orders <span class=\"token keyword\">by</span> u_level i_level<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* signal begin of ON ROLLBACK handling</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'P'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'SET_SWITCH_TXEND'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> <span class=\"token string\">'R'</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">set</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">loop</span> <span class=\"token keyword\">at</span> rb_orders <span class=\"token keyword\">into</span> rb_orders_wa<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">perform</span> <span class=\"token punctuation\">(</span>rb_orders_wa<span class=\"token token-operator punctuation\">-</span>rout<span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">in</span> <span class=\"token keyword\">program</span> <span class=\"token punctuation\">(</span>rb_orders_wa<span class=\"token token-operator punctuation\">-</span>prog<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endloop</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">reset</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> rb_orders<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* signal end of ON ROLLBACK</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> last_oncom<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'SET_SWITCH_TXEND'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_process_p_o_r</span>\n\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token comment\">* FORM SYSTEM_HOOK</span>\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> system_hook<span class=\"token punctuation\">.</span>                                           <span class=\"token eol-comment comment\">\"#EC CALLED</span>\n  sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"system_hook</span>\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* R E G I S T E R _ A F R C</span>\n<span class=\"token comment\">* register ARFC call</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_register_arfc<span class=\"token punctuation\">.</span>                                       <span class=\"token eol-comment comment\">\"#EC *</span>\n  arfc_pending <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_register_arfc</span>\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* R E G I S T E R _ t R F C / q R F C independent from Update TASK</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_register_trfc_no_wait_for_update<span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"#EC PREFIX_OK</span>\n  trfc_nowait_for_update <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*-------------------------------------------------------------------</span>\n<span class=\"token comment\">* register bgRFC actions</span>\n<span class=\"token comment\">*-------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_register_bgrfc<span class=\"token punctuation\">.</span>                                       <span class=\"token eol-comment comment\">\"#EC *</span>\n  bgrfc_eot_action <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_register_bgrfc</span>\n\n<span class=\"token comment\">*-------------------------------------------------------------------</span>\n<span class=\"token comment\">* register Local Data Queue (ldq) actions</span>\n<span class=\"token comment\">*-------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_register_ldq_writer<span class=\"token punctuation\">.</span>                                 <span class=\"token eol-comment comment\">\"#EC *</span>\n  ldq_writer_eot_action <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_register_ldq_writer</span>\n\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*&amp;      Form  %_register_ldq_reader</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*       text</span>\n<span class=\"token comment\">*----------------------------------------------------------------------*</span>\n<span class=\"token keyword\">form</span> %_register_ldq_reader<span class=\"token punctuation\">.</span>                                 <span class=\"token eol-comment comment\">\"#EC *</span>\n  ldq_reader_eot_action <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_register_ldq_reader</span>\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* L I S T _ C O M M A N D</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">module</span> list_command <span class=\"token keyword\">input</span><span class=\"token punctuation\">.</span>                                  <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">result</span> <span class=\"token keyword\">type</span> <span class=\"token keyword\">i</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*  IF sy-xcode(5) EQ 'PFILE'.</span>\n<span class=\"token comment\">*    MESSAGE ID '02' TYPE 'I' NUMBER '016'.</span>\n<span class=\"token comment\">*    CLEAR sy-xcode.</span>\n<span class=\"token comment\">*  ENDIF.</span>\n  <span class=\"token keyword\">result</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'QUERY_LIST_TO_MEMORY'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'RESULT'</span> <span class=\"token keyword\">field</span> <span class=\"token keyword\">result</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token keyword\">result</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n    sy<span class=\"token token-operator punctuation\">-</span>xcode <span class=\"token operator\">=</span> <span class=\"token string\">'%SMEX'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">check</span> sy<span class=\"token token-operator punctuation\">-</span>xcode<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token string\">'%'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'LIST_COMMAND'</span>\n    <span class=\"token keyword\">exporting</span>\n      command         <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>xcode\n    <span class=\"token keyword\">exceptions</span>\n      unknown_command <span class=\"token operator\">=</span> <span class=\"token number\">4</span>\n      <span class=\"token keyword\">others</span>          <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">check</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">clear</span><span class=\"token punctuation\">:</span> sy<span class=\"token token-operator punctuation\">-</span>ucomm<span class=\"token punctuation\">,</span> sy<span class=\"token token-operator punctuation\">-</span>xcode<span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endmodule</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"list_command INPUT</span>\n\n<span class=\"token comment\">* R/3-Drucken Anfang</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* P R I N T _ S T A R T</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">module</span> print_start <span class=\"token keyword\">input</span><span class=\"token punctuation\">.</span>                                   <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> hex02 <span class=\"token keyword\">type</span> <span class=\"token keyword\">x</span> <span class=\"token keyword\">value</span> <span class=\"token string\">'02'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> display_mode<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* Korrektur Ralf Wendelgaß 20.5.98</span>\n\n  <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>xcode <span class=\"token operator\">=</span> <span class=\"token string\">'PRI'</span>   <span class=\"token keyword\">or</span>\n     sy<span class=\"token token-operator punctuation\">-</span>xcode <span class=\"token operator\">=</span> <span class=\"token string\">'PRINT'</span> <span class=\"token keyword\">or</span>\n     sy<span class=\"token token-operator punctuation\">-</span>xcode <span class=\"token operator\">=</span> <span class=\"token string\">'%PRI'</span> <span class=\"token keyword\">or</span>\n     sy<span class=\"token token-operator punctuation\">-</span>xcode <span class=\"token operator\">=</span> <span class=\"token string\">'%PRN'</span><span class=\"token punctuation\">.</span>\n\n    display_mode <span class=\"token operator\">=</span> cl_abap_list_layout<span class=\"token token-operator punctuation\">=></span>get_display_mode<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n\n    sy<span class=\"token token-operator punctuation\">-</span>callr <span class=\"token operator\">=</span> <span class=\"token string\">'OKPRI'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* no print dialog if print icon was pressed</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>xcode <span class=\"token operator\">=</span> <span class=\"token string\">'%PRN'</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'PRINT_REPORT_DEFAULT'</span>\n        <span class=\"token keyword\">exporting</span>\n          <span class=\"token keyword\">report</span> <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>cprog\n          uc_display_mode <span class=\"token operator\">=</span> display_mode\n        <span class=\"token keyword\">exceptions</span>\n          <span class=\"token keyword\">others</span> <span class=\"token operator\">=</span> <span class=\"token number\">99</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'PRINT_REPORT'</span>\n        <span class=\"token keyword\">exporting</span>\n          <span class=\"token keyword\">report</span> <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>cprog\n          uc_display_mode <span class=\"token operator\">=</span> display_mode\n        <span class=\"token keyword\">exceptions</span>\n          <span class=\"token keyword\">others</span> <span class=\"token operator\">=</span> <span class=\"token number\">99</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* printing ok</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* cover page</span>\n      <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>subty <span class=\"token keyword\">o</span> hex02 <span class=\"token keyword\">and</span> %_print<span class=\"token token-operator punctuation\">-</span>prbig <span class=\"token operator\">&lt;></span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">perform</span> %_%_cover_page<span class=\"token punctuation\">(</span>rsdbrunt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n      sy<span class=\"token token-operator punctuation\">-</span>xcode <span class=\"token operator\">=</span> <span class=\"token string\">'PRI'</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* errors occured or printout cancelled</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">clear</span> sy<span class=\"token token-operator punctuation\">-</span>xcode<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">message</span> s015<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">endmodule</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"print_start INPUT</span>\n<span class=\"token comment\">* R/3-Drucken Ende</span>\n\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* S Y N T A X C H E C K - Popup (143)</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">module</span> sc_init <span class=\"token keyword\">output</span><span class=\"token punctuation\">.</span>                                      <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">tables</span><span class=\"token punctuation\">:</span> trdir<span class=\"token punctuation\">,</span> abmsg<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">set</span> <span class=\"token keyword\">titlebar</span> <span class=\"token string\">'001'</span><span class=\"token punctuation\">.</span>                                       <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">set</span> <span class=\"token keyword\">pf-status</span> <span class=\"token string\">'SCMS'</span> <span class=\"token keyword\">immediately</span><span class=\"token punctuation\">.</span>                         <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">select</span> <span class=\"token keyword\">single</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> trdir <span class=\"token keyword\">where</span> <span class=\"token keyword\">name</span> <span class=\"token operator\">=</span> abmsg<span class=\"token token-operator punctuation\">-</span>irepid<span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endmodule</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"sc_init OUTPUT</span>\n\n<span class=\"token comment\">*---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*       MODULE SC_RESET                                               *</span>\n<span class=\"token comment\">*---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*       ........                                                      *</span>\n<span class=\"token comment\">*---------------------------------------------------------------------*</span>\n<span class=\"token keyword\">module</span> sc_reset<span class=\"token punctuation\">.</span>                                            <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">leave</span> <span class=\"token keyword\">to</span> <span class=\"token keyword\">transaction</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endmodule</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"sc_reset</span>\n\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* L I S T _ E X I T</span>\n<span class=\"token comment\">* return from \"Listprocessing\" (main list of report -> LIST_RETURN)</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_list_exit<span class=\"token punctuation\">.</span>                                           <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">leave</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_list_exit</span>\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* L I S T _ R E T U R N</span>\n<span class=\"token comment\">* return from main list of report -> selection screen</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_list_return<span class=\"token punctuation\">.</span>                                         <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">perform</span> %_return_to_selscreen <span class=\"token keyword\">in</span> <span class=\"token keyword\">program</span> rsdbrunt <span class=\"token keyword\">if</span> <span class=\"token keyword\">found</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_list_return</span>\n\n<span class=\"token comment\">*???????????????????????????????????????????????????????????????????????</span>\n<span class=\"token keyword\">form</span> list_command ##NEEDED<span class=\"token punctuation\">.</span>                                 <span class=\"token eol-comment comment\">\"#EC CALLED</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* N E W - L I N E</span>\n<span class=\"token comment\">* called by ab_trigg to force a line-skip after GET processing</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> <span class=\"token keyword\">new-line</span> ##FIELD_HYPHEN<span class=\"token punctuation\">.</span>                               <span class=\"token eol-comment comment\">\"#EC CALLED</span>\n  <span class=\"token keyword\">new-line</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*&amp;      Module  LEAVE_LIST  OUTPUT</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*       text                                                           *</span>\n<span class=\"token comment\">*----------------------------------------------------------------------*</span>\n<span class=\"token comment\">*odule %_list_return output.</span>\n<span class=\"token comment\">* perform %_return_to_selscreen in program rsdbrunt if found.</span>\n<span class=\"token comment\">* leave screen.</span>\n<span class=\"token comment\">*ndmodule.                             \" LEAVE_LIST  OUTPUT</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*&amp;      Module  LIST_STRUCTURE_RECOGNIZER  OUTPUT</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*       text</span>\n<span class=\"token comment\">*----------------------------------------------------------------------*</span>\n<span class=\"token keyword\">module</span> list_structure_recognizer <span class=\"token keyword\">output</span><span class=\"token punctuation\">.</span>\n   cl_abap_list_parser<span class=\"token token-operator punctuation\">=></span>refresh_lsr_container<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endmodule</span><span class=\"token punctuation\">.</span>                 <span class=\"token eol-comment comment\">\" LIST_STRUCTURE_RECOGNIZER  OUTPUT</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*&amp;      Form  thew_list_masking</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*       text</span>\n<span class=\"token comment\">*----------------------------------------------------------------------*</span>\n<span class=\"token comment\">*  -->  p1        text</span>\n<span class=\"token comment\">*  &lt;--  p2        text</span>\n<span class=\"token comment\">*----------------------------------------------------------------------*</span>\n<span class=\"token keyword\">FORM</span> thew_list_masking <span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">DATA</span><span class=\"token punctuation\">:</span>\n    lv_func       <span class=\"token keyword\">TYPE</span> rs38l_fnam <span class=\"token keyword\">VALUE</span> <span class=\"token string\">'/UIM/PBO_120_HOOK_LIST'</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">TRY</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'FUNCTION_EXISTS'</span>\n        <span class=\"token keyword\">EXPORTING</span>\n          funcname           <span class=\"token operator\">=</span> lv_func\n        <span class=\"token keyword\">EXCEPTIONS</span>\n          function_not_exist <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n          <span class=\"token keyword\">OTHERS</span>             <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> lv_func<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">CATCH</span> cx_root<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDTRY</span><span class=\"token punctuation\">.</span>\n\n\n<span class=\"token keyword\">ENDFORM</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*&amp;      Form  thew_list_masking2</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*       advanced UI masking of special fields with helpid</span>\n<span class=\"token comment\">*       called from kernel by ab_rperf from abwrite</span>\n<span class=\"token comment\">*----------------------------------------------------------------------*</span>\n<span class=\"token keyword\">FORM</span> thew_list_masking2<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">DATA</span><span class=\"token punctuation\">:</span>\n    lv_func       <span class=\"token keyword\">TYPE</span> rs38l_fnam <span class=\"token keyword\">VALUE</span> <span class=\"token string\">'/UIM/PBO_WRITE_HOOK'</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">TRY</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'FUNCTION_EXISTS'</span>\n        <span class=\"token keyword\">EXPORTING</span>\n          funcname           <span class=\"token operator\">=</span> lv_func\n        <span class=\"token keyword\">EXCEPTIONS</span>\n          function_not_exist <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n          <span class=\"token keyword\">OTHERS</span>             <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n\n        <span class=\"token keyword\">FIELD-SYMBOLS</span><span class=\"token punctuation\">:</span>\n          &lt;in_p1>    <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">any</span><span class=\"token punctuation\">,</span>\n          &lt;in_p2>    <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">any</span><span class=\"token punctuation\">,</span>\n          &lt;inout_p3> <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">any</span><span class=\"token punctuation\">,</span>\n          &lt;out_p4>   <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">any</span><span class=\"token punctuation\">.</span>\n\n        <span class=\"token keyword\">CALL</span> <span class=\"token string\">'AB_GET_C_PARMS'</span> <span class=\"token keyword\">ID</span> <span class=\"token string\">'P1'</span> <span class=\"token keyword\">FIELD</span> &lt;in_p1>    <span class=\"token eol-comment comment\">\"field name</span>\n                              <span class=\"token keyword\">ID</span> <span class=\"token string\">'P2'</span> <span class=\"token keyword\">FIELD</span> &lt;in_p2>    <span class=\"token eol-comment comment\">\"ddic name</span>\n                              <span class=\"token keyword\">ID</span> <span class=\"token string\">'P3'</span> <span class=\"token keyword\">FIELD</span> &lt;inout_p3>    <span class=\"token eol-comment comment\">\"field value</span>\n                              <span class=\"token keyword\">ID</span> <span class=\"token string\">'P4'</span> <span class=\"token keyword\">FIELD</span> &lt;out_p4><span class=\"token punctuation\">.</span>    <span class=\"token eol-comment comment\">\"flag is list masking</span>\n\n        <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> lv_func\n          <span class=\"token keyword\">EXPORTING</span>\n            fieldname       <span class=\"token operator\">=</span> &lt;in_p1>\n            ddicname        <span class=\"token operator\">=</span> &lt;in_p2>\n          <span class=\"token keyword\">IMPORTING</span>\n            is_list_masking <span class=\"token operator\">=</span> &lt;out_p4>\n          <span class=\"token keyword\">CHANGING</span>\n            fieldvalue      <span class=\"token operator\">=</span> &lt;inout_p3><span class=\"token punctuation\">.</span>\n\n        <span class=\"token keyword\">CALL</span> <span class=\"token string\">'AB_SET_C_PARMS'</span> <span class=\"token keyword\">ID</span> <span class=\"token string\">'P3'</span> <span class=\"token keyword\">FIELD</span> &lt;inout_p3>\n                      <span class=\"token keyword\">ID</span> <span class=\"token string\">'P4'</span> <span class=\"token keyword\">FIELD</span> &lt;out_p4><span class=\"token punctuation\">.</span>    <span class=\"token eol-comment comment\">\"#EC CI_CCALL CI_CCALL</span>\n      <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CATCH</span> cx_root<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDTRY</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">ENDFORM</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>","position":{"start":{"line":9,"column":1,"offset":118},"end":{"line":1042,"column":4,"offset":36767},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1043,"column":1,"offset":36768}}}},{"id":"transformer-remark-markdown-ast-c46e3fa3db7c9600fce9d1627b471244-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":{"type":"root","children":[{"type":"yaml","value":"title: How to be an American living in Austria and working in Liechtenstein\ndate: \"2018-01-17\"\ndraft: false","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":5,"column":4,"offset":115},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Hey, Want to be an American living in Austria and working in Liechtenstein?","position":{"start":{"line":7,"column":4,"offset":120},"end":{"line":7,"column":79,"offset":195},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":117},"end":{"line":7,"column":79,"offset":195},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Look no further!","position":{"start":{"line":8,"column":4,"offset":199},"end":{"line":8,"column":20,"offset":215},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":196},"end":{"line":8,"column":20,"offset":215},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This is a detailed how-to guide on applying and obtaining:","position":{"start":{"line":10,"column":1,"offset":217},"end":{"line":10,"column":59,"offset":275},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":217},"end":{"line":10,"column":59,"offset":275},"indent":[]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"An Austrian residence permit","position":{"start":{"line":11,"column":3,"offset":278},"end":{"line":11,"column":31,"offset":306},"indent":[]}}],"position":{"start":{"line":11,"column":3,"offset":278},"end":{"line":11,"column":31,"offset":306},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":276},"end":{"line":11,"column":31,"offset":306},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A Liechtensteiner work permit","position":{"start":{"line":12,"column":3,"offset":309},"end":{"line":12,"column":32,"offset":338},"indent":[]}}],"position":{"start":{"line":12,"column":3,"offset":309},"end":{"line":12,"column":32,"offset":338},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":307},"end":{"line":12,"column":32,"offset":338},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":276},"end":{"line":12,"column":32,"offset":338},"indent":[1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"The Task","position":{"start":{"line":14,"column":4,"offset":343},"end":{"line":14,"column":12,"offset":351},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":340},"end":{"line":14,"column":12,"offset":351},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Warning: this process took me over two months. I want to share first how I did it, and then how I should have done it in hopes to save others time if they should wish to attempt tackling this debauchery of paperwork and bureaucracy.*","position":{"start":{"line":16,"column":1,"offset":353},"end":{"line":16,"column":234,"offset":586},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":353},"end":{"line":16,"column":234,"offset":586},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<sup>","position":{"start":{"line":18,"column":1,"offset":588},"end":{"line":18,"column":6,"offset":593},"indent":[]}},{"type":"text","value":"*","position":{"start":{"line":18,"column":6,"offset":593},"end":{"line":18,"column":8,"offset":595},"indent":[]}},{"type":"text","value":" Trust me when I say I’m not a legal counsel so always take my words with a grain of salt. However, as of February 2016, these were the steps I took to get started working. UPDATE 2017: The process is still the same as described here. I know this because you have to renew your permits each year for your first three years in Austria. Granted, it is much easier the second and third times as you have all of your papers in place already from the previous year!","position":{"start":{"line":18,"column":8,"offset":595},"end":{"line":18,"column":468,"offset":1055},"indent":[]}},{"type":"html","value":"</sup>","position":{"start":{"line":18,"column":468,"offset":1055},"end":{"line":18,"column":474,"offset":1061},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":588},"end":{"line":18,"column":474,"offset":1061},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":20,"column":4,"offset":1066},"end":{"line":20,"column":12,"offset":1074},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1063},"end":{"line":20,"column":12,"offset":1074},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When you plan on living in Austria for longer than three months, and then longer than sixth months (there are some other special visas such as a student visa, artist visa which last for sixth months), then the government requires you to apply for a Niedlerlassungsbewilligung, a specific type of Aufenhaltstitel, or residence permit, very similar to a green card in the US. Then, Liechtenstein requires that you have Aufenhaltstitel, or a working permit to legally work in Liechtenstein. Your company should help you with this process, and, since a cross border working permit for Liechtenstein is very common, the application is relatively simple compared to the Niedlerlassungsbewilligung.","position":{"start":{"line":22,"column":1,"offset":1076},"end":{"line":22,"column":692,"offset":1767},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1076},"end":{"line":22,"column":692,"offset":1767},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Legal Entities","position":{"start":{"line":24,"column":4,"offset":1772},"end":{"line":24,"column":18,"offset":1786},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1769},"end":{"line":24,"column":18,"offset":1786},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"There are four legal entities you are going to need to work with to get everything to jive:","position":{"start":{"line":26,"column":1,"offset":1788},"end":{"line":26,"column":92,"offset":1879},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1788},"end":{"line":26,"column":92,"offset":1879},"indent":[]}},{"type":"list","ordered":true,"start":1,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Perhaps most important, is the Bezirkshauptmannschaft, or “BH” for short in German, or in English, the district authority. This is where you will complete your Niedlerlassungsbewilligung, or residence permit.","position":{"start":{"line":27,"column":4,"offset":1883},"end":{"line":27,"column":212,"offset":2091},"indent":[]}}],"position":{"start":{"line":27,"column":4,"offset":1883},"end":{"line":27,"column":212,"offset":2091},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1880},"end":{"line":27,"column":212,"offset":2091},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Another place you will visit is the Gemeindeamt, or town hall of the town your apartment is in. This is where you will make your Meldezettel, or certification of registration. When you do this registration, you want to make your Haupwohnsitz, or main place of residence to that town.","position":{"start":{"line":28,"column":4,"offset":2095},"end":{"line":28,"column":287,"offset":2378},"indent":[]}}],"position":{"start":{"line":28,"column":4,"offset":2095},"end":{"line":28,"column":287,"offset":2378},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":2092},"end":{"line":28,"column":287,"offset":2378},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"You will also need to work with the Besitzer, or the owner of the apartment. If the apartment you want to rent is a private, this shouldn’t be so difficult. Unfortunately, it is quite common in Austria that apartments are owned by an apartment company, so you may have to work with one of those companies to finally get the rent contract and the signature of the official owner of the building itself.","position":{"start":{"line":29,"column":4,"offset":2382},"end":{"line":29,"column":405,"offset":2783},"indent":[]}}],"position":{"start":{"line":29,"column":4,"offset":2382},"end":{"line":29,"column":405,"offset":2783},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":2379},"end":{"line":29,"column":405,"offset":2783},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Finally, the two documents you will need to send from Liechtenstein are mandated by the Besitzer Ausländer- und Passamt, or the Immigration and Passport Office of Liechtenstein.\nLong Term Residence Permit(Nieder- lassungs- bewilligung)\nFor the residence permit, fill out the Niedlerlassungsbewilligung application. If you already have your apartment, you should even be able to fill in those parts as well. If you don’t have a spouse or children, you can skip many parts of this application. Anyways, the BH will look over it when you first supply it to them anyway, so don’t stress too much.\nTo fully complete the Niedlerlassungsbewilligung application, you will need to bring the following documents when you go to the BH:","position":{"start":{"line":30,"column":4,"offset":2787},"end":{"line":33,"column":132,"offset":3511},"indent":[1,1,1]}}],"position":{"start":{"line":30,"column":4,"offset":2787},"end":{"line":33,"column":132,"offset":3511},"indent":[1,1,1]}}],"position":{"start":{"line":30,"column":1,"offset":2784},"end":{"line":33,"column":132,"offset":3511},"indent":[1,1,1]}}],"position":{"start":{"line":27,"column":1,"offset":1880},"end":{"line":33,"column":132,"offset":3511},"indent":[1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Original Documents","position":{"start":{"line":35,"column":4,"offset":3516},"end":{"line":35,"column":22,"offset":3534},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":3513},"end":{"line":35,"column":22,"offset":3534},"indent":[]}},{"type":"list","ordered":true,"start":1,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Passport photo (glue it right on the front page of the application)","position":{"start":{"line":37,"column":4,"offset":3539},"end":{"line":37,"column":71,"offset":3606},"indent":[]}}],"position":{"start":{"line":37,"column":4,"offset":3539},"end":{"line":37,"column":71,"offset":3606},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":3536},"end":{"line":37,"column":71,"offset":3606},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Your birth certificate, signed by an apostle","position":{"start":{"line":38,"column":4,"offset":3610},"end":{"line":38,"column":48,"offset":3654},"indent":[]}}],"position":{"start":{"line":38,"column":4,"offset":3610},"end":{"line":38,"column":48,"offset":3654},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":3607},"end":{"line":38,"column":48,"offset":3654},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A police report from you local police station listing an infractions you may or may not have, also signed by an apostle","position":{"start":{"line":39,"column":4,"offset":3658},"end":{"line":39,"column":123,"offset":3777},"indent":[]}}],"position":{"start":{"line":39,"column":4,"offset":3658},"end":{"line":39,"column":123,"offset":3777},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":3655},"end":{"line":39,"column":123,"offset":3777},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Your (at the lowest) A1 German proficiency certificate","position":{"start":{"line":40,"column":4,"offset":3781},"end":{"line":40,"column":58,"offset":3835},"indent":[]}}],"position":{"start":{"line":40,"column":4,"offset":3781},"end":{"line":40,"column":58,"offset":3835},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":3778},"end":{"line":40,"column":58,"offset":3835},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":3536},"end":{"line":40,"column":58,"offset":3835},"indent":[1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Copied Documents","position":{"start":{"line":42,"column":4,"offset":3840},"end":{"line":42,"column":20,"offset":3856},"indent":[]}}],"position":{"start":{"line":42,"column":1,"offset":3837},"end":{"line":42,"column":20,"offset":3856},"indent":[]}},{"type":"list","ordered":true,"start":1,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Your rent agreement, make sure the copy has the signature of owner of the apartment building","position":{"start":{"line":44,"column":4,"offset":3861},"end":{"line":44,"column":96,"offset":3953},"indent":[]}}],"position":{"start":{"line":44,"column":4,"offset":3861},"end":{"line":44,"column":96,"offset":3953},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":3858},"end":{"line":44,"column":96,"offset":3953},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Flight confirmation ticket (so the BH knows how long you have to legally stay in Austria)","position":{"start":{"line":45,"column":4,"offset":3957},"end":{"line":45,"column":93,"offset":4046},"indent":[]}}],"position":{"start":{"line":45,"column":4,"offset":3957},"end":{"line":45,"column":93,"offset":4046},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":3954},"end":{"line":45,"column":93,"offset":4046},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A police report from you local police station listing an infractions you may or may not have, also signed by an apostle","position":{"start":{"line":46,"column":4,"offset":4050},"end":{"line":46,"column":123,"offset":4169},"indent":[]}}],"position":{"start":{"line":46,"column":4,"offset":4050},"end":{"line":46,"column":123,"offset":4169},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":4047},"end":{"line":46,"column":123,"offset":4169},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Your A1 certification in German. This is exam is not to be taken lightly! I did it through the Goethe Institut in U.S.","position":{"start":{"line":47,"column":4,"offset":4173},"end":{"line":47,"column":122,"offset":4291},"indent":[]}}],"position":{"start":{"line":47,"column":4,"offset":4173},"end":{"line":47,"column":122,"offset":4291},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":4170},"end":{"line":47,"column":122,"offset":4291},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Your work contract - make sure all the work contracts have signatures.","position":{"start":{"line":48,"column":4,"offset":4295},"end":{"line":48,"column":74,"offset":4365},"indent":[]}}],"position":{"start":{"line":48,"column":4,"offset":4295},"end":{"line":48,"column":74,"offset":4365},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":4292},"end":{"line":48,"column":74,"offset":4365},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A “simulation” of your wage with expected taxes from Austria - make sure this has signatures from your company as well.\nWork Permit(Arbeits- bewilligung)\nFor the work permit, you will need to fill out the Stellanantritt ohne Wohnsitznahme in Liechtenstein and Persönliche Angabe zur Ausstellung des Aufenhaltstitels applications. Your company in Liechtenstein may send you these half completed, or they may not. Mine did.\nTo fully complete the applications, you will need the following attachments:","position":{"start":{"line":49,"column":4,"offset":4369},"end":{"line":52,"column":77,"offset":4867},"indent":[1,1,1]}}],"position":{"start":{"line":49,"column":4,"offset":4369},"end":{"line":52,"column":77,"offset":4867},"indent":[1,1,1]}}],"position":{"start":{"line":49,"column":1,"offset":4366},"end":{"line":52,"column":77,"offset":4867},"indent":[1,1,1]}}],"position":{"start":{"line":44,"column":1,"offset":3858},"end":{"line":52,"column":77,"offset":4867},"indent":[1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Original Documents","position":{"start":{"line":54,"column":4,"offset":4872},"end":{"line":54,"column":22,"offset":4890},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":4869},"end":{"line":54,"column":22,"offset":4890},"indent":[]}},{"type":"list","ordered":true,"start":1,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Passport photo (glue it right on the front page of the Persönliche Angabe zur Ausstellung des Aufenhaltstitels)","position":{"start":{"line":56,"column":4,"offset":4895},"end":{"line":56,"column":115,"offset":5006},"indent":[]}}],"position":{"start":{"line":56,"column":4,"offset":4895},"end":{"line":56,"column":115,"offset":5006},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":4892},"end":{"line":56,"column":115,"offset":5006},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":4892},"end":{"line":56,"column":115,"offset":5006},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"And… that’s it. Just the passport photo. Told you it was cake compared to the residence permit.\nThe Perfect Process\nNow, some of the things you have seen above may not really make any sense to you. The list below will describe them and outline, if you were perfect, how you could complete the entire process without any confusion or wasting of time:","position":{"start":{"line":58,"column":1,"offset":5009},"end":{"line":60,"column":234,"offset":5360},"indent":[1,1]}}],"position":{"start":{"line":58,"column":1,"offset":5009},"end":{"line":60,"column":234,"offset":5360},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Before Going to Austria","position":{"start":{"line":62,"column":4,"offset":5365},"end":{"line":62,"column":27,"offset":5388},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":5362},"end":{"line":62,"column":27,"offset":5388},"indent":[]}},{"type":"list","ordered":true,"start":1,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Get a job offer in Liechtenstein! The company will send you contracts which you need to sign in the presence of an apostle, which you will then send back to the company for their final approval. They’ll then order the contracts which you need to fill out for Liechtenstein.","position":{"start":{"line":64,"column":4,"offset":5393},"end":{"line":64,"column":277,"offset":5666},"indent":[]}}],"position":{"start":{"line":64,"column":4,"offset":5393},"end":{"line":64,"column":277,"offset":5666},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":5390},"end":{"line":64,"column":277,"offset":5666},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Pass your German A1 Proficiency Exam and wait for certificate to be mailed to you (this is probably easier before you go to Austria, but not impossible to do in Austria or Germany). This exam is includes basic reading, writing, and speaking in German. I did mine through the Goethe Institut. More about it here.","position":{"start":{"line":65,"column":4,"offset":5670},"end":{"line":65,"column":315,"offset":5981},"indent":[]}}],"position":{"start":{"line":65,"column":4,"offset":5670},"end":{"line":65,"column":315,"offset":5981},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":5667},"end":{"line":65,"column":315,"offset":5981},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":5390},"end":{"line":65,"column":315,"offset":5981},"indent":[1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Once In Austria","position":{"start":{"line":67,"column":4,"offset":5986},"end":{"line":67,"column":19,"offset":6001},"indent":[]}}],"position":{"start":{"line":67,"column":1,"offset":5983},"end":{"line":67,"column":19,"offset":6001},"indent":[]}},{"type":"list","ordered":true,"start":1,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Obtain an Austrian Bank Account (this takes a few days because they always need to approve foreigners) this will help time saving immensely with any bank transfers you need for the apartment, such as the security deposit or first months rent.","position":{"start":{"line":69,"column":4,"offset":6006},"end":{"line":69,"column":246,"offset":6248},"indent":[]}}],"position":{"start":{"line":69,"column":4,"offset":6006},"end":{"line":69,"column":246,"offset":6248},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":6003},"end":{"line":69,"column":246,"offset":6248},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Aggressively hunt for an apartment, get the rent contract made up and sign it with the owner of the apartment as soon as you can. (This process took me a month.)","position":{"start":{"line":70,"column":4,"offset":6252},"end":{"line":70,"column":165,"offset":6413},"indent":[]}}],"position":{"start":{"line":70,"column":4,"offset":6252},"end":{"line":70,"column":165,"offset":6413},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":6249},"end":{"line":70,"column":165,"offset":6413},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"In the meantime of all the apartment hunting, get a bunch of passport photos taken. You will need them for a few things later on.","position":{"start":{"line":71,"column":4,"offset":6417},"end":{"line":71,"column":133,"offset":6546},"indent":[]}}],"position":{"start":{"line":71,"column":4,"offset":6417},"end":{"line":71,"column":133,"offset":6546},"indent":[]}}],"position":{"start":{"line":71,"column":1,"offset":6414},"end":{"line":71,"column":133,"offset":6546},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Make your Meldezettal, or certification of registration at your local  Gemindeamt or town hall (make sure to bring your rent contract when you go!)","position":{"start":{"line":72,"column":4,"offset":6550},"end":{"line":72,"column":151,"offset":6697},"indent":[]}}],"position":{"start":{"line":72,"column":4,"offset":6550},"end":{"line":72,"column":151,"offset":6697},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":6547},"end":{"line":72,"column":151,"offset":6697},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Go to the BH with all of the documents listed above. If you’re good (unlike me) and have all the documents when you go, you should need to go only once.","position":{"start":{"line":73,"column":4,"offset":6701},"end":{"line":73,"column":156,"offset":6853},"indent":[]}}],"position":{"start":{"line":73,"column":4,"offset":6701},"end":{"line":73,"column":156,"offset":6853},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":6698},"end":{"line":73,"column":156,"offset":6853},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Now, this step is tricky. Liechtenstein won’t issue you a work permit without first seeing your residence permit (would be easy if you were an EU citizen - they would issue it as soon as they knew you were a citizen!) However, Austria won’t issue you a residence permit without first seeing the work permit! Catch 22 right? Well, not exactly. When you have everything ready for your residence permit at the BH, you can get help from your company and the Liechtenstein government to send a short confirmation letter saying that yes, as soon as you have your residence permit, they will issue you a work permit if you send in your residence permit for them to examine.","position":{"start":{"line":74,"column":4,"offset":6857},"end":{"line":74,"column":670,"offset":7523},"indent":[]}}],"position":{"start":{"line":74,"column":4,"offset":6857},"end":{"line":74,"column":670,"offset":7523},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":6854},"end":{"line":74,"column":670,"offset":7523},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Now wait. Some district authority offices say it can take as long as six months to approve your residence permit. I personally think that it depends more on your start date. I don’t think they will toast you and make you wait for months if they see your start date is coming up in just a few weeks or month.","position":{"start":{"line":75,"column":4,"offset":7527},"end":{"line":75,"column":311,"offset":7834},"indent":[]}}],"position":{"start":{"line":75,"column":4,"offset":7527},"end":{"line":75,"column":311,"offset":7834},"indent":[]}}],"position":{"start":{"line":75,"column":1,"offset":7524},"end":{"line":75,"column":311,"offset":7834},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Then, eventually, the BH will call you and tell you when you can pick up your residence permit! You will have to go this time with your passport and pay a final 20 EUR to receive the residence permit. They told me to come back on a date about a week after I finally submitted everything.","position":{"start":{"line":76,"column":4,"offset":7838},"end":{"line":76,"column":291,"offset":8125},"indent":[]}}],"position":{"start":{"line":76,"column":4,"offset":7838},"end":{"line":76,"column":291,"offset":8125},"indent":[]}}],"position":{"start":{"line":76,"column":1,"offset":7835},"end":{"line":76,"column":291,"offset":8125},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Then, you will need to work with your company. The authorities in Liechtenstein will need to see that residence permit that you just got, with those two other documents I mentioned above. Probably with yet another week, then will then issue you the work permit. I picked my work permit up from my company, but maybe they sometimes mail it. I’m not sure.","position":{"start":{"line":77,"column":4,"offset":8129},"end":{"line":77,"column":357,"offset":8482},"indent":[]}}],"position":{"start":{"line":77,"column":4,"offset":8129},"end":{"line":77,"column":357,"offset":8482},"indent":[]}}],"position":{"start":{"line":77,"column":1,"offset":8126},"end":{"line":77,"column":357,"offset":8482},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Finally, you’ve done it! Hike up to a hut, sip a delicious Austrian beer and eat a big Germknödel! Try not to think about after all that paperwork your only reward is to start working!","position":{"start":{"line":78,"column":5,"offset":8487},"end":{"line":78,"column":189,"offset":8671},"indent":[]}}],"position":{"start":{"line":78,"column":5,"offset":8487},"end":{"line":78,"column":189,"offset":8671},"indent":[]}}],"position":{"start":{"line":78,"column":1,"offset":8483},"end":{"line":78,"column":189,"offset":8671},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":6003},"end":{"line":78,"column":189,"offset":8671},"indent":[1,1,1,1,1,1,1,1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":82,"column":1,"offset":8678}}}},{"id":"transformer-remark-markdown-ast-db3793957d7070894669774f0e9d5739-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":{"type":"root","children":[{"type":"yaml","value":"title: Warn SAP Users of Locked Objects\ndate: \"2018-01-17\"\ndraft: true","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":5,"column":4,"offset":78},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"SAP users lockin’ up your objects?","position":{"start":{"line":7,"column":4,"offset":83},"end":{"line":7,"column":38,"offset":117},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":80},"end":{"line":7,"column":38,"offset":117},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"We’re gonna write an ABAP report and run it as a batch job to 🤖 ","position":{"start":{"line":8,"column":5,"offset":122},"end":{"line":8,"column":70,"offset":187},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Automatically","position":{"start":{"line":8,"column":71,"offset":188},"end":{"line":8,"column":84,"offset":201},"indent":[]}}],"position":{"start":{"line":8,"column":70,"offset":187},"end":{"line":8,"column":85,"offset":202},"indent":[]}},{"type":"text","value":" 🤖 get rid of them!","position":{"start":{"line":8,"column":85,"offset":202},"end":{"line":8,"column":105,"offset":222},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":118},"end":{"line":8,"column":105,"offset":222},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":10,"column":4,"offset":227},"end":{"line":10,"column":12,"offset":235},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":224},"end":{"line":10,"column":12,"offset":235},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Alright everyone, we’re gonna walk through a fun ABAP report that involves functional programming, some challenging and creative BDC techniques, and a ","position":{"start":{"line":12,"column":1,"offset":237},"end":{"line":12,"column":152,"offset":388},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"‘forbidden’ SAP internal function module!!!","position":{"start":{"line":12,"column":153,"offset":389},"end":{"line":12,"column":196,"offset":432},"indent":[]}}],"position":{"start":{"line":12,"column":152,"offset":388},"end":{"line":12,"column":197,"offset":433},"indent":[]}},{"type":"text","value":" 😱 😱 😱","position":{"start":{"line":12,"column":197,"offset":433},"end":{"line":12,"column":206,"offset":442},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":237},"end":{"line":12,"column":206,"offset":442},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"SAP and it’s Locked Objects","position":{"start":{"line":14,"column":4,"offset":447},"end":{"line":14,"column":31,"offset":474},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":444},"end":{"line":14,"column":31,"offset":474},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Anyone with a bit of technical sided SAP/ABAP experience knows that SAP has a locked object system - that is, a maximum of one entity can change an object at a time, wether it be a human user, a program, or any process. These ‘objects’ in SAP are numerous - orders, HUs, even warehouse bins are ‘objects’ that can be ‘locked’ when they are under modification somewhere in the system.","position":{"start":{"line":16,"column":1,"offset":476},"end":{"line":16,"column":384,"offset":859},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":476},"end":{"line":16,"column":384,"offset":859},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This can get very annoying when multiple entities want to change multiple objects in similar time frames.","position":{"start":{"line":18,"column":1,"offset":861},"end":{"line":18,"column":106,"offset":966},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":861},"end":{"line":18,"column":106,"offset":966},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"A Remedy for the Problem","position":{"start":{"line":20,"column":4,"offset":971},"end":{"line":20,"column":28,"offset":995},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":968},"end":{"line":20,"column":28,"offset":995},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ABAP report I’m going to go through alleviates this problem and could be useful for any company that has automatic processes applied to objects in the system, but at the same time have human users that ","position":{"start":{"line":22,"column":1,"offset":997},"end":{"line":22,"column":207,"offset":1203},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"also","position":{"start":{"line":22,"column":208,"offset":1204},"end":{"line":22,"column":212,"offset":1208},"indent":[]}}],"position":{"start":{"line":22,"column":207,"offset":1203},"end":{"line":22,"column":213,"offset":1209},"indent":[]}},{"type":"text","value":" modify these objects.","position":{"start":{"line":22,"column":213,"offset":1209},"end":{"line":22,"column":235,"offset":1231},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":997},"end":{"line":22,"column":235,"offset":1231},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The example program I will go through is for orders specifically (think TYPE AUFNR). Feel free to modify the code for any locked objects of your liking 😊 - the program logic following the locked object selection will not change, as we will soon see.","position":{"start":{"line":24,"column":1,"offset":1233},"end":{"line":24,"column":251,"offset":1483},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1233},"end":{"line":24,"column":251,"offset":1483},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Specific Problem","position":{"start":{"line":26,"column":4,"offset":1488},"end":{"line":26,"column":20,"offset":1504},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1485},"end":{"line":26,"column":20,"offset":1504},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"At my company we had some batch jobs that were attempting to change orders, only to find that the users were locked by some of our employees in their own SAP GUI transactions. Nothing ‘bad’ per say was happening, we were just seeing in the protocol of those various batch jobs that the orders couldn’t be accessed. We realized a human user could easily forget they had a transaction open which locked an order, while they went off to work on something else, or were totally away from their work station.","position":{"start":{"line":28,"column":1,"offset":1506},"end":{"line":28,"column":504,"offset":2009},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1506},"end":{"line":28,"column":504,"offset":2009},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We decided ultimately to build a timed warning system for users that happened to be locking orders, functioning as follows:","position":{"start":{"line":30,"column":1,"offset":2011},"end":{"line":30,"column":124,"offset":2134},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":2011},"end":{"line":30,"column":124,"offset":2134},"indent":[]}},{"type":"list","ordered":true,"start":1,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A warning popup for the user at 5 minutes of lock time","position":{"start":{"line":32,"column":4,"offset":2139},"end":{"line":32,"column":58,"offset":2193},"indent":[]}}],"position":{"start":{"line":32,"column":4,"offset":2139},"end":{"line":32,"column":58,"offset":2193},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":2136},"end":{"line":32,"column":58,"offset":2193},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A second warning popup for the user warning at 10 minutes of lock time","position":{"start":{"line":33,"column":4,"offset":2197},"end":{"line":33,"column":74,"offset":2267},"indent":[]}}],"position":{"start":{"line":33,"column":4,"offset":2197},"end":{"line":33,"column":74,"offset":2267},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":2194},"end":{"line":33,"column":74,"offset":2267},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Forcefully close the transaction that was locking the order at 15 minutes of lock time","position":{"start":{"line":34,"column":4,"offset":2271},"end":{"line":34,"column":90,"offset":2357},"indent":[]}}],"position":{"start":{"line":34,"column":4,"offset":2271},"end":{"line":34,"column":90,"offset":2357},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":2268},"end":{"line":34,"column":90,"offset":2357},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":2136},"end":{"line":34,"column":90,"offset":2357},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"And yes, this can all be done from an automatic process with no overseeing required! 😊","position":{"start":{"line":36,"column":1,"offset":2359},"end":{"line":36,"column":88,"offset":2446},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":2359},"end":{"line":36,"column":88,"offset":2446},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Let’s get started!","position":{"start":{"line":38,"column":1,"offset":2448},"end":{"line":38,"column":19,"offset":2466},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":2448},"end":{"line":38,"column":19,"offset":2466},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Identify Locked Objects","position":{"start":{"line":40,"column":4,"offset":2471},"end":{"line":40,"column":27,"offset":2494},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":2468},"end":{"line":40,"column":27,"offset":2494},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The first thing we need to do is get the locked objects and times of all those locked objects across the whole system. As I said, for our case, we are only interested in locked orders. This is object type ","position":{"start":{"line":42,"column":1,"offset":2496},"end":{"line":42,"column":206,"offset":2701},"indent":[]}},{"type":"inlineCode","value":"AUFK","position":{"start":{"line":42,"column":206,"offset":2701},"end":{"line":42,"column":212,"offset":2707},"indent":[]}}],"position":{"start":{"line":42,"column":1,"offset":2496},"end":{"line":42,"column":212,"offset":2707},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"So, we have our table of objects, and the users who are locking. To be as","position":{"start":{"line":44,"column":1,"offset":2709},"end":{"line":44,"column":74,"offset":2782},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":2709},"end":{"line":44,"column":74,"offset":2782},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"The ‘forbidden’ module","position":{"start":{"line":46,"column":4,"offset":2787},"end":{"line":46,"column":26,"offset":2809},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":2784},"end":{"line":46,"column":26,"offset":2809},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"BDC Tricks","position":{"start":{"line":48,"column":4,"offset":2814},"end":{"line":48,"column":14,"offset":2824},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":2811},"end":{"line":48,"column":14,"offset":2824},"indent":[]}},{"type":"html","value":"<hr/>","position":{"start":{"line":50,"column":1,"offset":2826},"end":{"line":50,"column":6,"offset":2831},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Footnotes","position":{"start":{"line":52,"column":3,"offset":2835},"end":{"line":52,"column":12,"offset":2844},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":2833},"end":{"line":52,"column":12,"offset":2844},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":53,"column":1,"offset":2845}}}},{"id":"transformer-remark-markdown-ast-aab872ec4aa1f1e0b0c375dbf6ca4c06-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":{"type":"root","children":[{"type":"yaml","value":"title: ABAP Push and Message Channels\ndate: \"2018-01-12\"\ndraft: true","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":5,"column":4,"offset":76},"indent":[1,1,1,1]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Add some spice to your SAPUI5 apps!","position":{"start":{"line":7,"column":3,"offset":80},"end":{"line":7,"column":38,"offset":115},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":78},"end":{"line":7,"column":38,"offset":115},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"(Or even normal webapps, for that matter)","position":{"start":{"line":8,"column":4,"offset":119},"end":{"line":8,"column":45,"offset":160},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":116},"end":{"line":8,"column":45,"offset":160},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"I was a noob. I wrote in my SAPUI5 some warehouse task code that would have a real time. How did I do it?","position":{"start":{"line":10,"column":1,"offset":162},"end":{"line":10,"column":106,"offset":267},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":162},"end":{"line":10,"column":106,"offset":267},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"I wrote a ","position":{"start":{"line":12,"column":1,"offset":269},"end":{"line":12,"column":11,"offset":279},"indent":[]}},{"type":"inlineCode","value":"window.setInterval()","position":{"start":{"line":12,"column":11,"offset":279},"end":{"line":12,"column":33,"offset":301},"indent":[]}},{"type":"text","value":" function that would ping table ","position":{"start":{"line":12,"column":33,"offset":301},"end":{"line":12,"column":65,"offset":333},"indent":[]}},{"type":"inlineCode","value":"/SCWM/WT","position":{"start":{"line":12,"column":65,"offset":333},"end":{"line":12,"column":75,"offset":343},"indent":[]}},{"type":"text","value":" 😊 and check for any new lines - with an OData ","position":{"start":{"line":12,"column":75,"offset":343},"end":{"line":12,"column":123,"offset":391},"indent":[]}},{"type":"inlineCode","value":"GET_ENTITY_SET","position":{"start":{"line":12,"column":123,"offset":391},"end":{"line":12,"column":139,"offset":407},"indent":[]}},{"type":"text","value":" server request. 😊 😊","position":{"start":{"line":12,"column":139,"offset":407},"end":{"line":12,"column":161,"offset":429},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":269},"end":{"line":12,"column":161,"offset":429},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Yeah.","position":{"start":{"line":14,"column":1,"offset":431},"end":{"line":14,"column":6,"offset":436},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":431},"end":{"line":14,"column":6,"offset":436},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Well, I was lucky to learn about websockets from one of our EWM. Then I was even luckier to learn a bit more about the technical aspects (when to subscribe, unsubscribe, destroy, and create websockets instances from actions on the front end).","position":{"start":{"line":16,"column":1,"offset":438},"end":{"line":16,"column":243,"offset":680},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":438},"end":{"line":16,"column":243,"offset":680},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"So here’s how to add websockets to your SAPUI5 app","position":{"start":{"line":18,"column":1,"offset":682},"end":{"line":18,"column":51,"offset":732},"indent":[]}},{"type":"html","value":"<sup>","position":{"start":{"line":18,"column":51,"offset":732},"end":{"line":18,"column":56,"offset":737},"indent":[]}},{"type":"html","value":"<a href=\"#footnote-1\">","position":{"start":{"line":18,"column":56,"offset":737},"end":{"line":18,"column":78,"offset":759},"indent":[]}},{"type":"text","value":"1","position":{"start":{"line":18,"column":78,"offset":759},"end":{"line":18,"column":79,"offset":760},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":18,"column":79,"offset":760},"end":{"line":18,"column":83,"offset":764},"indent":[]}},{"type":"html","value":"</sup>","position":{"start":{"line":18,"column":83,"offset":764},"end":{"line":18,"column":89,"offset":770},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":18,"column":89,"offset":770},"end":{"line":18,"column":90,"offset":771},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":682},"end":{"line":18,"column":90,"offset":771},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Transactions","position":{"start":{"line":20,"column":4,"offset":776},"end":{"line":20,"column":16,"offset":788},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":773},"end":{"line":20,"column":16,"offset":788},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"All backend push and messaging channels can be managed with just two transactions:  ","position":{"start":{"line":22,"column":1,"offset":790},"end":{"line":22,"column":85,"offset":874},"indent":[]}},{"type":"inlineCode","value":"SAMC","position":{"start":{"line":22,"column":85,"offset":874},"end":{"line":22,"column":91,"offset":880},"indent":[]}},{"type":"text","value":", for message channels and ","position":{"start":{"line":22,"column":91,"offset":880},"end":{"line":22,"column":118,"offset":907},"indent":[]}},{"type":"inlineCode","value":"SAPC","position":{"start":{"line":22,"column":118,"offset":907},"end":{"line":22,"column":124,"offset":913},"indent":[]}},{"type":"text","value":", for push channels. Easy enough.","position":{"start":{"line":22,"column":124,"offset":913},"end":{"line":22,"column":157,"offset":946},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":790},"end":{"line":22,"column":157,"offset":946},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Creating a Message Channel","position":{"start":{"line":24,"column":4,"offset":951},"end":{"line":24,"column":30,"offset":977},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":948},"end":{"line":24,"column":30,"offset":977},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"As we will see, to create a proper push channel, we will first need a message channel, so that is where we start off. An ABAP message channel is a way of subscribing current programs to any - the best thing about push channels is that if the push channel ","position":{"start":{"line":26,"column":1,"offset":979},"end":{"line":26,"column":256,"offset":1234},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"isn’t","position":{"start":{"line":26,"column":257,"offset":1235},"end":{"line":26,"column":262,"offset":1240},"indent":[]}}],"position":{"start":{"line":26,"column":256,"offset":1234},"end":{"line":26,"column":263,"offset":1241},"indent":[]}},{"type":"text","value":" listening, there is no error and nothing else negative happens anywhere else in the system - that is, granted you ","position":{"start":{"line":26,"column":263,"offset":1241},"end":{"line":26,"column":378,"offset":1356},"indent":[]}},{"type":"inlineCode","value":"TRY","position":{"start":{"line":26,"column":378,"offset":1356},"end":{"line":26,"column":383,"offset":1361},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":26,"column":383,"offset":1361},"end":{"line":26,"column":388,"offset":1366},"indent":[]}},{"type":"inlineCode","value":"CATCH","position":{"start":{"line":26,"column":388,"offset":1366},"end":{"line":26,"column":395,"offset":1373},"indent":[]}},{"type":"text","value":" your push channel messaging properly.","position":{"start":{"line":26,"column":395,"offset":1373},"end":{"line":26,"column":433,"offset":1411},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":979},"end":{"line":26,"column":433,"offset":1411},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"So let’s get started in transaction ","position":{"start":{"line":28,"column":1,"offset":1413},"end":{"line":28,"column":37,"offset":1449},"indent":[]}},{"type":"inlineCode","value":"SAMC","position":{"start":{"line":28,"column":37,"offset":1449},"end":{"line":28,"column":43,"offset":1455},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":28,"column":43,"offset":1455},"end":{"line":28,"column":44,"offset":1456},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1413},"end":{"line":28,"column":44,"offset":1456},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"","alt":null,"position":{"start":{"line":30,"column":1,"offset":1458},"end":{"line":30,"column":6,"offset":1463},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":1458},"end":{"line":30,"column":6,"offset":1463},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We define the message channel name, and, most importantly, define what programs can use this message channel and what type of message this channel will handle (there are only 2 - numeric and string)","position":{"start":{"line":32,"column":1,"offset":1465},"end":{"line":32,"column":199,"offset":1663},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":1465},"end":{"line":32,"column":199,"offset":1663},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now, as I mention before, we use these channels to hook into any ABAP program, so that any time they are executed by anyone (or anything) in the system, the channel will be messages. A safe way to hook into an existing program (using our newly created ","position":{"start":{"line":34,"column":1,"offset":1665},"end":{"line":34,"column":253,"offset":1917},"indent":[]}},{"type":"inlineCode","value":"Z_AWESOME_CHANNEL","position":{"start":{"line":34,"column":253,"offset":1917},"end":{"line":34,"column":272,"offset":1936},"indent":[]}},{"type":"text","value":") looks as follows:","position":{"start":{"line":34,"column":272,"offset":1936},"end":{"line":34,"column":291,"offset":1955},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":1665},"end":{"line":34,"column":291,"offset":1955},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">REPORT</span> my_super_cool_existing_report\n</code></pre>\n      </div>","position":{"start":{"line":36,"column":1,"offset":1957},"end":{"line":41,"column":4,"offset":2008},"indent":[1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Creating a Push Channel","position":{"start":{"line":43,"column":4,"offset":2013},"end":{"line":43,"column":27,"offset":2036},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":2010},"end":{"line":43,"column":27,"offset":2036},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Ok, now we head to transaction ","position":{"start":{"line":45,"column":1,"offset":2038},"end":{"line":45,"column":32,"offset":2069},"indent":[]}},{"type":"inlineCode","value":"SAPC","position":{"start":{"line":45,"column":32,"offset":2069},"end":{"line":45,"column":38,"offset":2075},"indent":[]}},{"type":"text","value":" - we are no going to define a websocket that will be hooked up to our push channel. That way, when something happens in our program, it will message to all subscribed channels, which will be forwarded , and then ultimately, to the most important part, the frontend for our user to see!","position":{"start":{"line":45,"column":38,"offset":2075},"end":{"line":45,"column":324,"offset":2361},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":2038},"end":{"line":45,"column":324,"offset":2361},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Frontend","position":{"start":{"line":47,"column":4,"offset":2366},"end":{"line":47,"column":12,"offset":2374},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":2363},"end":{"line":47,"column":12,"offset":2374},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"On the frontend I create a general websocket function that creates a websocket instance. In order to have the correct service for each view, upon each view change I call this function, which always creates a new instance if there exists a websocket instance already. This way we are sure that on any view change, we have a fresh running instance of the websocket doing the correct task for this view.","position":{"start":{"line":49,"column":1,"offset":2376},"end":{"line":49,"column":401,"offset":2776},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":2376},"end":{"line":49,"column":401,"offset":2776},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"That function looks like this:","position":{"start":{"line":51,"column":1,"offset":2778},"end":{"line":51,"column":31,"offset":2808},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":2778},"end":{"line":51,"column":31,"offset":2808},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-none\"><code></code></pre>\n      </div>","position":{"start":{"line":53,"column":1,"offset":2810},"end":{"line":55,"column":4,"offset":2818},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Note that you of course have to us ","position":{"start":{"line":57,"column":1,"offset":2820},"end":{"line":57,"column":36,"offset":2855},"indent":[]}},{"type":"inlineCode","value":"ws://","position":{"start":{"line":57,"column":36,"offset":2855},"end":{"line":57,"column":43,"offset":2862},"indent":[]}},{"type":"text","value":" as the protocol in the link name!","position":{"start":{"line":57,"column":43,"offset":2862},"end":{"line":57,"column":77,"offset":2896},"indent":[]}}],"position":{"start":{"line":57,"column":1,"offset":2820},"end":{"line":57,"column":77,"offset":2896},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"On the backend, that ends up looking like a ","position":{"start":{"line":59,"column":1,"offset":2898},"end":{"line":59,"column":45,"offset":2942},"indent":[]}},{"type":"inlineCode","value":"CASE","position":{"start":{"line":59,"column":45,"offset":2942},"end":{"line":59,"column":51,"offset":2948},"indent":[]}},{"type":"text","value":" statement:","position":{"start":{"line":59,"column":51,"offset":2948},"end":{"line":59,"column":62,"offset":2959},"indent":[]}}],"position":{"start":{"line":59,"column":1,"offset":2898},"end":{"line":59,"column":62,"offset":2959},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">CASE</span>\n</code></pre>\n      </div>","position":{"start":{"line":61,"column":1,"offset":2961},"end":{"line":63,"column":4,"offset":2977},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Code","position":{"start":{"line":65,"column":4,"offset":2982},"end":{"line":65,"column":8,"offset":2986},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":2979},"end":{"line":65,"column":8,"offset":2986},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Yep, you’re going to have to write some ABAP code too. Luckily for us, when we create a push channel in transaction SAPC, SAP generates a class skeleton with 4 methods:","position":{"start":{"line":67,"column":1,"offset":2988},"end":{"line":67,"column":169,"offset":3156},"indent":[]}}],"position":{"start":{"line":67,"column":1,"offset":2988},"end":{"line":67,"column":169,"offset":3156},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"","position":{"start":{"line":69,"column":1,"offset":3158},"end":{"line":70,"column":3,"offset":3163},"indent":[1]}},{"type":"text","value":"\n","position":{"start":{"line":70,"column":3,"offset":3163},"end":{"line":71,"column":1,"offset":3164},"indent":[1]}},{"type":"inlineCode","value":"","position":{"start":{"line":71,"column":1,"offset":3164},"end":{"line":72,"column":3,"offset":3169},"indent":[1]}},{"type":"text","value":"\n","position":{"start":{"line":72,"column":3,"offset":3169},"end":{"line":73,"column":1,"offset":3170},"indent":[1]}},{"type":"inlineCode","value":"","position":{"start":{"line":73,"column":1,"offset":3170},"end":{"line":73,"column":3,"offset":3172},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":3158},"end":{"line":73,"column":3,"offset":3172},"indent":[1,1,1,1]}},{"type":"html","value":"<hr/>","position":{"start":{"line":75,"column":1,"offset":3174},"end":{"line":75,"column":6,"offset":3179},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Footnotes","position":{"start":{"line":77,"column":3,"offset":3183},"end":{"line":77,"column":12,"offset":3192},"indent":[]}}],"position":{"start":{"line":77,"column":1,"offset":3181},"end":{"line":77,"column":12,"offset":3192},"indent":[]}},{"type":"html","value":"<div id=\"footnote-1\">\n1. Note that unfortunately the SAP Web IDE does not yet support websockets, that is, without network wizardry. I haven't managed to get it to work. I've left  long ago a message with the person who was the lead on Cloud Connector asking if websocket (`ws` protocol) would eventually something to be supported, but haven't heard anything.\n</div>","position":{"start":{"line":78,"column":1,"offset":3193},"end":{"line":80,"column":7,"offset":3559},"indent":[1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":81,"column":1,"offset":3560}}}},{"id":"transformer-remark-markdown-ast-db2401cb48c509be4ca1a43a137aa659-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":{"type":"root","children":[{"type":"yaml","value":"title: An Ethereum Developer's Toolbelt\ndate: \"2017-12-30\"\ndraft: true","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":5,"column":4,"offset":78},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"This post is for developer who have at least some hands on experience writing DApps. If you are new to blockchain development, or are new to Ethereum and looking for a more technical 2017 overview of the Project, ","position":{"start":{"line":7,"column":2,"offset":81},"end":{"line":7,"column":215,"offset":294},"indent":[]}},{"type":"link","title":null,"url":"https://medium.com/@frewin.christopher/the-ethereum-project-a-high-level-review-of-the-projects-progress-status-resources-tools-4e4f88050ffa","children":[{"type":"text","value":"read my Medium article on the subject.","position":{"start":{"line":7,"column":216,"offset":295},"end":{"line":7,"column":254,"offset":333},"indent":[]}}],"position":{"start":{"line":7,"column":215,"offset":294},"end":{"line":7,"column":397,"offset":476},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":80},"end":{"line":7,"column":398,"offset":477},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":80},"end":{"line":7,"column":398,"offset":477},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Ethereum is not that old","position":{"start":{"line":9,"column":3,"offset":481},"end":{"line":9,"column":27,"offset":505},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":479},"end":{"line":9,"column":27,"offset":505},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"As such, the tools surrounding decentralized apps (DApps) and blockchain development are being created with blazing speed - it’s like 2014 (I know, so long ago, right?) when es5 came out, as well as react, webpack, and hundreds of other tools were being released.","position":{"start":{"line":11,"column":1,"offset":507},"end":{"line":11,"column":264,"offset":770},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":507},"end":{"line":11,"column":264,"offset":770},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Enter Truffle","position":{"start":{"line":13,"column":3,"offset":774},"end":{"line":13,"column":16,"offset":787},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":772},"end":{"line":13,"column":16,"offset":787},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Enter Ethermint","position":{"start":{"line":17,"column":3,"offset":793},"end":{"line":17,"column":18,"offset":808},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":791},"end":{"line":17,"column":18,"offset":808},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Truffle and Ethermint?!?!","position":{"start":{"line":19,"column":3,"offset":812},"end":{"line":19,"column":28,"offset":837},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":810},"end":{"line":19,"column":28,"offset":837},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":20,"column":1,"offset":838}}}},{"id":"transformer-remark-markdown-ast-e4e464cecd740f4966726934362ad719-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":{"type":"root","children":[{"type":"yaml","value":"title: Debugging ABAP Code with a SAP Shortcut - A Must-Have Tool!\ndate: \"2017-12-27\"\ndraft: false","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":5,"column":4,"offset":106},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"This is a Must-Have Tool for any ABAP Developer!","position":{"start":{"line":7,"column":4,"offset":111},"end":{"line":7,"column":52,"offset":159},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":108},"end":{"line":7,"column":52,"offset":159},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Did you ever find you wanted to debug something in SAP GUI right on a certain command or action, but it was in a popup? You can’t access the command line to enter ","position":{"start":{"line":8,"column":1,"offset":160},"end":{"line":8,"column":164,"offset":323},"indent":[]}},{"type":"inlineCode","value":"\\h","position":{"start":{"line":8,"column":164,"offset":323},"end":{"line":8,"column":168,"offset":327},"indent":[]}},{"type":"text","value":"! Well, now you can with this amazing SAP shortcut!","position":{"start":{"line":8,"column":168,"offset":327},"end":{"line":8,"column":219,"offset":378},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":160},"end":{"line":8,"column":219,"offset":378},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Open any text editor and add the following:","position":{"start":{"line":10,"column":1,"offset":380},"end":{"line":10,"column":44,"offset":423},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":380},"end":{"line":10,"column":44,"offset":423},"indent":[]}},{"type":"html","lang":"txt","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-txt\"><code>[System]\nName=ERP\nDescription=My company's super awesome ERP system name\nClient=100\n[User]\nName=CHRIS_IS_AWESOME\nLanguage=EN\n[Function]\nTitle=Debugging\nCommand=/h\nType=SystemCommand\n[Configuration]\nWorkDir=\\\\SomePath\\To_a_working_directory\n[Options]\nReuse=0</code></pre>\n      </div>","position":{"start":{"line":12,"column":1,"offset":425},"end":{"line":28,"column":4,"offset":693},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Note that the ","position":{"start":{"line":30,"column":1,"offset":695},"end":{"line":30,"column":15,"offset":709},"indent":[]}},{"type":"inlineCode","value":"Name","position":{"start":{"line":30,"column":15,"offset":709},"end":{"line":30,"column":21,"offset":715},"indent":[]}},{"type":"text","value":" (under ","position":{"start":{"line":30,"column":21,"offset":715},"end":{"line":30,"column":29,"offset":723},"indent":[]}},{"type":"inlineCode","value":"[System]","position":{"start":{"line":30,"column":29,"offset":723},"end":{"line":30,"column":39,"offset":733},"indent":[]}},{"type":"text","value":"), ","position":{"start":{"line":30,"column":39,"offset":733},"end":{"line":30,"column":42,"offset":736},"indent":[]}},{"type":"inlineCode","value":"Client","position":{"start":{"line":30,"column":42,"offset":736},"end":{"line":30,"column":50,"offset":744},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":30,"column":50,"offset":744},"end":{"line":30,"column":52,"offset":746},"indent":[]}},{"type":"inlineCode","value":"Name","position":{"start":{"line":30,"column":52,"offset":746},"end":{"line":30,"column":58,"offset":752},"indent":[]}},{"type":"text","value":" (under ","position":{"start":{"line":30,"column":58,"offset":752},"end":{"line":30,"column":66,"offset":760},"indent":[]}},{"type":"inlineCode","value":"[User]","position":{"start":{"line":30,"column":66,"offset":760},"end":{"line":30,"column":74,"offset":768},"indent":[]}},{"type":"text","value":"), and ","position":{"start":{"line":30,"column":74,"offset":768},"end":{"line":30,"column":81,"offset":775},"indent":[]}},{"type":"inlineCode","value":"WorkDir","position":{"start":{"line":30,"column":81,"offset":775},"end":{"line":30,"column":90,"offset":784},"indent":[]}},{"type":"text","value":" should all be set to your specific setup. (That’s why I’ve put obvious bogus names for each of them 😄 ).","position":{"start":{"line":30,"column":90,"offset":784},"end":{"line":30,"column":196,"offset":890},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":695},"end":{"line":30,"column":196,"offset":890},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"I keep a copy of mine on my desktop and in my documents directory, as ","position":{"start":{"line":32,"column":1,"offset":892},"end":{"line":32,"column":71,"offset":962},"indent":[]}},{"type":"inlineCode","value":"debugging.sap","position":{"start":{"line":32,"column":71,"offset":962},"end":{"line":32,"column":86,"offset":977},"indent":[]}},{"type":"text","value":", so it’s always close at hand.","position":{"start":{"line":32,"column":86,"offset":977},"end":{"line":32,"column":117,"offset":1008},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":892},"end":{"line":32,"column":117,"offset":1008},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Whenever you need to debug something running from a popup, just drag and drop this shortcut into the window you want to debug! (either pressing enter in a field or pressing a button to continue the process in the GUI.)","position":{"start":{"line":34,"column":1,"offset":1010},"end":{"line":34,"column":219,"offset":1228},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":1010},"end":{"line":34,"column":219,"offset":1228},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"*","position":{"start":{"line":36,"column":1,"offset":1230},"end":{"line":36,"column":3,"offset":1232},"indent":[]}},{"type":"text","value":"*","position":{"start":{"line":36,"column":3,"offset":1232},"end":{"line":36,"column":5,"offset":1234},"indent":[]}},{"type":"text","value":"*","position":{"start":{"line":36,"column":5,"offset":1234},"end":{"line":36,"column":7,"offset":1236},"indent":[]}},{"type":"text","value":" Common gotchya: Things like pressing F4 or clicking the entry help button on any fields will also bring up the debugger after you have dragged and dropped this GUI shortcut - so, make sure you press the button/do the action of exactly what you want to debug!","position":{"start":{"line":36,"column":7,"offset":1236},"end":{"line":36,"column":266,"offset":1495},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":1230},"end":{"line":36,"column":266,"offset":1495},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":37,"column":1,"offset":1496}}}},{"id":"transformer-remark-markdown-ast-4b1e4944f3a43edb376da780da95811b-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":{"type":"root","children":[{"type":"yaml","value":"title: Dropdowns in Markdown README's!\ndate: \"2017-12-22\"\ndraft: false","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":5,"column":4,"offset":78},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"HTML in Markdown!?","position":{"start":{"line":7,"column":4,"offset":83},"end":{"line":7,"column":22,"offset":101},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":80},"end":{"line":7,"column":22,"offset":101},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Well, it’s a little known fact (at least it was for me) that you can use native HTML tags are supported in Markdown, though the support over different sites is varying. I would say the code presented here should work on about 99% of pages - let me know if that’s not the case","position":{"start":{"line":8,"column":1,"offset":102},"end":{"line":8,"column":276,"offset":377},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":102},"end":{"line":8,"column":276,"offset":377},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Code","position":{"start":{"line":10,"column":4,"offset":382},"end":{"line":10,"column":8,"offset":386},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":379},"end":{"line":10,"column":8,"offset":386},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To get this to work in most environments","position":{"start":{"line":11,"column":1,"offset":387},"end":{"line":11,"column":41,"offset":427},"indent":[]}},{"type":"html","value":"<sup>","position":{"start":{"line":11,"column":41,"offset":427},"end":{"line":11,"column":46,"offset":432},"indent":[]}},{"type":"text","value":"1","position":{"start":{"line":11,"column":46,"offset":432},"end":{"line":11,"column":47,"offset":433},"indent":[]}},{"type":"html","value":"</sup>","position":{"start":{"line":11,"column":47,"offset":433},"end":{"line":11,"column":53,"offset":439},"indent":[]}},{"type":"text","value":" all we have to do is to make use of the ","position":{"start":{"line":11,"column":53,"offset":439},"end":{"line":11,"column":94,"offset":480},"indent":[]}},{"type":"inlineCode","value":"<details>","position":{"start":{"line":11,"column":94,"offset":480},"end":{"line":11,"column":105,"offset":491},"indent":[]}},{"type":"text","value":" tag. Since you probably want your dropdown to have a title, we also need to use the ","position":{"start":{"line":11,"column":105,"offset":491},"end":{"line":11,"column":190,"offset":576},"indent":[]}},{"type":"inlineCode","value":"<summary>","position":{"start":{"line":11,"column":190,"offset":576},"end":{"line":11,"column":201,"offset":587},"indent":[]}},{"type":"text","value":" tag. So a cool markdown dropdown could look as simple as this:","position":{"start":{"line":11,"column":201,"offset":587},"end":{"line":11,"column":264,"offset":650},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":387},"end":{"line":11,"column":264,"offset":650},"indent":[]}},{"type":"html","lang":"markdown","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-markdown\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>details</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>summary</span><span class=\"token punctuation\">></span></span>Cool Dropdown<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>summary</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\nblah blah blah blah you found me!\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>details</span><span class=\"token punctuation\">></span></span>\n</code></pre>\n      </div>","position":{"start":{"line":13,"column":1,"offset":652},"end":{"line":17,"column":4,"offset":758},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Or, rendered (go on and give the arrow a click!):","position":{"start":{"line":19,"column":1,"offset":760},"end":{"line":19,"column":50,"offset":809},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":760},"end":{"line":19,"column":50,"offset":809},"indent":[]}},{"type":"html","value":"<details><summary>Cool Dropdown</summary><br>\nblah blah blah blah you found me!\n</details>","position":{"start":{"line":20,"column":1,"offset":810},"end":{"line":22,"column":11,"offset":900},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Of course, all goodies of markdown will work inside of this dropdown - lists, links, etc.","position":{"start":{"line":24,"column":1,"offset":902},"end":{"line":24,"column":90,"offset":991},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":902},"end":{"line":24,"column":90,"offset":991},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Longer Example","position":{"start":{"line":26,"column":4,"offset":996},"end":{"line":26,"column":18,"offset":1010},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":993},"end":{"line":26,"column":18,"offset":1010},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Here’s a bigger example for your copypasta pleasure:","position":{"start":{"line":27,"column":1,"offset":1011},"end":{"line":27,"column":53,"offset":1063},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1011},"end":{"line":27,"column":53,"offset":1063},"indent":[]}},{"type":"html","lang":"markdown","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-markdown\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>details</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>summary</span><span class=\"token punctuation\">></span></span>Cool Dropdown #1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>summary</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n\n```js\n// so wow, much amazing... you can even put code in these drop downs!\ndocument.getElementById('root')\n```s\n\n<span class=\"token url\">[Or a link - like to google](https://google.com)</span>\n\n<span class=\"token list punctuation\">-</span> Or a List\n  <span class=\"token list punctuation\">-</span> or a nested List\n  <span class=\"token list punctuation\">-</span> like this\n  <span class=\"token list punctuation\">-</span> with 😄 emojis\n<span class=\"token list punctuation\">-</span> Like this\n\nOr even just normal text\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>details</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>details</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>summary</span><span class=\"token punctuation\">></span></span>Cool Dropdown #2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>summary</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n\nMore cool text hiding in my dropdown\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>details</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>details</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>summary</span><span class=\"token punctuation\">></span></span>Cool Dropdown #3<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>summary</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n\nEaster egg! 🥚🥚🥚\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>details</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n</code></pre>\n      </div>","position":{"start":{"line":28,"column":1,"offset":1064},"end":{"line":61,"column":4,"offset":1600},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Rendered on this page, that snippet looks like this:","position":{"start":{"line":63,"column":1,"offset":1602},"end":{"line":63,"column":53,"offset":1654},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":1602},"end":{"line":63,"column":53,"offset":1654},"indent":[]}},{"type":"html","value":"<p>\n<details><summary>Cool Dropdown #1</summary><br>","position":{"start":{"line":65,"column":1,"offset":1656},"end":{"line":66,"column":49,"offset":1708},"indent":[1]}},{"type":"html","lang":"js","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-js\"><code><span class=\"token comment\">// so wow, much amazing... you can even put code in these drop downs!</span>\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span>\n</code></pre>\n      </div>","position":{"start":{"line":68,"column":1,"offset":1710},"end":{"line":71,"column":4,"offset":1821},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://google.com","children":[{"type":"text","value":"Or a link - like to google","position":{"start":{"line":73,"column":2,"offset":1824},"end":{"line":73,"column":28,"offset":1850},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":1823},"end":{"line":73,"column":49,"offset":1871},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":1823},"end":{"line":73,"column":49,"offset":1871},"indent":[]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Or a List","position":{"start":{"line":75,"column":3,"offset":1875},"end":{"line":75,"column":12,"offset":1884},"indent":[]}}],"position":{"start":{"line":75,"column":3,"offset":1875},"end":{"line":75,"column":12,"offset":1884},"indent":[]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"or a nested List","position":{"start":{"line":76,"column":5,"offset":1889},"end":{"line":76,"column":21,"offset":1905},"indent":[]}}],"position":{"start":{"line":76,"column":5,"offset":1889},"end":{"line":76,"column":21,"offset":1905},"indent":[]}}],"position":{"start":{"line":76,"column":3,"offset":1887},"end":{"line":76,"column":21,"offset":1905},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"like this","position":{"start":{"line":77,"column":5,"offset":1910},"end":{"line":77,"column":14,"offset":1919},"indent":[]}}],"position":{"start":{"line":77,"column":5,"offset":1910},"end":{"line":77,"column":14,"offset":1919},"indent":[]}}],"position":{"start":{"line":77,"column":3,"offset":1908},"end":{"line":77,"column":14,"offset":1919},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"with 😄 emojis","position":{"start":{"line":78,"column":5,"offset":1924},"end":{"line":78,"column":19,"offset":1938},"indent":[]}}],"position":{"start":{"line":78,"column":5,"offset":1924},"end":{"line":78,"column":19,"offset":1938},"indent":[]}}],"position":{"start":{"line":78,"column":3,"offset":1922},"end":{"line":78,"column":19,"offset":1938},"indent":[]}}],"position":{"start":{"line":76,"column":3,"offset":1887},"end":{"line":78,"column":19,"offset":1938},"indent":[3,3]}}],"position":{"start":{"line":75,"column":1,"offset":1873},"end":{"line":78,"column":19,"offset":1938},"indent":[1,1,1]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Like this","position":{"start":{"line":79,"column":3,"offset":1941},"end":{"line":79,"column":12,"offset":1950},"indent":[]}}],"position":{"start":{"line":79,"column":3,"offset":1941},"end":{"line":79,"column":12,"offset":1950},"indent":[]}}],"position":{"start":{"line":79,"column":1,"offset":1939},"end":{"line":79,"column":12,"offset":1950},"indent":[]}}],"position":{"start":{"line":75,"column":1,"offset":1873},"end":{"line":79,"column":12,"offset":1950},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Or even just normal text","position":{"start":{"line":81,"column":1,"offset":1952},"end":{"line":81,"column":25,"offset":1976},"indent":[]}}],"position":{"start":{"line":81,"column":1,"offset":1952},"end":{"line":81,"column":25,"offset":1976},"indent":[]}},{"type":"html","value":"</details>","position":{"start":{"line":83,"column":1,"offset":1978},"end":{"line":83,"column":11,"offset":1988},"indent":[]}},{"type":"html","value":"<details><summary>Cool Dropdown #2</summary><br>","position":{"start":{"line":85,"column":1,"offset":1990},"end":{"line":85,"column":49,"offset":2038},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"More cool text hiding in my dropdown","position":{"start":{"line":87,"column":1,"offset":2040},"end":{"line":87,"column":37,"offset":2076},"indent":[]}}],"position":{"start":{"line":87,"column":1,"offset":2040},"end":{"line":87,"column":37,"offset":2076},"indent":[]}},{"type":"html","value":"</details>","position":{"start":{"line":89,"column":1,"offset":2078},"end":{"line":89,"column":11,"offset":2088},"indent":[]}},{"type":"html","value":"<details><summary>Cool Dropdown #3</summary><br>","position":{"start":{"line":91,"column":1,"offset":2090},"end":{"line":91,"column":49,"offset":2138},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Easter egg! 🥚🥚🥚","position":{"start":{"line":93,"column":1,"offset":2140},"end":{"line":93,"column":19,"offset":2158},"indent":[]}}],"position":{"start":{"line":93,"column":1,"offset":2140},"end":{"line":93,"column":19,"offset":2158},"indent":[]}},{"type":"html","value":"</details>\n</p>\n```","position":{"start":{"line":95,"column":1,"offset":2160},"end":{"line":97,"column":4,"offset":2179},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Most Important - Use It!","position":{"start":{"line":99,"column":4,"offset":2184},"end":{"line":99,"column":28,"offset":2208},"indent":[]}}],"position":{"start":{"line":99,"column":1,"offset":2181},"end":{"line":99,"column":28,"offset":2208},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"I for one am going to start using this in my README’s. After all, it is the first page a lot of developers and users see, so using these dropdowns would be a nice simple way to keep your README uncluttered and organized - the communitiy at large will benefit and thank you for piece-wise docs.","position":{"start":{"line":101,"column":1,"offset":2210},"end":{"line":101,"column":294,"offset":2503},"indent":[]}}],"position":{"start":{"line":101,"column":1,"offset":2210},"end":{"line":101,"column":294,"offset":2503},"indent":[]}},{"type":"html","value":"<hr/>","position":{"start":{"line":103,"column":1,"offset":2505},"end":{"line":103,"column":6,"offset":2510},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Footnotes","position":{"start":{"line":105,"column":4,"offset":2515},"end":{"line":105,"column":13,"offset":2524},"indent":[]}}],"position":{"start":{"line":105,"column":1,"offset":2512},"end":{"line":105,"column":13,"offset":2524},"indent":[]}},{"type":"list","ordered":true,"start":1,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"This page you are looking at right now is generated with Gatsby (which generates React HTML from markdown), and I know these dropdowns work on the Markdown of GitHub too.","position":{"start":{"line":106,"column":4,"offset":2528},"end":{"line":106,"column":174,"offset":2698},"indent":[]}}],"position":{"start":{"line":106,"column":4,"offset":2528},"end":{"line":106,"column":174,"offset":2698},"indent":[]}}],"position":{"start":{"line":106,"column":1,"offset":2525},"end":{"line":106,"column":174,"offset":2698},"indent":[]}}],"position":{"start":{"line":106,"column":1,"offset":2525},"end":{"line":106,"column":174,"offset":2698},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":107,"column":1,"offset":2699}}}},{"id":"transformer-remark-markdown-ast-1ce98b38739c2343ab453c0708f858e1-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":{"type":"root","children":[{"type":"yaml","value":"title: How to Link to Lines of Code in a Github Repository!\ndate: \"2017-12-19\"\ndraft: false","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":5,"column":4,"offset":99},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This’ll be a real short one; I just learned you can link to specific lines of code on GitHub!","position":{"start":{"line":7,"column":1,"offset":101},"end":{"line":7,"column":94,"offset":194},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":101},"end":{"line":7,"column":94,"offset":194},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"All you need to do is find your link to the source code preview (","position":{"start":{"line":9,"column":1,"offset":196},"end":{"line":9,"column":66,"offset":261},"indent":[]}},{"type":"text","value":"*","position":{"start":{"line":9,"column":66,"offset":261},"end":{"line":9,"column":68,"offset":263},"indent":[]}},{"type":"text","value":"*","position":{"start":{"line":9,"column":68,"offset":263},"end":{"line":9,"column":70,"offset":265},"indent":[]}},{"type":"text","value":"*","position":{"start":{"line":9,"column":70,"offset":265},"end":{"line":9,"column":72,"offset":267},"indent":[]}},{"type":"text","value":"NOTE: ","position":{"start":{"line":9,"column":72,"offset":267},"end":{"line":9,"column":78,"offset":273},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"not","position":{"start":{"line":9,"column":79,"offset":274},"end":{"line":9,"column":82,"offset":277},"indent":[]}}],"position":{"start":{"line":9,"column":78,"offset":273},"end":{"line":9,"column":83,"offset":278},"indent":[]}},{"type":"text","value":" the raw view!) as an example, let’s look at a source file from Bitcoin repository*:","position":{"start":{"line":9,"column":83,"offset":278},"end":{"line":9,"column":167,"offset":362},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":196},"end":{"line":9,"column":167,"offset":362},"indent":[]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://github.com/bitcoin/bitcoin/blob/c24337964f2d0500975abb4ef55c324daaf349b6/src/main.cpp","children":[{"type":"text","value":"https://github.com/bitcoin/bitcoin/blob/c24337964f2d0500975abb4ef55c324daaf349b6/src/main.cpp","position":{"start":{"line":11,"column":1,"offset":364},"end":{"line":11,"column":94,"offset":457},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":364},"end":{"line":11,"column":94,"offset":457},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":364},"end":{"line":11,"column":94,"offset":457},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Let’s say I want to highlight line 123. All you have to do is add a ‘#L’ and the line number you want, so let’s add #L123:","position":{"start":{"line":13,"column":1,"offset":459},"end":{"line":13,"column":123,"offset":581},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":459},"end":{"line":13,"column":123,"offset":581},"indent":[]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://github.com/bitcoin/bitcoin/blob/c24337964f2d0500975abb4ef55c324daaf349b6/src/main.cpp#L123","children":[{"type":"text","value":"https://github.com/bitcoin/bitcoin/blob/c24337964f2d0500975abb4ef55c324daaf349b6/src/main.cpp#L123","position":{"start":{"line":15,"column":2,"offset":584},"end":{"line":15,"column":100,"offset":682},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":583},"end":{"line":15,"column":201,"offset":783},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":583},"end":{"line":15,"column":201,"offset":783},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Go on. Give it a click. You know you want to! You’ll see your browser jumps down and highlights that line.","position":{"start":{"line":17,"column":1,"offset":785},"end":{"line":17,"column":107,"offset":891},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":785},"end":{"line":17,"column":107,"offset":891},"indent":[]}},{"type":"html","value":"<hr/>","position":{"start":{"line":19,"column":1,"offset":893},"end":{"line":19,"column":6,"offset":898},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"*","position":{"start":{"line":21,"column":1,"offset":900},"end":{"line":21,"column":3,"offset":902},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":21,"column":3,"offset":902},"end":{"line":21,"column":4,"offset":903},"indent":[]}},{"type":"inlineCode","value":"main.cpp","position":{"start":{"line":21,"column":4,"offset":903},"end":{"line":21,"column":14,"offset":913},"indent":[]}},{"type":"text","value":" doesn’t exist anymore in the current codebase; it has been reorganized into various other parts of the code, but as an example ","position":{"start":{"line":21,"column":14,"offset":913},"end":{"line":21,"column":142,"offset":1041},"indent":[]}},{"type":"inlineCode","value":"main.cpp","position":{"start":{"line":21,"column":142,"offset":1041},"end":{"line":21,"column":152,"offset":1051},"indent":[]}},{"type":"text","value":" is an attractive file name 😄.","position":{"start":{"line":21,"column":152,"offset":1051},"end":{"line":21,"column":183,"offset":1082},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":900},"end":{"line":21,"column":183,"offset":1082},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":22,"column":1,"offset":1083}}}},{"id":"transformer-remark-markdown-ast-c9b3bde2b7b63bef1a3680dc64b34d54-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":{"type":"root","children":[{"type":"yaml","value":"title: My First and Final Statement on Bitcoin for this Blog\ndate: \"2017-12-18\"\ndraft: false","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":5,"column":4,"offset":100},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Lots of words have been thrown around Bitcoin recently. Tulip Madness. Silk Road. Ponzi Scheme. While this blog will (rest assured) remain about software development and programming, I had to give my final say (barring whatever crap I may spew on reddit from time to time 😄) SOMEWHERE about Bitcoin. I decided that somewhere was here.","position":{"start":{"line":7,"column":1,"offset":102},"end":{"line":7,"column":336,"offset":437},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":102},"end":{"line":7,"column":336,"offset":437},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"My Promise to You","position":{"start":{"line":9,"column":3,"offset":441},"end":{"line":9,"column":20,"offset":458},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":439},"end":{"line":9,"column":20,"offset":458},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Let me promise you, I won’t post about Bitcoin speculation on this blog ever again. (At least in relation to any sort of price speculation, maybe one day later I will post on some tech stuff)","position":{"start":{"line":11,"column":1,"offset":460},"end":{"line":11,"column":192,"offset":651},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":460},"end":{"line":11,"column":192,"offset":651},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"The Numbers","position":{"start":{"line":13,"column":3,"offset":655},"end":{"line":13,"column":14,"offset":666},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":653},"end":{"line":13,"column":14,"offset":666},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The most basic key economics of Bitcoin for determining it’s price are: 1. there will only be 21 million of them, and 2. The demand for the holy coin is ever increasing, and at least all of 2018, it looks as though that trend will hold. As long as these two key economic ingredients hold true (the 21 million I am 100% sure of, it’s ","position":{"start":{"line":15,"column":1,"offset":668},"end":{"line":15,"column":334,"offset":1001},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/bitcoin/bitcoin/blob/c24337964f2d0500975abb4ef55c324daaf349b6/src/main.cpp#L1361","children":[{"type":"text","value":"baked intp Bitcoin’s code","position":{"start":{"line":15,"column":335,"offset":1002},"end":{"line":15,"column":360,"offset":1027},"indent":[]}}],"position":{"start":{"line":15,"column":334,"offset":1001},"end":{"line":15,"column":462,"offset":1129},"indent":[]}},{"type":"text","value":"), the inarguable bottom line is that the price will go up, no exceptions. We don’t even need any technical analysis! There are millions of examples throughout history: something with a limited supply and increasing demand, the “things” price goes up. No exceptions.","position":{"start":{"line":15,"column":462,"offset":1129},"end":{"line":15,"column":728,"offset":1395},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":668},"end":{"line":15,"column":728,"offset":1395},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"First to Market","position":{"start":{"line":17,"column":3,"offset":1399},"end":{"line":17,"column":18,"offset":1414},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":1397},"end":{"line":17,"column":18,"offset":1414},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"It’s important to remember, Bitcoin was the first of its kind (certainly not the best - many improvements in other coins and blockchain protocols exist - more on that below), Bitcoin has both the largest ","position":{"start":{"line":18,"column":1,"offset":1415},"end":{"line":18,"column":205,"offset":1619},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"and","position":{"start":{"line":18,"column":206,"offset":1620},"end":{"line":18,"column":209,"offset":1623},"indent":[]}}],"position":{"start":{"line":18,"column":205,"offset":1619},"end":{"line":18,"column":210,"offset":1624},"indent":[]}},{"type":"text","value":" majority of the market caps among all the other cryptocurrencies. (Edit: December 19th! Bitcoin dipped just below 49.9% market capitilization in crypto! ","position":{"start":{"line":18,"column":210,"offset":1624},"end":{"line":18,"column":364,"offset":1778},"indent":[]}},{"type":"link","title":null,"url":"frewinchristopher.github.io/markcap","children":[{"type":"text","value":"I built a small bookmarklet called MarkCap","position":{"start":{"line":18,"column":365,"offset":1779},"end":{"line":18,"column":407,"offset":1821},"indent":[]}}],"position":{"start":{"line":18,"column":364,"offset":1778},"end":{"line":18,"column":445,"offset":1859},"indent":[]}},{"type":"text","value":" for ","position":{"start":{"line":18,"column":445,"offset":1859},"end":{"line":18,"column":450,"offset":1864},"indent":[]}},{"type":"link","title":null,"url":"coinmarketcap.com","children":[{"type":"text","value":"coinmarketcap.com","position":{"start":{"line":18,"column":451,"offset":1865},"end":{"line":18,"column":468,"offset":1882},"indent":[]}}],"position":{"start":{"line":18,"column":450,"offset":1864},"end":{"line":18,"column":488,"offset":1902},"indent":[]}},{"type":"text","value":" that puts the percent market cap next to the market cap number.)","position":{"start":{"line":18,"column":488,"offset":1902},"end":{"line":18,"column":553,"offset":1967},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1415},"end":{"line":18,"column":553,"offset":1967},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./bitcoincomic.jpg","alt":"\"We'll give up the hostages if you send us 10000 Bitcoin!\" \"10000 Bitcoin? Does he think this is 2017? There's no single entity left in the world with that much!\"","position":{"start":{"line":20,"column":1,"offset":1969},"end":{"line":20,"column":186,"offset":2154},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1969},"end":{"line":20,"column":186,"offset":2154},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A comic I thought up about Bitcoin  😂😂😂 (","position":{"start":{"line":22,"column":1,"offset":2156},"end":{"line":22,"column":45,"offset":2200},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"comic is still not done, but it will show up here soon","position":{"start":{"line":22,"column":46,"offset":2201},"end":{"line":22,"column":100,"offset":2255},"indent":[]}}],"position":{"start":{"line":22,"column":45,"offset":2200},"end":{"line":22,"column":101,"offset":2256},"indent":[]}},{"type":"text","value":").","position":{"start":{"line":22,"column":101,"offset":2256},"end":{"line":22,"column":103,"offset":2258},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":2156},"end":{"line":22,"column":103,"offset":2258},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"As cash flows from standard gold to Bitcoin, the market cap could approach the ","position":{"start":{"line":24,"column":1,"offset":2260},"end":{"line":24,"column":80,"offset":2339},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"trillions","position":{"start":{"line":24,"column":81,"offset":2340},"end":{"line":24,"column":90,"offset":2349},"indent":[]}}],"position":{"start":{"line":24,"column":80,"offset":2339},"end":{"line":24,"column":91,"offset":2350},"indent":[]}},{"type":"text","value":" range. With that order of magnitude of market cap, 1 Bitcoin would have:","position":{"start":{"line":24,"column":91,"offset":2350},"end":{"line":24,"column":164,"offset":2423},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":2260},"end":{"line":24,"column":164,"offset":2423},"indent":[]}},{"type":"table","align":[null,null],"children":[{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Market Capitalization","position":{"start":{"line":26,"column":3,"offset":2427},"end":{"line":26,"column":24,"offset":2448},"indent":[]}}],"position":{"start":{"line":26,"column":3,"offset":2427},"end":{"line":26,"column":24,"offset":2448},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Bitcoin price*","position":{"start":{"line":26,"column":27,"offset":2451},"end":{"line":26,"column":41,"offset":2465},"indent":[]}}],"position":{"start":{"line":26,"column":27,"offset":2451},"end":{"line":26,"column":41,"offset":2465},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":2425},"end":{"line":26,"column":43,"offset":2467},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"1 Trillion","position":{"start":{"line":28,"column":3,"offset":2513},"end":{"line":28,"column":13,"offset":2523},"indent":[]}}],"position":{"start":{"line":28,"column":3,"offset":2513},"end":{"line":28,"column":13,"offset":2523},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"~$55,500","position":{"start":{"line":28,"column":16,"offset":2526},"end":{"line":28,"column":24,"offset":2534},"indent":[]}}],"position":{"start":{"line":28,"column":16,"offset":2526},"end":{"line":28,"column":24,"offset":2534},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":2511},"end":{"line":28,"column":26,"offset":2536},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"2 Trillion","position":{"start":{"line":29,"column":3,"offset":2539},"end":{"line":29,"column":13,"offset":2549},"indent":[]}}],"position":{"start":{"line":29,"column":3,"offset":2539},"end":{"line":29,"column":13,"offset":2549},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"~$111,000","position":{"start":{"line":29,"column":16,"offset":2552},"end":{"line":29,"column":25,"offset":2561},"indent":[]}}],"position":{"start":{"line":29,"column":16,"offset":2552},"end":{"line":29,"column":25,"offset":2561},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":2537},"end":{"line":29,"column":27,"offset":2563},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"3 Trillion","position":{"start":{"line":30,"column":3,"offset":2566},"end":{"line":30,"column":13,"offset":2576},"indent":[]}}],"position":{"start":{"line":30,"column":3,"offset":2566},"end":{"line":30,"column":13,"offset":2576},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"~$167,000","position":{"start":{"line":30,"column":16,"offset":2579},"end":{"line":30,"column":25,"offset":2588},"indent":[]}}],"position":{"start":{"line":30,"column":16,"offset":2579},"end":{"line":30,"column":25,"offset":2588},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":2564},"end":{"line":30,"column":27,"offset":2590},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"…","position":{"start":{"line":31,"column":3,"offset":2593},"end":{"line":31,"column":6,"offset":2596},"indent":[]}}],"position":{"start":{"line":31,"column":3,"offset":2593},"end":{"line":31,"column":6,"offset":2596},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"…","position":{"start":{"line":31,"column":9,"offset":2599},"end":{"line":31,"column":12,"offset":2602},"indent":[]}}],"position":{"start":{"line":31,"column":9,"offset":2599},"end":{"line":31,"column":12,"offset":2602},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":2591},"end":{"line":31,"column":14,"offset":2604},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"7 Trillion (market cap of gold)","position":{"start":{"line":32,"column":3,"offset":2607},"end":{"line":32,"column":34,"offset":2638},"indent":[]}}],"position":{"start":{"line":32,"column":3,"offset":2607},"end":{"line":32,"column":34,"offset":2638},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"~$389,000","position":{"start":{"line":32,"column":37,"offset":2641},"end":{"line":32,"column":46,"offset":2650},"indent":[]}}],"position":{"start":{"line":32,"column":37,"offset":2641},"end":{"line":32,"column":46,"offset":2650},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":2605},"end":{"line":32,"column":48,"offset":2652},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":2425},"end":{"line":32,"column":48,"offset":2652},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"*","position":{"start":{"line":34,"column":1,"offset":2654},"end":{"line":34,"column":3,"offset":2656},"indent":[]}},{"type":"text","value":"(assuming around 18 million Bitcoins - currently 16.7 as of writing this entry - it’s accurate enough as of this posting in late 2017; the 18th millionth Bitcoin isn’t expected to be mined until October 9th, 2019 - check out ","position":{"start":{"line":34,"column":3,"offset":2656},"end":{"line":34,"column":228,"offset":2881},"indent":[]}},{"type":"link","title":null,"url":"https://medium.com/@frewin.christopher/the-bitcoin-mining-schedule-from-december-18-2017-to-june-8-2020-407db59e69f4","children":[{"type":"text","value":"my post on medium about the mining schedule until the next halving","position":{"start":{"line":34,"column":229,"offset":2882},"end":{"line":34,"column":295,"offset":2948},"indent":[]}}],"position":{"start":{"line":34,"column":228,"offset":2881},"end":{"line":34,"column":414,"offset":3067},"indent":[]}},{"type":"text","value":")","position":{"start":{"line":34,"column":414,"offset":3067},"end":{"line":34,"column":415,"offset":3068},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":2654},"end":{"line":34,"column":415,"offset":3068},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"I predict:","position":{"start":{"line":36,"column":1,"offset":3070},"end":{"line":36,"column":11,"offset":3080},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":3070},"end":{"line":36,"column":11,"offset":3080},"indent":[]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"$20,000 by January 1st 2018 (update: we already made it for a short period of time on December 17th!)","position":{"start":{"line":38,"column":3,"offset":3084},"end":{"line":38,"column":104,"offset":3185},"indent":[]}}],"position":{"start":{"line":38,"column":3,"offset":3084},"end":{"line":38,"column":104,"offset":3185},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":3082},"end":{"line":38,"column":104,"offset":3185},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"$50,000 by end of Q2 2018 (i.e. end of June 2018)","position":{"start":{"line":39,"column":3,"offset":3188},"end":{"line":39,"column":52,"offset":3237},"indent":[]}}],"position":{"start":{"line":39,"column":3,"offset":3188},"end":{"line":39,"column":52,"offset":3237},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":3186},"end":{"line":39,"column":52,"offset":3237},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"$100,000 by end of Q4 2018 (i.e. end of December 2018)","position":{"start":{"line":40,"column":3,"offset":3240},"end":{"line":40,"column":57,"offset":3294},"indent":[]}}],"position":{"start":{"line":40,"column":3,"offset":3240},"end":{"line":40,"column":57,"offset":3294},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":3238},"end":{"line":40,"column":57,"offset":3294},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":3082},"end":{"line":40,"column":57,"offset":3294},"indent":[1,1]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"But… 5 Years Out? 10 Years?","position":{"start":{"line":42,"column":3,"offset":3298},"end":{"line":42,"column":32,"offset":3327},"indent":[]}}],"position":{"start":{"line":42,"column":1,"offset":3296},"end":{"line":42,"column":32,"offset":3327},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"So I have a somewhat non-average view of Bitcoin in the long run (5-10 year) time range (yes, things like ","position":{"start":{"line":44,"column":1,"offset":3329},"end":{"line":44,"column":107,"offset":3435},"indent":[]}},{"type":"link","title":null,"url":"http://blog.flippening.watch/what-is-the-flippening/","children":[{"type":"text","value":"THE FLIPPENING","position":{"start":{"line":44,"column":108,"offset":3436},"end":{"line":44,"column":122,"offset":3450},"indent":[]}}],"position":{"start":{"line":44,"column":107,"offset":3435},"end":{"line":44,"column":177,"offset":3505},"indent":[]}},{"type":"text","value":" I think could happen). The world is still getting used to cryptocurrency. However, as soon as that honeymoon period is ","position":{"start":{"line":44,"column":177,"offset":3505},"end":{"line":44,"column":297,"offset":3625},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"over","position":{"start":{"line":44,"column":298,"offset":3626},"end":{"line":44,"column":302,"offset":3630},"indent":[]}}],"position":{"start":{"line":44,"column":297,"offset":3625},"end":{"line":44,"column":303,"offset":3631},"indent":[]}},{"type":"text","value":", the world should (not as it always does, I know), realize a few things:","position":{"start":{"line":44,"column":303,"offset":3631},"end":{"line":44,"column":376,"offset":3704},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":3329},"end":{"line":44,"column":376,"offset":3704},"indent":[]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Bitcoin, while first to the cryptocurrency market, is undoubtedly ","position":{"start":{"line":46,"column":3,"offset":3708},"end":{"line":46,"column":69,"offset":3774},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"not","position":{"start":{"line":46,"column":70,"offset":3775},"end":{"line":46,"column":73,"offset":3778},"indent":[]}}],"position":{"start":{"line":46,"column":69,"offset":3774},"end":{"line":46,"column":74,"offset":3779},"indent":[]}},{"type":"text","value":" the best cryptocurrency on the market. Even as I write this post, transaction times are stacking up, and a single transaction costs over $3. And what happens to the miners once mining stop? ","position":{"start":{"line":46,"column":74,"offset":3779},"end":{"line":46,"column":265,"offset":3970},"indent":[]}},{"type":"link","title":null,"url":"https://news.bitcoin.com/what-happens-bitcoin-miners-all-coins-mined/","children":[{"type":"text","value":"That’s still a question where I’m not totally satisfied what some of the answers are.","position":{"start":{"line":46,"column":266,"offset":3971},"end":{"line":46,"column":351,"offset":4056},"indent":[]}}],"position":{"start":{"line":46,"column":265,"offset":3970},"end":{"line":46,"column":423,"offset":4128},"indent":[]}}],"position":{"start":{"line":46,"column":3,"offset":3708},"end":{"line":46,"column":423,"offset":4128},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":3706},"end":{"line":46,"column":423,"offset":4128},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Litecoin is a copy of (suprised? look at this ","position":{"start":{"line":47,"column":3,"offset":4131},"end":{"line":47,"column":49,"offset":4177},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/litecoin-project/litecoin/commit/4405b78d6059e536c36974088a8ed4d9f0f29898","children":[{"type":"text","value":"fork to litecoin from the bitcoin repository by Charlie Lee, the founder of Litecoin","position":{"start":{"line":47,"column":50,"offset":4178},"end":{"line":47,"column":134,"offset":4262},"indent":[]}}],"position":{"start":{"line":47,"column":49,"offset":4177},"end":{"line":47,"column":229,"offset":4357},"indent":[]}},{"type":"text","value":") sorry, but I don’t see much innovation there","position":{"start":{"line":47,"column":229,"offset":4357},"end":{"line":47,"column":275,"offset":4403},"indent":[]}}],"position":{"start":{"line":47,"column":3,"offset":4131},"end":{"line":47,"column":275,"offset":4403},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":4129},"end":{"line":47,"column":275,"offset":4403},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Other blockchain technologies, like Ethereum, Cosmos, and many more (I have a few personal favorites) have numerous advantages, not limited to:","position":{"start":{"line":48,"column":3,"offset":4406},"end":{"line":48,"column":146,"offset":4549},"indent":[]}}],"position":{"start":{"line":48,"column":3,"offset":4406},"end":{"line":48,"column":146,"offset":4549},"indent":[]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"a much larger development team","position":{"start":{"line":49,"column":5,"offset":4554},"end":{"line":49,"column":35,"offset":4584},"indent":[]}}],"position":{"start":{"line":49,"column":5,"offset":4554},"end":{"line":49,"column":35,"offset":4584},"indent":[]}}],"position":{"start":{"line":49,"column":3,"offset":4552},"end":{"line":49,"column":35,"offset":4584},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"a much stronger and active code base","position":{"start":{"line":50,"column":5,"offset":4589},"end":{"line":50,"column":41,"offset":4625},"indent":[]}}],"position":{"start":{"line":50,"column":5,"offset":4589},"end":{"line":50,"column":41,"offset":4625},"indent":[]}}],"position":{"start":{"line":50,"column":3,"offset":4587},"end":{"line":50,"column":41,"offset":4625},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"MUCH faster transaction times (Ether, the next closes coin in market cap, processes about ","position":{"start":{"line":51,"column":5,"offset":4630},"end":{"line":51,"column":95,"offset":4720},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"2.5x","position":{"start":{"line":51,"column":96,"offset":4721},"end":{"line":51,"column":100,"offset":4725},"indent":[]}}],"position":{"start":{"line":51,"column":95,"offset":4720},"end":{"line":51,"column":101,"offset":4726},"indent":[]}},{"type":"text","value":" as many transactions as Bitcoin per day)","position":{"start":{"line":51,"column":101,"offset":4726},"end":{"line":51,"column":142,"offset":4767},"indent":[]}}],"position":{"start":{"line":51,"column":5,"offset":4630},"end":{"line":51,"column":142,"offset":4767},"indent":[]}}],"position":{"start":{"line":51,"column":3,"offset":4628},"end":{"line":51,"column":142,"offset":4767},"indent":[]}}],"position":{"start":{"line":49,"column":3,"offset":4552},"end":{"line":51,"column":142,"offset":4767},"indent":[3,3]}}],"position":{"start":{"line":48,"column":1,"offset":4404},"end":{"line":51,"column":142,"offset":4767},"indent":[1,1,1]}}],"position":{"start":{"line":46,"column":1,"offset":3706},"end":{"line":51,"column":142,"offset":4767},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Once these aspects of the market are noticed, I believe wealth will slowly transfer out of Bitcoin - when and if enough people will decide that Bitcoin’s ‘store of wealth’ could in fact be invested in the next best thing (i.e. coin/token). Perhaps once Bitcoin does reach such towering numbers of 50 - 100K, it’s purpose as a store of global wealth (note NOT the original purpose of Bitcoin) will be met, and perhaps the demand for transactions will taper off. On the other hand, perhaps even a better option for storing wealth in a blockchain could appear. With the rate of speed the tech is moving, its impossible to say, again, only time will tell.","position":{"start":{"line":53,"column":1,"offset":4769},"end":{"line":53,"column":652,"offset":5420},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":4769},"end":{"line":53,"column":652,"offset":5420},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"But, for the present, let the following stand:","position":{"start":{"line":55,"column":1,"offset":5422},"end":{"line":55,"column":47,"offset":5468},"indent":[]}}],"position":{"start":{"line":55,"column":1,"offset":5422},"end":{"line":55,"column":47,"offset":5468},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"As of 16:08 UTC, Tuesday December 12, 2017 the mid-market price on GDAX for 1 Bitcoin was $17,450.","position":{"start":{"line":57,"column":3,"offset":5472},"end":{"line":57,"column":101,"offset":5570},"indent":[]}}],"position":{"start":{"line":57,"column":1,"offset":5470},"end":{"line":57,"column":103,"offset":5572},"indent":[]}}],"position":{"start":{"line":57,"column":1,"offset":5470},"end":{"line":57,"column":103,"offset":5572},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"My Conclusions","position":{"start":{"line":59,"column":3,"offset":5576},"end":{"line":59,"column":17,"offset":5590},"indent":[]}}],"position":{"start":{"line":59,"column":1,"offset":5574},"end":{"line":59,"column":17,"offset":5590},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"My overall thoughts are this: Bitcoin will continue to see a run up into very large numbers in the 50K-100K region, then stabilize as buying rates finally settle down to match that of selling rates. Then, at some point along this stagnation, there will be a slow starting decrease downtrend in Bitcoin’s price, then accelerating, bringing the price of Bitcoin back to its pre-boom levels (think: $5 - $10 range). When will this happen? I would say not within the next 5-10 years. But it’s my long term feeling.","position":{"start":{"line":61,"column":1,"offset":5592},"end":{"line":61,"column":511,"offset":6102},"indent":[]}}],"position":{"start":{"line":61,"column":1,"offset":5592},"end":{"line":61,"column":511,"offset":6102},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cheers! 🍺","position":{"start":{"line":63,"column":1,"offset":6104},"end":{"line":63,"column":11,"offset":6114},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":6104},"end":{"line":63,"column":11,"offset":6114},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":64,"column":1,"offset":6115}}}},{"id":"transformer-remark-markdown-ast-50c44d197767b38d62d9904b63aa12b4-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":{"type":"root","children":[{"type":"yaml","value":"title: Sending Windows Server Commands From SAP ABAP\ndate: \"2017-12-13\"","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":4,"column":4,"offset":79},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Alright, let’s do a bit of applied stuff today.","position":{"start":{"line":6,"column":1,"offset":81},"end":{"line":6,"column":48,"offset":128},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":81},"end":{"line":6,"column":48,"offset":128},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Backstory","position":{"start":{"line":8,"column":3,"offset":132},"end":{"line":8,"column":12,"offset":141},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":130},"end":{"line":8,"column":12,"offset":141},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For a long time, I had a ticket open for our IT team (I am likewise in the SAP team) for an automatic job that would restart a certain task on a Windows server we had - for reasons we still don’t know yet, this particular service would state that it was running, when in fact the job it was supposed to be orchestrating was clearly not running. We were able to verify if the service wasn’t working properly by pinging an RFC node. If the RFC ping returned with an error, then we knew the service was not working - don’t worry, this RFC ping will come into the code later.","position":{"start":{"line":10,"column":1,"offset":143},"end":{"line":10,"column":572,"offset":714},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":143},"end":{"line":10,"column":572,"offset":714},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"One lazy Friday when I didn’t have much to do, I was brainstorming if it was possible that maybe I could take this ticket into my own hands, writing something on our ABAP stack that could do the trick.","position":{"start":{"line":12,"column":1,"offset":716},"end":{"line":12,"column":202,"offset":917},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":716},"end":{"line":12,"column":202,"offset":917},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"The Problem","position":{"start":{"line":14,"column":3,"offset":921},"end":{"line":14,"column":14,"offset":932},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":919},"end":{"line":14,"column":14,"offset":932},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"I knew at least that I had to issue specific commands to the command line. That much I already knew how to do - I had used custom command services in SAP/ABAP with transaction SM69 before. The hard thing that I got stuck with: how could I, from our SAP application server, issue a specific command, to the Service Control Manager, to a specific service? Whew. Still with me? With help from one of our basic team members, we discovered that as it turns out, Windows has a very nice command for exactly that.","position":{"start":{"line":16,"column":1,"offset":934},"end":{"line":16,"column":507,"offset":1440},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":934},"end":{"line":16,"column":507,"offset":1440},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"It’s called ","position":{"start":{"line":18,"column":1,"offset":1442},"end":{"line":18,"column":13,"offset":1454},"indent":[]}},{"type":"inlineCode","value":"sc","position":{"start":{"line":18,"column":13,"offset":1454},"end":{"line":18,"column":17,"offset":1458},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":18,"column":17,"offset":1458},"end":{"line":18,"column":18,"offset":1459},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1442},"end":{"line":18,"column":18,"offset":1459},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-none\"><code>C:\\>sc\nDESCRIPTION:\n        SC is a command line program used for communicating with the\n        Service Control Manager and services.\nUSAGE:\n        sc <server> [command] [service name] <option1> <option2>...\n\n\n        The option <server> has the form \"\\\\ServerName\"\n        Further help on commands can be obtained by typing: \"sc [command]\"\n        Commands:\n          query-----------Queries the status for a service, or enumerates the status for types of services.\n          queryex---------Queries the extended status for a service, or enumerates the status for types of services.\n          start-----------Starts a service.\n          pause-----------Sends a PAUSE control request to a service.\n          interrogate-----Sends an INTERROGATE control request to a service.\n          continue--------Sends a CONTINUE control request to a service.\n          stop------------Sends a STOP request to a service.\n          config----------Changes the configuration of a service (persistent).\n          description-----Changes the description of a service.\n          failure---------Changes the actions taken by a service upon failure.\n          failureflag-----Changes the failure actions flag of a service.\n          sidtype---------Changes the service SID type of a service.\n          privs-----------Changes the required privileges of a service.\n          managedaccount--Changes the service to mark the service account password as managed by LSA.\n          qc--------------Queries the configuration information for a service.\n          qdescription----Queries the description for a service.\n          qfailure--------Queries the actions taken by a service upon failure.\n          qfailureflag----Queries the failure actions flag of a service.\n          qsidtype--------Queries the service SID type of a service.\n          qprivs----------Queries the required privileges of a service.\n          qtriggerinfo----Queries the trigger parameters of a service.\n          qpreferrednode--Queries the preferred NUMA node of a service.\n          qrunlevel-------Queries the run level of a service.\n          qmanagedaccount-Queries whether a services uses an account with a password managed by LSA.\n          qprotection-----Queries the process protection level of a service.\n          delete----------Deletes a service (from the registry).\n          create----------Creates a service. (adds it to the registry).\n          control---------Sends a control to a service.\n          sdshow----------Displays a service's security descriptor.\n          sdset-----------Sets a service's security descriptor.\n          showsid---------Displays the service SID string corresponding to an arbitrary name.\n          triggerinfo-----Configures the trigger parameters of a service.\n          preferrednode---Sets the preferred NUMA node of a service.\n          runlevel--------Sets the run level of a service.\n          GetDisplayName--Gets the DisplayName for a service.\n          GetKeyName------Gets the ServiceKeyName for a service.\n          EnumDepend------Enumerates Service Dependencies.\n\n        The following commands don't require a service name:\n        sc <server> <command> <option>\n          boot------------(ok | bad) Indicates whether the last boot should be saved as the last-known-good boot configuration\n          Lock------------Locks the Service Database\n          QueryLock-------Queries the LockStatus for the SCManager Database\nEXAMPLE:\n        sc start MyService\n\nWould you like to see help for the QUERY and QUERYEX commands? [ y | n ]:</code></pre>\n      </div>","position":{"start":{"line":20,"column":1,"offset":1461},"end":{"line":79,"column":4,"offset":5012},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Wow. That’s a monster of a command documentation. Let’s break down what we need.","position":{"start":{"line":81,"column":1,"offset":5014},"end":{"line":81,"column":81,"offset":5094},"indent":[]}}],"position":{"start":{"line":81,"column":1,"offset":5014},"end":{"line":81,"column":81,"offset":5094},"indent":[]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The server name. We know that (for this example, I’m going to just call it AWESOMESERVER01). But wait! There’s a gotchya, we will need to write it like:","position":{"start":{"line":83,"column":3,"offset":5098},"end":{"line":83,"column":155,"offset":5250},"indent":[]}}],"position":{"start":{"line":83,"column":3,"offset":5098},"end":{"line":83,"column":155,"offset":5250},"indent":[]}}],"position":{"start":{"line":83,"column":1,"offset":5096},"end":{"line":83,"column":155,"offset":5250},"indent":[]}}],"position":{"start":{"line":83,"column":1,"offset":5096},"end":{"line":83,"column":155,"offset":5250},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"\\\\AWESOMESERVER01","position":{"start":{"line":85,"column":1,"offset":5252},"end":{"line":85,"column":20,"offset":5271},"indent":[]}}],"position":{"start":{"line":85,"column":1,"offset":5252},"end":{"line":85,"column":20,"offset":5271},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"That’s not a special setting for server names that we have at my company or anything like that, that’s part of the ","position":{"start":{"line":87,"column":1,"offset":5273},"end":{"line":87,"column":116,"offset":5388},"indent":[]}},{"type":"inlineCode","value":"sc","position":{"start":{"line":87,"column":116,"offset":5388},"end":{"line":87,"column":120,"offset":5392},"indent":[]}},{"type":"text","value":" command. Notice the line in the documentation that says exactly that:","position":{"start":{"line":87,"column":120,"offset":5392},"end":{"line":87,"column":190,"offset":5462},"indent":[]}}],"position":{"start":{"line":87,"column":1,"offset":5273},"end":{"line":87,"column":190,"offset":5462},"indent":[]}},{"type":"blockquote","children":[{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"The option ","position":{"start":{"line":89,"column":5,"offset":5468},"end":{"line":89,"column":16,"offset":5479},"indent":[]}},{"type":"html","value":"<server>","position":{"start":{"line":89,"column":16,"offset":5479},"end":{"line":89,"column":24,"offset":5487},"indent":[]}},{"type":"text","value":" has the form ”","position":{"start":{"line":89,"column":24,"offset":5487},"end":{"line":89,"column":39,"offset":5502},"indent":[]}},{"type":"text","value":"\\","position":{"start":{"line":89,"column":39,"offset":5502},"end":{"line":89,"column":41,"offset":5504},"indent":[]}},{"type":"text","value":"\\","position":{"start":{"line":89,"column":41,"offset":5504},"end":{"line":89,"column":43,"offset":5506},"indent":[]}},{"type":"text","value":"ServerName”","position":{"start":{"line":89,"column":43,"offset":5506},"end":{"line":89,"column":54,"offset":5517},"indent":[]}}],"position":{"start":{"line":89,"column":5,"offset":5468},"end":{"line":89,"column":54,"offset":5517},"indent":[]}}],"position":{"start":{"line":89,"column":3,"offset":5466},"end":{"line":89,"column":54,"offset":5517},"indent":[]}}],"position":{"start":{"line":89,"column":1,"offset":5464},"end":{"line":89,"column":54,"offset":5517},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Okay, now for our service name. Again, for instruction purposes of the command and for privacy sake, I’m going to call our service ","position":{"start":{"line":91,"column":1,"offset":5519},"end":{"line":91,"column":132,"offset":5650},"indent":[]}},{"type":"inlineCode","value":"ServiceName even with Whitespace","position":{"start":{"line":91,"column":132,"offset":5650},"end":{"line":91,"column":166,"offset":5684},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":91,"column":166,"offset":5684},"end":{"line":91,"column":167,"offset":5685},"indent":[]}}],"position":{"start":{"line":91,"column":1,"offset":5519},"end":{"line":91,"column":167,"offset":5685},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Okay, what do I need to send as a command? What command do we need? Let’s check out that wall of text documentation:","position":{"start":{"line":93,"column":1,"offset":5687},"end":{"line":93,"column":117,"offset":5803},"indent":[]}}],"position":{"start":{"line":93,"column":1,"offset":5687},"end":{"line":93,"column":117,"offset":5803},"indent":[]}},{"type":"blockquote","children":[{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"stop------------Sends a STOP request to a service.","position":{"start":{"line":95,"column":5,"offset":5809},"end":{"line":95,"column":55,"offset":5859},"indent":[]}}],"position":{"start":{"line":95,"column":5,"offset":5809},"end":{"line":95,"column":55,"offset":5859},"indent":[]}}],"position":{"start":{"line":95,"column":3,"offset":5807},"end":{"line":95,"column":55,"offset":5859},"indent":[]}}],"position":{"start":{"line":95,"column":1,"offset":5805},"end":{"line":95,"column":55,"offset":5859},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Yep, that sounds about as right as you can get. Oh also, hold your thoughts on this one:","position":{"start":{"line":97,"column":1,"offset":5861},"end":{"line":97,"column":89,"offset":5949},"indent":[]}}],"position":{"start":{"line":97,"column":1,"offset":5861},"end":{"line":97,"column":89,"offset":5949},"indent":[]}},{"type":"blockquote","children":[{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"Commands:\n  …\n  start-----------Starts a service.","position":{"start":{"line":99,"column":5,"offset":5955},"end":{"line":101,"column":36,"offset":6008},"indent":[1,1]}}],"position":{"start":{"line":99,"column":5,"offset":5955},"end":{"line":101,"column":36,"offset":6008},"indent":[1,1]}}],"position":{"start":{"line":99,"column":3,"offset":5953},"end":{"line":101,"column":36,"offset":6008},"indent":[1,1]}}],"position":{"start":{"line":99,"column":1,"offset":5951},"end":{"line":101,"column":36,"offset":6008},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"That will be useful later, too.","position":{"start":{"line":103,"column":1,"offset":6010},"end":{"line":103,"column":32,"offset":6041},"indent":[]}}],"position":{"start":{"line":103,"column":1,"offset":6010},"end":{"line":103,"column":32,"offset":6041},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Alright… Server name? Check. Service Name? Check. Command name(s)? Check. So, what do we get as a command for our efforts? It looks like this:","position":{"start":{"line":105,"column":1,"offset":6043},"end":{"line":105,"column":145,"offset":6187},"indent":[]}}],"position":{"start":{"line":105,"column":1,"offset":6043},"end":{"line":105,"column":145,"offset":6187},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"sc \\\\AWESOMESERVER01 start \"ServiceName even with Whitespace\"","position":{"start":{"line":107,"column":1,"offset":6189},"end":{"line":107,"column":64,"offset":6252},"indent":[]}}],"position":{"start":{"line":107,"column":1,"offset":6189},"end":{"line":107,"column":64,"offset":6252},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In order for this to be a true ","position":{"start":{"line":109,"column":1,"offset":6254},"end":{"line":109,"column":32,"offset":6285},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"restart","position":{"start":{"line":109,"column":33,"offset":6286},"end":{"line":109,"column":40,"offset":6293},"indent":[]}}],"position":{"start":{"line":109,"column":32,"offset":6285},"end":{"line":109,"column":41,"offset":6294},"indent":[]}},{"type":"text","value":" of the service, we would have to issue a stop/start command pair on the service:","position":{"start":{"line":109,"column":41,"offset":6294},"end":{"line":109,"column":122,"offset":6375},"indent":[]}}],"position":{"start":{"line":109,"column":1,"offset":6254},"end":{"line":109,"column":122,"offset":6375},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"sc \\\\AWESOMESERVER01 stop \"ServiceName even with Whitespace\"","position":{"start":{"line":111,"column":1,"offset":6377},"end":{"line":111,"column":63,"offset":6439},"indent":[]}},{"type":"break","position":{"start":{"line":111,"column":63,"offset":6439},"end":{"line":112,"column":1,"offset":6442},"indent":[1]}},{"type":"inlineCode","value":"sc \\\\AWESOMESERVER01 start \"ServiceName even with Whitespace\"","position":{"start":{"line":112,"column":1,"offset":6442},"end":{"line":112,"column":64,"offset":6505},"indent":[]}}],"position":{"start":{"line":111,"column":1,"offset":6377},"end":{"line":112,"column":64,"offset":6505},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"How do we do that in ABAP? Well, to run SM69 commands programmatically, we have the tasty function module ","position":{"start":{"line":114,"column":1,"offset":6507},"end":{"line":114,"column":107,"offset":6613},"indent":[]}},{"type":"inlineCode","value":"SXPG_COMMAND_EXECUTE","position":{"start":{"line":114,"column":107,"offset":6613},"end":{"line":114,"column":129,"offset":6635},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":114,"column":129,"offset":6635},"end":{"line":114,"column":130,"offset":6636},"indent":[]}}],"position":{"start":{"line":114,"column":1,"offset":6507},"end":{"line":114,"column":130,"offset":6636},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'SXPG_COMMAND_EXECUTE'</span>\n  <span class=\"token keyword\">EXPORTING</span>\n    commandname                   <span class=\"token operator\">=</span> gv_commandname\n    additional_parameters         <span class=\"token operator\">=</span> gv_additional_parameters\n    operatingsystem               <span class=\"token operator\">=</span> gv_operatingsystem\n  <span class=\"token keyword\">TABLES</span>\n    exec_protocol                 <span class=\"token operator\">=</span> gt_result\n  <span class=\"token keyword\">EXCEPTIONS</span>\n    no_permission                 <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n    command_not_found             <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n    parameters_too_long           <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n    security_risk                 <span class=\"token operator\">=</span> <span class=\"token number\">4</span>\n    wrong_check_call_interface    <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\n    program_start_error           <span class=\"token operator\">=</span> <span class=\"token number\">6</span>\n    program_termination_error     <span class=\"token operator\">=</span> <span class=\"token number\">7</span>\n    x_error                       <span class=\"token operator\">=</span> <span class=\"token number\">8</span>\n    parameter_expected            <span class=\"token operator\">=</span> <span class=\"token number\">9</span>\n    too_many_parameters           <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n    illegal_command               <span class=\"token operator\">=</span> <span class=\"token number\">11</span>\n    wrong_asynchronous_parameters <span class=\"token operator\">=</span> <span class=\"token number\">12</span>\n    cant_enq_tbtco_entry          <span class=\"token operator\">=</span> <span class=\"token number\">13</span>\n    jobcount_generation_error     <span class=\"token operator\">=</span> <span class=\"token number\">14</span>\n    <span class=\"token keyword\">OTHERS</span>                        <span class=\"token operator\">=</span> <span class=\"token number\">15</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>","position":{"start":{"line":116,"column":1,"offset":6638},"end":{"line":140,"column":4,"offset":7510},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"I’ll just say I maintained the two commands in SM69 as ","position":{"start":{"line":142,"column":1,"offset":7512},"end":{"line":142,"column":56,"offset":7567},"indent":[]}},{"type":"inlineCode","value":"Z_MY_SUPER_AWESOME_COMMAND_START","position":{"start":{"line":142,"column":56,"offset":7567},"end":{"line":142,"column":90,"offset":7601},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":142,"column":90,"offset":7601},"end":{"line":142,"column":95,"offset":7606},"indent":[]}},{"type":"inlineCode","value":"Z_MY_SUPER_AWESOME_COMMAND_STOP","position":{"start":{"line":142,"column":95,"offset":7606},"end":{"line":142,"column":128,"offset":7639},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":142,"column":128,"offset":7639},"end":{"line":142,"column":129,"offset":7640},"indent":[]}}],"position":{"start":{"line":142,"column":1,"offset":7512},"end":{"line":142,"column":129,"offset":7640},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"So, all that’s left is to check if the service is not responding. As I summarized above, if the Windows service was broken, the RFC node that talked to it would also be broken. (i.e. pinging it would not work). An RFC node is easy enough to test with function module ","position":{"start":{"line":144,"column":1,"offset":7642},"end":{"line":144,"column":268,"offset":7909},"indent":[]}},{"type":"inlineCode","value":"RFC_PING","position":{"start":{"line":144,"column":268,"offset":7909},"end":{"line":144,"column":278,"offset":7919},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":144,"column":278,"offset":7919},"end":{"line":144,"column":279,"offset":7920},"indent":[]}}],"position":{"start":{"line":144,"column":1,"offset":7642},"end":{"line":144,"column":279,"offset":7920},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'RFC_PING'</span>\n  <span class=\"token keyword\">DESTINATION</span> <span class=\"token string\">'Z_BROKEN_RFC_DESTINATION'</span>\n  <span class=\"token keyword\">EXCEPTIONS</span>\n    system_failure        <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n    communication_failure <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>","position":{"start":{"line":146,"column":1,"offset":7922},"end":{"line":152,"column":4,"offset":8073},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Easy enough. If ","position":{"start":{"line":154,"column":1,"offset":8075},"end":{"line":154,"column":17,"offset":8091},"indent":[]}},{"type":"inlineCode","value":"sy-subrc","position":{"start":{"line":154,"column":17,"offset":8091},"end":{"line":154,"column":27,"offset":8101},"indent":[]}},{"type":"text","value":" is of value 1 or 2, then it means indeed, that our ","position":{"start":{"line":154,"column":27,"offset":8101},"end":{"line":154,"column":79,"offset":8153},"indent":[]}},{"type":"inlineCode","value":"Z_BROKEN_RFC_DESTINATION","position":{"start":{"line":154,"column":79,"offset":8153},"end":{"line":154,"column":105,"offset":8179},"indent":[]}},{"type":"text","value":" is indeed broken.","position":{"start":{"line":154,"column":105,"offset":8179},"end":{"line":154,"column":123,"offset":8197},"indent":[]}}],"position":{"start":{"line":154,"column":1,"offset":8075},"end":{"line":154,"column":123,"offset":8197},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"So if it turns out this service is not responding, we call the command pair with function module ","position":{"start":{"line":156,"column":1,"offset":8199},"end":{"line":156,"column":98,"offset":8296},"indent":[]}},{"type":"inlineCode","value":"SXPG_COMMAND_EXECUTE","position":{"start":{"line":156,"column":98,"offset":8296},"end":{"line":156,"column":120,"offset":8318},"indent":[]}},{"type":"text","value":", check ","position":{"start":{"line":156,"column":120,"offset":8318},"end":{"line":156,"column":128,"offset":8326},"indent":[]}},{"type":"inlineCode","value":"sy-subrc","position":{"start":{"line":156,"column":128,"offset":8326},"end":{"line":156,"column":138,"offset":8336},"indent":[]}},{"type":"text","value":", and we are done! The total code looks like this:","position":{"start":{"line":156,"column":138,"offset":8336},"end":{"line":156,"column":188,"offset":8386},"indent":[]}}],"position":{"start":{"line":156,"column":1,"offset":8199},"end":{"line":156,"column":188,"offset":8386},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">REPORT</span> Z_RESTART_SERVICE<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*&amp; Report:  Z_RESTART_SERVICE                                          *</span>\n<span class=\"token comment\">*&amp; Author: Chris Frewin                                                *</span>\n<span class=\"token comment\">*&amp; Creation Date: 27.10.2017                                           *</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*&amp; Requester:                                                          *</span>\n<span class=\"token comment\">*&amp; Chris Frewin - a report that restarts a windows service             *</span>\n<span class=\"token comment\">*&amp;                                                                     *</span>\n<span class=\"token comment\">*&amp;                                                                     *</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*&amp; Changes:                                                            *</span>\n<span class=\"token comment\">*&amp; Chris Frewin      2017.12.13 - First version                        *</span>\n<span class=\"token comment\">*&amp;                                                                     *</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n\n<span class=\"token eol-comment comment\">\" Check RFC destination Z_BROKEN_RFC_DESTINATION - if it hangs or returns error, try to restart it</span>\n<span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'RFC_PING'</span>\n  <span class=\"token keyword\">DESTINATION</span> <span class=\"token string\">'Z_BROKEN_RFC_DESTINATION'</span>\n  <span class=\"token keyword\">EXCEPTIONS</span>\n    system_failure        <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n    communication_failure <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">CASE</span> sy<span class=\"token token-operator punctuation\">-</span>subrc<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">WHEN</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">WRITE</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">/</span> <span class=\"token string\">'Ping Test RFC Destination Z_BROKEN_RFC_DESTINATION with SY-SUBRC = 1: \"system_failure\" Trying to restart the service...'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">WHEN</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">WRITE</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">/</span> <span class=\"token string\">'Ping Test RFC Destination Z_BROKEN_RFC_DESTINATION with SY-SUBRC = 2: \"communication_failure\" Trying to restart the service...'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">WHEN</span> <span class=\"token keyword\">OTHERS</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">WRITE</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">/</span> <span class=\"token string\">'Ping Test RFC Destination Z_BROKEN_RFC_DESTINATION is offline or not functioning properly! Trying to restart the service...'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDCASE</span><span class=\"token punctuation\">.</span>\n  <span class=\"token eol-comment comment\">\" restart the service with a stop/start combo</span>\n  <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'SXPG_COMMAND_EXECUTE'</span>\n    <span class=\"token keyword\">EXPORTING</span>\n      commandname <span class=\"token operator\">=</span> <span class=\"token string\">'Z_MY_SUPER_AWESOME_COMMAND_STOP'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">WRITE</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">/</span> <span class=\"token string\">'Error with the start command - Z_MY_SUPER_AWESOME_COMMAND_STOP command!'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'SXPG_COMMAND_EXECUTE'</span>\n    <span class=\"token keyword\">EXPORTING</span>\n      commandname <span class=\"token operator\">=</span> <span class=\"token string\">'Z_MY_SUPER_AWESOME_COMMAND_START'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">WRITE</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">/</span> <span class=\"token string\">'Error with the stop command - Z_MY_SUPER_AWESOME_COMMAND_START command!'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ELSE</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">WRITE</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">/</span> <span class=\"token string\">'Service successfully newly started!'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>","position":{"start":{"line":158,"column":1,"offset":8388},"end":{"line":206,"column":4,"offset":10765},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We set this report up as a batch job to run every 5 minutes, and the ticket was resolved 😄","position":{"start":{"line":208,"column":1,"offset":10767},"end":{"line":208,"column":92,"offset":10858},"indent":[]}}],"position":{"start":{"line":208,"column":1,"offset":10767},"end":{"line":208,"column":92,"offset":10858},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Review","position":{"start":{"line":210,"column":3,"offset":10862},"end":{"line":210,"column":9,"offset":10868},"indent":[]}}],"position":{"start":{"line":210,"column":1,"offset":10860},"end":{"line":210,"column":9,"offset":10868},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"As a review, we determined the specific commands needed to be sent to the Windows Service Control Manager, maintained the needed commands in transaction SM69, and wrote a report that we ran as a batch job!","position":{"start":{"line":212,"column":1,"offset":10870},"end":{"line":212,"column":206,"offset":11075},"indent":[]}}],"position":{"start":{"line":212,"column":1,"offset":10870},"end":{"line":212,"column":206,"offset":11075},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Notes and Comments","position":{"start":{"line":214,"column":3,"offset":11079},"end":{"line":214,"column":21,"offset":11097},"indent":[]}}],"position":{"start":{"line":214,"column":1,"offset":11077},"end":{"line":214,"column":21,"offset":11097},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"I hope everyone enjoyed this post and learned a thing or two. I’m going to be posting a lot more ABAP as well as SAPUI5 content in the coming months. I’ve found that the learning curve for SAPUI5 is a lot higher than other frontend frameworks like React, Vue, or Cycle. I’ve done specialized projects with SAPUI5 is both the EWM and PP modules - There is A LOT of really cool stuff you can do, (especially in EWM) with WebSockets, statistics, and SAPUI5. The bottom line is, I’ve got some great content in the coming months for everyone!","position":{"start":{"line":216,"column":1,"offset":11099},"end":{"line":216,"column":538,"offset":11636},"indent":[]}}],"position":{"start":{"line":216,"column":1,"offset":11099},"end":{"line":216,"column":538,"offset":11636},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cheers everyone! 🍺","position":{"start":{"line":218,"column":1,"offset":11638},"end":{"line":218,"column":20,"offset":11657},"indent":[]}}],"position":{"start":{"line":218,"column":1,"offset":11638},"end":{"line":218,"column":20,"offset":11657},"indent":[]}},{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"Intellectual property/privacy disclaimer: the exact source code and use case have been modified from the real use case at the company I work for, ","position":{"start":{"line":220,"column":2,"offset":11660},"end":{"line":220,"column":148,"offset":11806},"indent":[]}},{"type":"link","title":null,"url":"https://www.ospelt.com/en/ospelt/info/home.html","children":[{"type":"text","value":"Ospelt","position":{"start":{"line":220,"column":149,"offset":11807},"end":{"line":220,"column":155,"offset":11813},"indent":[]}}],"position":{"start":{"line":220,"column":148,"offset":11806},"end":{"line":220,"column":205,"offset":11863},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":220,"column":205,"offset":11863},"end":{"line":220,"column":206,"offset":11864},"indent":[]}}],"position":{"start":{"line":220,"column":1,"offset":11659},"end":{"line":220,"column":207,"offset":11865},"indent":[]}}],"position":{"start":{"line":220,"column":1,"offset":11659},"end":{"line":220,"column":207,"offset":11865},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":221,"column":1,"offset":11866}}}},{"id":"transformer-remark-markdown-ast-b02412cc3e1bf0bb135f9af046fcad33-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":{"type":"root","children":[{"type":"yaml","value":"title: A Toast to Full Stack Developers\ndate: \"2017-12-12\"","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":4,"column":4,"offset":66},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Warning everyone - this is a bit of rant post - but I hope some of you will agree and we can turn the tables of a stubborn community a bit.","position":{"start":{"line":6,"column":1,"offset":68},"end":{"line":6,"column":140,"offset":207},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":68},"end":{"line":6,"column":140,"offset":207},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"The Full Stack Myth?","position":{"start":{"line":8,"column":3,"offset":211},"end":{"line":8,"column":23,"offset":231},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":209},"end":{"line":8,"column":23,"offset":231},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Much to my surprise, throughout my various software engineering media consumption adventures - I’ve discovered there is a general consensus that the idea of ‘full stack’ is FAKE NEWS. Lots of people on podcasts say it I say screw that. That is a lot like saying, “oh hey, did you know it’s impossible to write great apps or games if you’re a solo developer?” or, “What?!?! A nice dynamic UI, ","position":{"start":{"line":10,"column":1,"offset":233},"end":{"line":10,"column":393,"offset":625},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"with","position":{"start":{"line":10,"column":394,"offset":626},"end":{"line":10,"column":398,"offset":630},"indent":[]}}],"position":{"start":{"line":10,"column":393,"offset":625},"end":{"line":10,"column":399,"offset":631},"indent":[]}},{"type":"text","value":" a relational database backend ","position":{"start":{"line":10,"column":399,"offset":631},"end":{"line":10,"column":430,"offset":662},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"and","position":{"start":{"line":10,"column":431,"offset":663},"end":{"line":10,"column":434,"offset":666},"indent":[]}}],"position":{"start":{"line":10,"column":430,"offset":662},"end":{"line":10,"column":435,"offset":667},"indent":[]}},{"type":"text","value":" a websocket to send messages between the two!?!? You’re a madman!!!“.","position":{"start":{"line":10,"column":435,"offset":667},"end":{"line":10,"column":505,"offset":737},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":233},"end":{"line":10,"column":505,"offset":737},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Wait a second - isn’t that what this whole Web 3.0 stuff is supposed to do? Empower developers to make great apps all by themselves? I mean jeez, I know us, we’ve spent hours on hours learning python, backend databases, container deploys, dabbled in numerous backend frameworks, not even getting started with your favorite modern front end framework of choice (yeah, there’s a lot of those too!) like Vue, React, Ember or more.","position":{"start":{"line":12,"column":1,"offset":739},"end":{"line":12,"column":428,"offset":1166},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":739},"end":{"line":12,"column":428,"offset":1166},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Of course full stack developers know they are more a less a jack of all trades, master of none. I know there are people who could kick my ass at both Postgresql database maintenance, and there are just as many frontend people who could totally kick my ass with a badass UI in React.","position":{"start":{"line":14,"column":1,"offset":1168},"end":{"line":14,"column":283,"offset":1450},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":1168},"end":{"line":14,"column":283,"offset":1450},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For me, full stack has always been about the adventure of software itself - its the nature of the discipline in fact - there are new tools being rolled out literally every day. I mean, really, if you’ve written backend code for databases but have also built websites (I know there are many of us out there!)- how are you supposed to write that succinctly on a resume or CV? “Hi, I’m Chris, part-time-database-program-writer-and-part-time-front-end-engineer”? I do concede that the moniker ‘full stack’ is not really a good enough description by itself. In my case, I could say ‘full stack ","position":{"start":{"line":16,"column":1,"offset":1452},"end":{"line":16,"column":590,"offset":2041},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"web developer","position":{"start":{"line":16,"column":591,"offset":2042},"end":{"line":16,"column":604,"offset":2055},"indent":[]}}],"position":{"start":{"line":16,"column":590,"offset":2041},"end":{"line":16,"column":605,"offset":2056},"indent":[]}},{"type":"text","value":"’. With more practice, maybe someday a full stack ","position":{"start":{"line":16,"column":605,"offset":2056},"end":{"line":16,"column":655,"offset":2106},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"android developer","position":{"start":{"line":16,"column":656,"offset":2107},"end":{"line":16,"column":673,"offset":2124},"indent":[]}}],"position":{"start":{"line":16,"column":655,"offset":2106},"end":{"line":16,"column":674,"offset":2125},"indent":[]}},{"type":"text","value":" - but I need to run through a lot more projects before that happens :)","position":{"start":{"line":16,"column":674,"offset":2125},"end":{"line":16,"column":745,"offset":2196},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":1452},"end":{"line":16,"column":745,"offset":2196},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":":wine: A Toast to Full Stack Developers :wine:","position":{"start":{"line":18,"column":3,"offset":2200},"end":{"line":18,"column":49,"offset":2246},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":2198},"end":{"line":18,"column":49,"offset":2246},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Just because we’re not the greatest, most amazing expert in a certain language, just because we don’t know certain frameworks, just because we haven’t focused in one software engineering discipline our entire careers…","position":{"start":{"line":20,"column":1,"offset":2248},"end":{"line":20,"column":220,"offset":2467},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":2248},"end":{"line":20,"column":220,"offset":2467},"indent":[]}},{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"Shouldn’t we still be able to call ourselves full stack developers?","position":{"start":{"line":22,"column":2,"offset":2470},"end":{"line":22,"column":69,"offset":2537},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":2469},"end":{"line":22,"column":70,"offset":2538},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":2469},"end":{"line":22,"column":70,"offset":2538},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Of course.","position":{"start":{"line":24,"column":3,"offset":2542},"end":{"line":24,"column":13,"offset":2552},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":2540},"end":{"line":24,"column":15,"offset":2554},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":2540},"end":{"line":24,"column":15,"offset":2554},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":25,"column":1,"offset":2555}}}},{"id":"transformer-remark-markdown-ast-f188a4d4c807cec0fc8830103c771561-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":{"type":"root","children":[{"type":"yaml","value":"title: Hello World - My First Post :)\ndate: \"2017-12-12\"","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":4,"column":4,"offset":64},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"I’ll be writing here for sometime into the future now, though I’m not sure how often, as I’m rather busy with the work for ","position":{"start":{"line":6,"column":1,"offset":66},"end":{"line":6,"column":124,"offset":189},"indent":[]}},{"type":"link","title":null,"url":"nlp-champs.com","children":[{"type":"text","value":"nlp-champs.com","position":{"start":{"line":6,"column":125,"offset":190},"end":{"line":6,"column":139,"offset":204},"indent":[]}}],"position":{"start":{"line":6,"column":124,"offset":189},"end":{"line":6,"column":156,"offset":221},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":6,"column":156,"offset":221},"end":{"line":6,"column":161,"offset":226},"indent":[]}},{"type":"link","title":null,"url":"skillscout.herokuapp.com","children":[{"type":"text","value":"SkillScout","position":{"start":{"line":6,"column":162,"offset":227},"end":{"line":6,"column":172,"offset":237},"indent":[]}}],"position":{"start":{"line":6,"column":161,"offset":226},"end":{"line":6,"column":199,"offset":264},"indent":[]}},{"type":"text","value":" (the original thing that brought on the need case for ","position":{"start":{"line":6,"column":199,"offset":264},"end":{"line":6,"column":254,"offset":319},"indent":[]}},{"type":"link","title":null,"url":"nlp-champs.com","children":[{"type":"text","value":"nlp-champs.com","position":{"start":{"line":6,"column":255,"offset":320},"end":{"line":6,"column":269,"offset":334},"indent":[]}}],"position":{"start":{"line":6,"column":254,"offset":319},"end":{"line":6,"column":286,"offset":351},"indent":[]}},{"type":"text","value":". Plus, it ","position":{"start":{"line":6,"column":286,"offset":351},"end":{"line":6,"column":297,"offset":362},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"really","position":{"start":{"line":6,"column":298,"offset":363},"end":{"line":6,"column":304,"offset":369},"indent":[]}}],"position":{"start":{"line":6,"column":297,"offset":362},"end":{"line":6,"column":305,"offset":370},"indent":[]}},{"type":"text","value":" doesn’t help that I recently fell down the rabbit hole that is blockchain. That stuff makes my head 💥 💥 💥 daily.","position":{"start":{"line":6,"column":305,"offset":370},"end":{"line":6,"column":421,"offset":486},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":66},"end":{"line":6,"column":421,"offset":486},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":7,"column":1,"offset":487}}}},{"id":"transformer-remark-markdown-ast-7efb569c92c973fbb96e4058610d6b41-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":{"type":"root","children":[{"type":"yaml","value":"title: Colors For SAP Web IDE!\ndate: \"2018-01-11\"\ndraft: false","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":5,"column":4,"offset":70},"indent":[1,1,1,1]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Dude, where’s my color scheme?!","position":{"start":{"line":7,"column":3,"offset":74},"end":{"line":7,"column":34,"offset":105},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":72},"end":{"line":7,"column":34,"offset":105},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"At some point, ","position":{"start":{"line":9,"column":1,"offset":107},"end":{"line":9,"column":16,"offset":122},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"SAP took away my Monokai Color scheme from the SAPUI5 Web IDE!","position":{"start":{"line":9,"column":17,"offset":123},"end":{"line":9,"column":79,"offset":185},"indent":[]}}],"position":{"start":{"line":9,"column":16,"offset":122},"end":{"line":9,"column":80,"offset":186},"indent":[]}},{"type":"text","value":" That is unforgivable…","position":{"start":{"line":9,"column":80,"offset":186},"end":{"line":9,"column":104,"offset":210},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":107},"end":{"line":9,"column":104,"offset":210},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/unforgivable-595b9ad46814fa0343339c67fe02f92a.gif","alt":"Like I said, unforgivable.","position":{"start":{"line":11,"column":1,"offset":212},"end":{"line":11,"column":48,"offset":259},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":212},"end":{"line":11,"column":48,"offset":259},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Don’t worry - code to the rescue!","position":{"start":{"line":13,"column":4,"offset":264},"end":{"line":13,"column":37,"offset":297},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":261},"end":{"line":13,"column":37,"offset":297},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"I wrote a small tampermonkey script that address this issue, and you can get your monokai colors back! ","position":{"start":{"line":15,"column":1,"offset":299},"end":{"line":15,"column":104,"offset":402},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/ajaxorg/ace/tree/master/lib/ace/theme","children":[{"type":"text","value":"(See Ace’s GitHub for all possible themes.)","position":{"start":{"line":15,"column":105,"offset":403},"end":{"line":15,"column":148,"offset":446},"indent":[]}}],"position":{"start":{"line":15,"column":104,"offset":402},"end":{"line":15,"column":207,"offset":505},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":299},"end":{"line":15,"column":207,"offset":505},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"sapwebidecolors.png","alt":"What's this trickery?!?! Is that MONOKAI for SAP Web IDE?!","position":{"start":{"line":17,"column":1,"offset":507},"end":{"line":17,"column":83,"offset":589},"indent":[]},"value":"\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/sapwebidecolors-e6d59dd4b3c1c3b91006bfdb294938f4-d437b.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 55.99250936329588%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB50lEQVQoz42SXWsTQRSG979oze7s7uzs19SNpK1aWvMHRMHeFrzQK0FEUEoupIpUU0HailjtlYh/QqQIImgh0iY2MTHJJtukjV/g1evsxBqDXfTi5SzszMMz5xwle2YWudv3MZ9fEVnG4oM1LCw9Qm7hHq7fuIO5+TzmbuaRu7X4X1FmrtxFvdlCM9pDp/ddJtr9hnCnh1KljqXlFaw+foKnz57j4eraP6Ocu3gNYa2EWjNCV8D2vv74nXeFTVi2Ds9TkT1lI5MxoGqHkVIPJUaZuXAV3cYHeflTuIN298sQ0PFMMG4hM8HBRx04LoXtmMnA07OXUCxt483bDay/eo3N4jZK5arMi5frsF0DhpkCYwSUqqCWCsvSRNVkJfrIUJSz5y+j1/6IYrU29Nw/Dak2giBNERzPiGrBdVVhmYLzK0Q/MjCUwKiGciNMBMYH40uuZwiYIXpqCqAOZhNpr4t/+72VwFbUQUE8tdHeTQZaOizugAemsPSQTvs4Griirwyca6K3ZACMV2SrUhUD+XwAkMqDuu9gcvokxscYpqZPwOf2wUOJgZWwhY3CltzBv4Bu35CJ9ZFmx3w55XgAGumHkMG3BNbbXbwvllEPO4mG1CKYEGZj2SmMT6Zhj1KwgMNnfdC+4U87GBduPa1pyAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"What's this trickery?!?! Is that MONOKAI for SAP Web IDE?!\"\n        title=\"\"\n        src=\"/blog/static/sapwebidecolors-e6d59dd4b3c1c3b91006bfdb294938f4-fb8a0.png\"\n        srcset=\"/blog/static/sapwebidecolors-e6d59dd4b3c1c3b91006bfdb294938f4-1a291.png 148w,\n/blog/static/sapwebidecolors-e6d59dd4b3c1c3b91006bfdb294938f4-2bc4a.png 295w,\n/blog/static/sapwebidecolors-e6d59dd4b3c1c3b91006bfdb294938f4-fb8a0.png 590w,\n/blog/static/sapwebidecolors-e6d59dd4b3c1c3b91006bfdb294938f4-526de.png 885w,\n/blog/static/sapwebidecolors-e6d59dd4b3c1c3b91006bfdb294938f4-fa2eb.png 1180w,\n/blog/static/sapwebidecolors-e6d59dd4b3c1c3b91006bfdb294938f4-08f6a.png 1770w,\n/blog/static/sapwebidecolors-e6d59dd4b3c1c3b91006bfdb294938f4-d437b.png 2136w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    "},{"type":"text","value":"\nWhat’s this trickery?!?! Is that the MONOKAI color scheme for SAP Web IDE?!","position":{"start":{"line":17,"column":83,"offset":589},"end":{"line":18,"column":76,"offset":665},"indent":[1]}}],"position":{"start":{"line":17,"column":1,"offset":507},"end":{"line":18,"column":76,"offset":665},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"This obviously requires that you have tampermonkey installed for your browser - check out the ","position":{"start":{"line":20,"column":1,"offset":667},"end":{"line":20,"column":95,"offset":761},"indent":[]}},{"type":"link","title":null,"url":"https://tampermonkey.net/","children":[{"type":"text","value":"tampermonkey website on how to install it","position":{"start":{"line":20,"column":96,"offset":762},"end":{"line":20,"column":137,"offset":803},"indent":[]}}],"position":{"start":{"line":20,"column":95,"offset":761},"end":{"line":20,"column":165,"offset":831},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":20,"column":165,"offset":831},"end":{"line":20,"column":166,"offset":832},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":667},"end":{"line":20,"column":166,"offset":832},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Once you’ve installed tampermonkey, just copy in and paste the script from below (or the ","position":{"start":{"line":22,"column":1,"offset":834},"end":{"line":22,"column":90,"offset":923},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/frewinchristopher/sapwebidecolors","children":[{"type":"text","value":"GitHub","position":{"start":{"line":22,"column":91,"offset":924},"end":{"line":22,"column":97,"offset":930},"indent":[]}}],"position":{"start":{"line":22,"column":90,"offset":923},"end":{"line":22,"column":152,"offset":985},"indent":[]}},{"type":"text","value":" page) and all you should need to change is the ","position":{"start":{"line":22,"column":152,"offset":985},"end":{"line":22,"column":200,"offset":1033},"indent":[]}},{"type":"inlineCode","value":"[YOUR_USER_NAME_HERE]","position":{"start":{"line":22,"column":200,"offset":1033},"end":{"line":22,"column":223,"offset":1056},"indent":[]}},{"type":"text","value":" value in the ","position":{"start":{"line":22,"column":223,"offset":1056},"end":{"line":22,"column":237,"offset":1070},"indent":[]}},{"type":"inlineCode","value":"@match","position":{"start":{"line":22,"column":237,"offset":1070},"end":{"line":22,"column":245,"offset":1078},"indent":[]}},{"type":"text","value":" variable. This username is your SAP ‘s’ username, an ‘s’ followed by 10 numbers, i.e. ","position":{"start":{"line":22,"column":245,"offset":1078},"end":{"line":22,"column":332,"offset":1165},"indent":[]}},{"type":"inlineCode","value":"S0123456789","position":{"start":{"line":22,"column":332,"offset":1165},"end":{"line":22,"column":345,"offset":1178},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":22,"column":345,"offset":1178},"end":{"line":22,"column":346,"offset":1179},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":834},"end":{"line":22,"column":346,"offset":1179},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"TL;DR: Gimme Code!","position":{"start":{"line":24,"column":4,"offset":1184},"end":{"line":24,"column":22,"offset":1202},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1181},"end":{"line":24,"column":22,"offset":1202},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The full code (as of January 11, 2018) is as follows:","position":{"start":{"line":26,"column":1,"offset":1204},"end":{"line":26,"column":54,"offset":1257},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1204},"end":{"line":26,"column":54,"offset":1257},"indent":[]}},{"type":"html","lang":"javascript","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code><span class=\"token comment\">// ==UserScript==</span>\n<span class=\"token comment\">// @name         Monokai Web IDE colors</span>\n<span class=\"token comment\">// @namespace    http://tampermonkey.net/</span>\n<span class=\"token comment\">// @version      1.0</span>\n<span class=\"token comment\">// @description  Changes the Ace Shell CSS in SAP Web IDE from any defaults to Monokai.</span>\n<span class=\"token comment\">// @author       Chris Frewin</span>\n<span class=\"token comment\">// @match        https://webide-[YOUR_USER_NAME_HERE]trial.dispatcher.hanatrial.ondemand.com</span>\n<span class=\"token comment\">// @grant        GM_getResourceText</span>\n<span class=\"token comment\">// @grant        GM_addStyle</span>\n<span class=\"token comment\">// @resource     customCSS https://raw.githubusercontent.com/ajaxorg/ace/master/lib/ace/theme/monokai.css</span>\n<span class=\"token comment\">// @require      http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js</span>\n<span class=\"token comment\">// @require      http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js</span>\n<span class=\"token comment\">// ==/UserScript==</span>\n\n<span class=\"token comment\">// *** NOTE: feel free to replace the 'customCSS' link above with any of the following ace themes found here: (make sure to select the raw version!)</span>\n<span class=\"token comment\">// https://github.com/ajaxorg/ace/tree/master/lib/ace/theme</span>\n\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> newCSS <span class=\"token operator\">=</span> <span class=\"token function\">GM_getResourceText</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"customCSS\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// monokai css for ace editor</span>\n    <span class=\"token function\">GM_addStyle</span> <span class=\"token punctuation\">(</span>newCSS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"added css...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> editor <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#__editor0\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// select editor ID</span>\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>editor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">removeClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// remove any of the default classes</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"removed default css...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>editor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addClass</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ace_editor\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// add back in original class</span>\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>editor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addClass</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ace-monokai\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// monokai colors class!</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"added ace-monokai css...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token number\">20000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n      </div>","position":{"start":{"line":28,"column":1,"offset":1259},"end":{"line":57,"column":4,"offset":2702},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"I would recommend you check out the newest version on GitHub: ","position":{"start":{"line":59,"column":1,"offset":2704},"end":{"line":59,"column":63,"offset":2766},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/frewinchristopher/sapwebidecolors","children":[{"type":"text","value":"https://github.com/frewinchristopher/sapwebidecolors","position":{"start":{"line":59,"column":64,"offset":2767},"end":{"line":59,"column":116,"offset":2819},"indent":[]}}],"position":{"start":{"line":59,"column":63,"offset":2766},"end":{"line":59,"column":171,"offset":2874},"indent":[]}}],"position":{"start":{"line":59,"column":1,"offset":2704},"end":{"line":59,"column":171,"offset":2874},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cheers! 🍺","position":{"start":{"line":61,"column":1,"offset":2876},"end":{"line":61,"column":11,"offset":2886},"indent":[]}}],"position":{"start":{"line":61,"column":1,"offset":2876},"end":{"line":61,"column":11,"offset":2886},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":62,"column":1,"offset":2887}}}},{"id":"transformer-remark-markdown-ast-8368319928f93d97bad3ed5d1674541b-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":{"type":"root","children":[{"type":"yaml","value":"title: My Laptop Stickers Arrived! Am I a Real Developer Now?!\ndate: \"2017-12-19\"\ndraft: false","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":5,"column":4,"offset":102},"indent":[1,1,1,1]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Laptop Stickers!","position":{"start":{"line":7,"column":3,"offset":106},"end":{"line":7,"column":19,"offset":122},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":104},"end":{"line":7,"column":19,"offset":122},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./laptopstickers1.jpg","alt":"So hipster. Much win. Yes.","position":{"start":{"line":9,"column":1,"offset":124},"end":{"line":9,"column":53,"offset":176},"indent":[]},"value":"\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/laptopstickers1-ce10386796d1b866b5dd08091672a70c-b2a60.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAADBf/EABUBAQEAAAAAAAAAAAAAAAAAAAIB/9oADAMBAAIQAxAAAAE7wbB9CHGf/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAECERIh/9oACAEBAAEFAovkeGmUrs0f/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFhEBAQEAAAAAAAAAAAAAAAAAABEB/9oACAECAQE/Abiv/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAEgMXH/2gAIAQEABj8CwTZcP//EABsQAQACAgMAAAAAAAAAAAAAAAEAESFBMVGB/9oACAEBAAE/IbUrmE9hkhrPpco0xC3Kwj//2gAMAwEAAgADAAAAEOA//8QAFhEBAQEAAAAAAAAAAAAAAAAAABEB/9oACAEDAQE/EJqP/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/EKMP/8QAHBABAQACAgMAAAAAAAAAAAAAAREAMSGRYXHR/9oACAEBAAE/EDc9851PeQYwDKlO/GT0At5F3cCm1w04S+7Am3P/2Q=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"So hipster. Much win. Yes.\"\n        title=\"\"\n        src=\"/blog/static/laptopstickers1-ce10386796d1b866b5dd08091672a70c-f8fb9.jpg\"\n        srcset=\"/blog/static/laptopstickers1-ce10386796d1b866b5dd08091672a70c-e8976.jpg 148w,\n/blog/static/laptopstickers1-ce10386796d1b866b5dd08091672a70c-63df2.jpg 295w,\n/blog/static/laptopstickers1-ce10386796d1b866b5dd08091672a70c-f8fb9.jpg 590w,\n/blog/static/laptopstickers1-ce10386796d1b866b5dd08091672a70c-85e3d.jpg 885w,\n/blog/static/laptopstickers1-ce10386796d1b866b5dd08091672a70c-d1924.jpg 1180w,\n/blog/static/laptopstickers1-ce10386796d1b866b5dd08091672a70c-9452e.jpg 1770w,\n/blog/static/laptopstickers1-ce10386796d1b866b5dd08091672a70c-b2a60.jpg 3264w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    "}],"position":{"start":{"line":9,"column":1,"offset":124},"end":{"line":9,"column":53,"offset":176},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Nothing shows others better that you are a humble, totally epic developer, than putting really cheap stickers on your really expensive laptop!","position":{"start":{"line":11,"column":1,"offset":178},"end":{"line":11,"column":143,"offset":320},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":178},"end":{"line":11,"column":143,"offset":320},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"(Okay, I can’t be ","position":{"start":{"line":13,"column":1,"offset":322},"end":{"line":13,"column":19,"offset":340},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"that","position":{"start":{"line":13,"column":20,"offset":341},"end":{"line":13,"column":24,"offset":345},"indent":[]}}],"position":{"start":{"line":13,"column":19,"offset":340},"end":{"line":13,"column":25,"offset":346},"indent":[]}},{"type":"text","value":" humble since I’m bragging about a few 50","position":{"start":{"line":13,"column":25,"offset":346},"end":{"line":13,"column":66,"offset":387},"indent":[]}},{"type":"text","value":"¢","position":{"start":{"line":13,"column":66,"offset":387},"end":{"line":13,"column":72,"offset":393},"indent":[]}},{"type":"text","value":" stickers on a blog - and I’m even wrong on a second account - my Mac here is used, from 2013, and only set me back about $700 😄)","position":{"start":{"line":13,"column":72,"offset":393},"end":{"line":13,"column":202,"offset":523},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":322},"end":{"line":13,"column":202,"offset":523},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Tech stack","position":{"start":{"line":15,"column":3,"offset":527},"end":{"line":15,"column":13,"offset":537},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":525},"end":{"line":15,"column":13,"offset":537},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Okay, I’m lying; there are a few stickers there of tools I haven’t used in one of my applications yet, but am learning and plan to very soon:","position":{"start":{"line":17,"column":1,"offset":539},"end":{"line":17,"column":142,"offset":680},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":539},"end":{"line":17,"column":142,"offset":680},"indent":[]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Redux","position":{"start":{"line":19,"column":3,"offset":684},"end":{"line":19,"column":8,"offset":689},"indent":[]}}],"position":{"start":{"line":19,"column":3,"offset":684},"end":{"line":19,"column":8,"offset":689},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":682},"end":{"line":19,"column":8,"offset":689},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"TypeScript","position":{"start":{"line":20,"column":3,"offset":692},"end":{"line":20,"column":13,"offset":702},"indent":[]}}],"position":{"start":{"line":20,"column":3,"offset":692},"end":{"line":20,"column":13,"offset":702},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":690},"end":{"line":20,"column":13,"offset":702},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"ReactiveX","position":{"start":{"line":21,"column":3,"offset":705},"end":{"line":21,"column":12,"offset":714},"indent":[]}}],"position":{"start":{"line":21,"column":3,"offset":705},"end":{"line":21,"column":12,"offset":714},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":703},"end":{"line":21,"column":12,"offset":714},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":682},"end":{"line":21,"column":12,"offset":714},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Otherwise, it’s my honest-to-goodness workflow tools.","position":{"start":{"line":23,"column":1,"offset":716},"end":{"line":23,"column":54,"offset":769},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":716},"end":{"line":23,"column":54,"offset":769},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"So You Wanna Be Cool Too, Eh?","position":{"start":{"line":25,"column":3,"offset":773},"end":{"line":25,"column":32,"offset":802},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":771},"end":{"line":25,"column":32,"offset":802},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"I ordered all of these on ","position":{"start":{"line":27,"column":1,"offset":804},"end":{"line":27,"column":27,"offset":830},"indent":[]}},{"type":"link","title":null,"url":"redbubble.com","children":[{"type":"text","value":"redbubble.com","position":{"start":{"line":27,"column":28,"offset":831},"end":{"line":27,"column":41,"offset":844},"indent":[]}}],"position":{"start":{"line":27,"column":27,"offset":830},"end":{"line":27,"column":57,"offset":860},"indent":[]}},{"type":"text","value":" No, no, it’s not what you think, its not an affiliate link! In fact, a good start portal for RedBubble is ","position":{"start":{"line":27,"column":57,"offset":860},"end":{"line":27,"column":164,"offset":967},"indent":[]}},{"type":"link","title":null,"url":"devstickers.com","children":[{"type":"text","value":"devstickers.com","position":{"start":{"line":27,"column":165,"offset":968},"end":{"line":27,"column":180,"offset":983},"indent":[]}}],"position":{"start":{"line":27,"column":164,"offset":967},"end":{"line":27,"column":198,"offset":1001},"indent":[]}},{"type":"text","value":". Unfortunately, I found I often had to find the 4-per-page stickers in order to have a sticker size that was suitable for me, ","position":{"start":{"line":27,"column":198,"offset":1001},"end":{"line":27,"column":325,"offset":1128},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"obviously","position":{"start":{"line":27,"column":326,"offset":1129},"end":{"line":27,"column":335,"offset":1138},"indent":[]}}],"position":{"start":{"line":27,"column":325,"offset":1128},"end":{"line":27,"column":336,"offset":1139},"indent":[]}},{"type":"text","value":" so I could fit as many dev stickers as possible on my laptop 😂 - see the picture for reference.","position":{"start":{"line":27,"column":336,"offset":1139},"end":{"line":27,"column":433,"offset":1236},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":804},"end":{"line":27,"column":433,"offset":1236},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cheers! 🍺","position":{"start":{"line":29,"column":1,"offset":1238},"end":{"line":29,"column":11,"offset":1248},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":1238},"end":{"line":29,"column":11,"offset":1248},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":30,"column":1,"offset":1249}}}},{"id":"transformer-remark-markdown-ast-eba90b509d721eed284273fd04503412-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":{"type":"root","children":[{"type":"yaml","value":"title: An NPM Christmas Easter Egg\ndate: \"2017-12-24\"\ndraft: false","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":5,"column":4,"offset":74},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"No, It’s not Easter for Christmas…","position":{"start":{"line":7,"column":4,"offset":79},"end":{"line":7,"column":40,"offset":115},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":76},"end":{"line":7,"column":40,"offset":115},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"It’s a quick surprise for those celebrating christmas from npm!","position":{"start":{"line":8,"column":5,"offset":120},"end":{"line":8,"column":68,"offset":183},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":116},"end":{"line":8,"column":68,"offset":183},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Simply issue ","position":{"start":{"line":9,"column":1,"offset":184},"end":{"line":9,"column":14,"offset":197},"indent":[]}},{"type":"inlineCode","value":"npm xmas","position":{"start":{"line":9,"column":14,"offset":197},"end":{"line":9,"column":24,"offset":207},"indent":[]}},{"type":"text","value":" in your terminal:","position":{"start":{"line":9,"column":24,"offset":207},"end":{"line":9,"column":42,"offset":225},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":184},"end":{"line":9,"column":42,"offset":225},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"npm-christmas.png","alt":"A nice little Christmas tree","position":{"start":{"line":11,"column":1,"offset":227},"end":{"line":11,"column":51,"offset":277},"indent":[]},"value":"\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/npm-christmas-2a17567402dd88093188006fb75ee2b6-650df.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 104.14364640883977%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAACQklEQVQ4y61U2XLaQBDkLeEQQZbA5pIT0AGyIqFbCCQQ2HGl/BDHqeT//6QzWlEYh8Ok7IepkWZ2e3t6ZrcU6GO4YwVeosLVFbgGmavCv3IQfEowF39iJj4yi/hb8j8w5e8p/oSwkSEi++U94Lua4E/wgJJVlWGXj5tbO53/10qT8vDkAq9Jnn9HQAb2boCCTLqtSLc1+z4L0KkqR5OOKGPWjKk5OuwLilXewjBn1DRhNwxEoolM8mGLbwFkuinw6yGWEvkBMb2cngFYOcIu7zAnw+cCuFUDt4MUseq/quVhhrRp2TeYZveqgjlvIKXynYqCuP/1pJb7gAR2KwTUiDHWfIRF16JOa1gJPhLOLtaI/wEYE5PoovjOr17SJrY9jzS92cpwai5fAm70Ca9jRALd6c21dLoe5pzFGpSXm1wlR7XcA8wZPA0eqSwTYZtYNfRtfjlcYNYaIWhQs4TxQS2fATcnJp0QK6koe6lncKSQjY9d0/Dbu0PWDajzGhZ196CWW0CnR13seIgHhfBZy8Ts0sBCshDyasEw1zLfyI12ZvUQILELSJ+sHbLg6otFb+MKXt3HNNeNAIJehJS38E2hA2l8PN58UdnOYA+pLBMLwcF6dEcaakg7VtHxfrodlZAkmNYmiHsJNUdGyjnkR3t3vDShgDM04EkaZopFpSt0wJj5QJrAbhWl+Z8pTiPk9m8QdHWWnw+L9btavv4eCvLZTxcD1D72oX+4hltWn58t0sitFf+sLDbQGjOWr6pHAf8CkhZRHCiOkhwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"A nice little Christmas tree\"\n        title=\"\"\n        src=\"/blog/static/npm-christmas-2a17567402dd88093188006fb75ee2b6-fb8a0.png\"\n        srcset=\"/blog/static/npm-christmas-2a17567402dd88093188006fb75ee2b6-1a291.png 148w,\n/blog/static/npm-christmas-2a17567402dd88093188006fb75ee2b6-2bc4a.png 295w,\n/blog/static/npm-christmas-2a17567402dd88093188006fb75ee2b6-fb8a0.png 590w,\n/blog/static/npm-christmas-2a17567402dd88093188006fb75ee2b6-650df.png 724w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    "}],"position":{"start":{"line":11,"column":1,"offset":227},"end":{"line":11,"column":51,"offset":277},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"(You would learned this only if you been a good boy or girl and read NPM’s recent Newsletter 😄😉)","position":{"start":{"line":13,"column":1,"offset":279},"end":{"line":13,"column":99,"offset":377},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":279},"end":{"line":13,"column":99,"offset":377},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Another fun fact - the tree is not deterministic! Give it a few runs and you’ll see what I mean.","position":{"start":{"line":15,"column":1,"offset":379},"end":{"line":15,"column":97,"offset":475},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":379},"end":{"line":15,"column":97,"offset":475},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Merry Christmas and a Happy New Year everyone!","position":{"start":{"line":17,"column":1,"offset":477},"end":{"line":17,"column":47,"offset":523},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":477},"end":{"line":17,"column":47,"offset":523},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":18,"column":1,"offset":524}}}},{"id":"transformer-remark-markdown-html-b02412cc3e1bf0bb135f9af046fcad33-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":"<p>Warning everyone - this is a bit of rant post - but I hope some of you will agree and we can turn the tables of a stubborn community a bit.</p>\n<h1>The Full Stack Myth?</h1>\n<p>Much to my surprise, throughout my various software engineering media consumption adventures - I’ve discovered there is a general consensus that the idea of ‘full stack’ is FAKE NEWS. Lots of people on podcasts say it I say screw that. That is a lot like saying, “oh hey, did you know it’s impossible to write great apps or games if you’re a solo developer?” or, “What?!?! A nice dynamic UI, <em>with</em> a relational database backend <em>and</em> a websocket to send messages between the two!?!? You’re a madman!!!“.</p>\n<p>Wait a second - isn’t that what this whole Web 3.0 stuff is supposed to do? Empower developers to make great apps all by themselves? I mean jeez, I know us, we’ve spent hours on hours learning python, backend databases, container deploys, dabbled in numerous backend frameworks, not even getting started with your favorite modern front end framework of choice (yeah, there’s a lot of those too!) like Vue, React, Ember or more.</p>\n<p>Of course full stack developers know they are more a less a jack of all trades, master of none. I know there are people who could kick my ass at both Postgresql database maintenance, and there are just as many frontend people who could totally kick my ass with a badass UI in React.</p>\n<p>For me, full stack has always been about the adventure of software itself - its the nature of the discipline in fact - there are new tools being rolled out literally every day. I mean, really, if you’ve written backend code for databases but have also built websites (I know there are many of us out there!)- how are you supposed to write that succinctly on a resume or CV? “Hi, I’m Chris, part-time-database-program-writer-and-part-time-front-end-engineer”? I do concede that the moniker ‘full stack’ is not really a good enough description by itself. In my case, I could say ‘full stack <em>web developer</em>’. With more practice, maybe someday a full stack <em>android developer</em> - but I need to run through a lot more projects before that happens :)</p>\n<h1>:wine: A Toast to Full Stack Developers :wine:</h1>\n<p>Just because we’re not the greatest, most amazing expert in a certain language, just because we don’t know certain frameworks, just because we haven’t focused in one software engineering discipline our entire careers…</p>\n<p><em>Shouldn’t we still be able to call ourselves full stack developers?</em></p>\n<p><strong>Of course.</strong></p>"},{"id":"transformer-remark-markdown-html-aab872ec4aa1f1e0b0c375dbf6ca4c06-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":"<h1>Add some spice to your SAPUI5 apps!</h1>\n<h2>(Or even normal webapps, for that matter)</h2>\n<p>I was a noob. I wrote in my SAPUI5 some warehouse task code that would have a real time. How did I do it?</p>\n<p>I wrote a <code>window.setInterval()</code> function that would ping table <code>/SCWM/WT</code> 😊 and check for any new lines - with an OData <code>GET_ENTITY_SET</code> server request. 😊 😊</p>\n<p>Yeah.</p>\n<p>Well, I was lucky to learn about websockets from one of our EWM. Then I was even luckier to learn a bit more about the technical aspects (when to subscribe, unsubscribe, destroy, and create websockets instances from actions on the front end).</p>\n<p>So here’s how to add websockets to your SAPUI5 app<sup><a href=\"#footnote-1\">1</a></sup>.</p>\n<h2>Transactions</h2>\n<p>All backend push and messaging channels can be managed with just two transactions:  <code>SAMC</code>, for message channels and <code>SAPC</code>, for push channels. Easy enough.</p>\n<h2>Creating a Message Channel</h2>\n<p>As we will see, to create a proper push channel, we will first need a message channel, so that is where we start off. An ABAP message channel is a way of subscribing current programs to any - the best thing about push channels is that if the push channel <em>isn’t</em> listening, there is no error and nothing else negative happens anywhere else in the system - that is, granted you <code>TRY</code> and <code>CATCH</code> your push channel messaging properly.</p>\n<p>So let’s get started in transaction <code>SAMC</code>:</p>\n<p></p>\n<p>We define the message channel name, and, most importantly, define what programs can use this message channel and what type of message this channel will handle (there are only 2 - numeric and string)</p>\n<p>Now, as I mention before, we use these channels to hook into any ABAP program, so that any time they are executed by anyone (or anything) in the system, the channel will be messages. A safe way to hook into an existing program (using our newly created <code>Z_AWESOME_CHANNEL</code>) looks as follows:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">REPORT</span> my_super_cool_existing_report\n</code></pre>\n      </div>\n<h2>Creating a Push Channel</h2>\n<p>Ok, now we head to transaction <code>SAPC</code> - we are no going to define a websocket that will be hooked up to our push channel. That way, when something happens in our program, it will message to all subscribed channels, which will be forwarded , and then ultimately, to the most important part, the frontend for our user to see!</p>\n<h2>Frontend</h2>\n<p>On the frontend I create a general websocket function that creates a websocket instance. In order to have the correct service for each view, upon each view change I call this function, which always creates a new instance if there exists a websocket instance already. This way we are sure that on any view change, we have a fresh running instance of the websocket doing the correct task for this view.</p>\n<p>That function looks like this:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-none\"><code></code></pre>\n      </div>\n<p>Note that you of course have to us <code>ws://</code> as the protocol in the link name!</p>\n<p>On the backend, that ends up looking like a <code>CASE</code> statement:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">CASE</span>\n</code></pre>\n      </div>\n<h2>Code</h2>\n<p>Yep, you’re going to have to write some ABAP code too. Luckily for us, when we create a push channel in transaction SAPC, SAP generates a class skeleton with 4 methods:</p>\n<p><code></code>\n<code></code>\n<code></code></p>\n<hr/>\n<h1>Footnotes</h1>\n<div id=\"footnote-1\">\n1. Note that unfortunately the SAP Web IDE does not yet support websockets, that is, without network wizardry. I haven't managed to get it to work. I've left  long ago a message with the person who was the lead on Cloud Connector asking if websocket (`ws` protocol) would eventually something to be supported, but haven't heard anything.\n</div>"},{"id":"transformer-remark-markdown-html-032861647cfa98891866fc7299236b99-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":"<h2>Full stack</h2>\n<p>This post is going to go through how I built <a href=\"raiblocks-charts.herokuapp.com\">raiblocks-charts.herokuapp.com</a></p>"},{"id":"transformer-remark-markdown-html-e4e464cecd740f4966726934362ad719-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":"<h2>This is a Must-Have Tool for any ABAP Developer!</h2>\n<p>Did you ever find you wanted to debug something in SAP GUI right on a certain command or action, but it was in a popup? You can’t access the command line to enter <code>\\h</code>! Well, now you can with this amazing SAP shortcut!</p>\n<p>Open any text editor and add the following:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-txt\"><code>[System]\nName=ERP\nDescription=My company's super awesome ERP system name\nClient=100\n[User]\nName=CHRIS_IS_AWESOME\nLanguage=EN\n[Function]\nTitle=Debugging\nCommand=/h\nType=SystemCommand\n[Configuration]\nWorkDir=\\\\SomePath\\To_a_working_directory\n[Options]\nReuse=0</code></pre>\n      </div>\n<p>Note that the <code>Name</code> (under <code>[System]</code>), <code>Client</code>, <code>Name</code> (under <code>[User]</code>), and <code>WorkDir</code> should all be set to your specific setup. (That’s why I’ve put obvious bogus names for each of them 😄 ).</p>\n<p>I keep a copy of mine on my desktop and in my documents directory, as <code>debugging.sap</code>, so it’s always close at hand.</p>\n<p>Whenever you need to debug something running from a popup, just drag and drop this shortcut into the window you want to debug! (either pressing enter in a field or pressing a button to continue the process in the GUI.)</p>\n<p>*** Common gotchya: Things like pressing F4 or clicking the entry help button on any fields will also bring up the debugger after you have dragged and dropped this GUI shortcut - so, make sure you press the button/do the action of exactly what you want to debug!</p>"},{"id":"transformer-remark-markdown-html-7c93f05bfa5efee2177a3e93c6c0611a-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":"<h2>And some common gotchyas, too</h2>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">*                          S A P M S S Y 0</span>\n<span class=\"token comment\">*                  system routines for ABAP processing</span>\n<span class=\"token comment\">*</span>\n<span class=\"token comment\">*                  (must be declared as FUNCTION-POOL)</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">function-pool</span> sapmssy0  <span class=\"token keyword\">message-id</span> <span class=\"token number\">02</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">include</span> &lt;%_list><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">include</span> &lt;sys000><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">include</span> tskhincl<span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">tables</span><span class=\"token punctuation\">:</span> tfdir<span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span>  orders          <span class=\"token keyword\">type</span> <span class=\"token keyword\">standard</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">of</span> %_commit_orders<span class=\"token punctuation\">,</span>\n                                                  <span class=\"token eol-comment comment\">\"ON COMMIT orders</span>\n       rb_orders       <span class=\"token keyword\">type</span> <span class=\"token keyword\">standard</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">of</span> %_commit_orders<span class=\"token punctuation\">,</span>\n                                                  <span class=\"token eol-comment comment\">\"ON ROLLBACK orders</span>\n       imode_orders    <span class=\"token keyword\">type</span> <span class=\"token keyword\">standard</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">of</span> %_commit_orders<span class=\"token punctuation\">,</span>\n                                                  <span class=\"token eol-comment comment\">\"POC in CALL DIALOG</span>\n       imode_rb_orders <span class=\"token keyword\">type</span> <span class=\"token keyword\">standard</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">of</span> %_commit_orders<span class=\"token punctuation\">.</span>\n<span class=\"token eol-comment comment\">\"POR in CALL DIALOG</span>\n<span class=\"token comment\">* for RTM test concerning POC during OS event handling</span>\n<span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> os_orders        <span class=\"token keyword\">type</span> <span class=\"token keyword\">hashed</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">of</span> %_commit_orders\n                            <span class=\"token keyword\">with</span> <span class=\"token keyword\">unique</span> <span class=\"token keyword\">key</span> prog rout<span class=\"token punctuation\">.</span>      <span class=\"token eol-comment comment\">\"#EC NEEDED</span>\n<span class=\"token eol-comment comment\">\"OS ON COMMIT orders</span>\n<span class=\"token comment\">* end RTM</span>\n\n<span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span>  %_vbkey <span class=\"token keyword\">type</span> %_vbkey <span class=\"token keyword\">value</span> <span class=\"token string\">'%_'</span><span class=\"token punctuation\">,</span>                     <span class=\"token eol-comment comment\">\"#EC *</span>\n       %%vbkey <span class=\"token keyword\">type</span> %_vbkey <span class=\"token keyword\">value</span> <span class=\"token string\">'%%'</span><span class=\"token punctuation\">,</span>\n       %_vb_calls <span class=\"token keyword\">type</span> %_vb_calls <span class=\"token keyword\">occurs</span> <span class=\"token number\">50</span> <span class=\"token keyword\">with</span> <span class=\"token keyword\">header</span> <span class=\"token keyword\">line</span><span class=\"token punctuation\">.</span>\"#EC <span class=\"token operator\">*</span>\n<span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span>  i_level <span class=\"token keyword\">type</span> <span class=\"token keyword\">i</span> <span class=\"token keyword\">value</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">data</span> <span class=\"token punctuation\">:</span> arfc_pending <span class=\"token keyword\">type</span> <span class=\"token keyword\">c</span><span class=\"token punctuation\">,</span>\n       trfc_nowait_for_update <span class=\"token keyword\">type</span> <span class=\"token keyword\">c</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* bgRFC: something todo at COMMIT / ROLLBACK</span>\n<span class=\"token keyword\">data</span> <span class=\"token punctuation\">:</span> bgrfc_eot_action <span class=\"token keyword\">type</span> <span class=\"token keyword\">i</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* LDQ: something todo at COMMIT / ROLLBACK</span>\n<span class=\"token keyword\">data</span> <span class=\"token punctuation\">:</span> ldq_writer_eot_action <span class=\"token keyword\">type</span> <span class=\"token keyword\">i</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">data</span> <span class=\"token punctuation\">:</span> ldq_reader_eot_action <span class=\"token keyword\">type</span> <span class=\"token keyword\">i</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* O R D E R _ F O R M _ L E V E L</span>\n<span class=\"token comment\">* order given form to be run when work is committed</span>\n<span class=\"token comment\">*</span>\n<span class=\"token comment\">* Input : program name, form name, execution level</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_order_form_level <span class=\"token keyword\">using</span> prog rout u_level<span class=\"token punctuation\">.</span>            <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> allow_nested_poc<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">type</span> <span class=\"token keyword\">c</span><span class=\"token punctuation\">,</span>\n        caller <span class=\"token keyword\">type</span> sy<span class=\"token token-operator punctuation\">-</span>repid<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> mpar1<span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mpar2<span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mpar3<span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mpar4<span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> imode_orders_wa <span class=\"token keyword\">type</span> %_commit_orders<span class=\"token punctuation\">,</span>\n        orders_wa <span class=\"token keyword\">type</span> %_commit_orders<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'N'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">call</span> <span class=\"token string\">'ThVBCall'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'OPCODE'</span> <span class=\"token keyword\">field</span> get_vb_key  <span class=\"token eol-comment comment\">\"#EC CI_CCALL</span>\n                    <span class=\"token keyword\">id</span> <span class=\"token string\">'VBKEY'</span>  <span class=\"token keyword\">field</span> %_vbkey<span class=\"token token-operator punctuation\">-</span>vbkey<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">import</span> imode_orders imode_rb_orders <span class=\"token keyword\">from</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %_vbkey<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">read</span> <span class=\"token keyword\">table</span> imode_orders\n      <span class=\"token keyword\">into</span> imode_orders_wa\n      <span class=\"token keyword\">with</span> <span class=\"token keyword\">key</span> prog <span class=\"token operator\">=</span> prog\n               rout <span class=\"token operator\">=</span> rout\n      <span class=\"token keyword\">binary</span> <span class=\"token keyword\">search</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">describe</span> <span class=\"token keyword\">table</span> imode_orders <span class=\"token keyword\">lines</span> i_level<span class=\"token punctuation\">.</span>\n      imode_orders_wa<span class=\"token token-operator punctuation\">-</span>prog <span class=\"token operator\">=</span> prog<span class=\"token punctuation\">.</span>\n      imode_orders_wa<span class=\"token token-operator punctuation\">-</span>rout <span class=\"token operator\">=</span> rout<span class=\"token punctuation\">.</span>\n      imode_orders_wa<span class=\"token token-operator punctuation\">-</span>i_level <span class=\"token operator\">=</span> i_level<span class=\"token punctuation\">.</span>\n      imode_orders_wa<span class=\"token token-operator punctuation\">-</span>u_level <span class=\"token operator\">=</span> u_level<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">insert</span> imode_orders_wa <span class=\"token keyword\">into</span> imode_orders <span class=\"token keyword\">index</span> sy<span class=\"token token-operator punctuation\">-</span>tabix<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">export</span> imode_orders imode_rb_orders <span class=\"token keyword\">to</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %_vbkey<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">else</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'P'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*     already in PERFORM ON COMMIT</span>\n      <span class=\"token keyword\">call</span> <span class=\"token string\">'C_SAPGPARAM'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'NAME'</span>  <span class=\"token keyword\">field</span> <span class=\"token string\">'abap/allow_nested_poc'</span>  <span class=\"token eol-comment comment\">\"#EC CI_CCALL</span>\n                         <span class=\"token keyword\">id</span> <span class=\"token string\">'VALUE'</span> <span class=\"token keyword\">field</span> allow_nested_poc<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">if</span> allow_nested_poc <span class=\"token operator\">&lt;></span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*       nested PERFORM ON COMMIT not allowed</span>\n        <span class=\"token keyword\">call</span> <span class=\"token string\">'AB_GET_CALLER'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'PROGRAM'</span> <span class=\"token keyword\">field</span> caller<span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"#EC CI_CCALL</span>\n        <span class=\"token keyword\">if</span> caller <span class=\"token operator\">&lt;></span> <span class=\"token string\">'SAPMSSY0'</span><span class=\"token punctuation\">.</span>\n          mpar1 <span class=\"token operator\">=</span> <span class=\"token string\">'NESTED_PERFORM_ON_COMMIT'</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">concatenate</span> <span class=\"token string\">'caller:'</span>  caller <span class=\"token keyword\">into</span> mpar2 <span class=\"token keyword\">separated</span> <span class=\"token keyword\">by</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">concatenate</span> <span class=\"token string\">'program:'</span> prog   <span class=\"token keyword\">into</span> mpar3 <span class=\"token keyword\">separated</span> <span class=\"token keyword\">by</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">concatenate</span> <span class=\"token string\">'form:'</span>    rout   <span class=\"token keyword\">into</span> mpar4 <span class=\"token keyword\">separated</span> <span class=\"token keyword\">by</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*         switch back kernel flag: just for sure.</span>\n          <span class=\"token keyword\">call</span> <span class=\"token string\">'SET_SWITCH_TXEND'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"#EC CI_CCALL</span>\n<span class=\"token comment\">*         issue short dump</span>\n          <span class=\"token keyword\">message</span> x081<span class=\"token punctuation\">(</span><span class=\"token number\">00</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">with</span> mpar1 mpar2 mpar3 mpar4<span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">read</span> <span class=\"token keyword\">table</span> orders\n      <span class=\"token keyword\">into</span> orders_wa\n      <span class=\"token keyword\">with</span> <span class=\"token keyword\">key</span> prog <span class=\"token operator\">=</span> prog\n               rout <span class=\"token operator\">=</span> rout\n      <span class=\"token keyword\">binary</span> <span class=\"token keyword\">search</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">describe</span> <span class=\"token keyword\">table</span> orders <span class=\"token keyword\">lines</span> i_level<span class=\"token punctuation\">.</span>\n      orders_wa<span class=\"token token-operator punctuation\">-</span>prog <span class=\"token operator\">=</span> prog<span class=\"token punctuation\">.</span>\n      orders_wa<span class=\"token token-operator punctuation\">-</span>rout <span class=\"token operator\">=</span> rout<span class=\"token punctuation\">.</span>\n      orders_wa<span class=\"token token-operator punctuation\">-</span>i_level <span class=\"token operator\">=</span> i_level<span class=\"token punctuation\">.</span>\n      orders_wa<span class=\"token token-operator punctuation\">-</span>u_level <span class=\"token operator\">=</span> u_level<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">insert</span> orders_wa <span class=\"token keyword\">into</span> orders <span class=\"token keyword\">index</span> sy<span class=\"token token-operator punctuation\">-</span>tabix<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*   for RTM test concerning POC during OS event handling</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">.</span>\n      orders_wa<span class=\"token token-operator punctuation\">-</span>prog <span class=\"token operator\">=</span> prog<span class=\"token punctuation\">.</span>\n      orders_wa<span class=\"token token-operator punctuation\">-</span>rout <span class=\"token operator\">=</span> rout<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">insert</span> orders_wa <span class=\"token keyword\">into</span> <span class=\"token keyword\">table</span> os_orders<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*   end RTM</span>\n\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_order_form_level</span>\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* O R D E R _ F O R M _ F O R _ R O L L B A C K</span>\n<span class=\"token comment\">* order given form to be run when work is rolled back</span>\n<span class=\"token comment\">* Input : program name, form name</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_order_form_for_rollback <span class=\"token keyword\">using</span> prog rout<span class=\"token punctuation\">.</span>             <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> mpar1<span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mpar2<span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mpar3<span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mpar4<span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        caller <span class=\"token keyword\">type</span> sy<span class=\"token token-operator punctuation\">-</span>repid<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> rb_orders_wa       <span class=\"token keyword\">type</span> %_commit_orders<span class=\"token punctuation\">,</span>\n        imode_rb_orders_wa <span class=\"token keyword\">type</span> %_commit_orders<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'N'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">call</span> <span class=\"token string\">'ThVBCall'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'OPCODE'</span> <span class=\"token keyword\">field</span> get_vb_key  <span class=\"token eol-comment comment\">\"#EC CI_CCALL</span>\n                    <span class=\"token keyword\">id</span> <span class=\"token string\">'VBKEY'</span>  <span class=\"token keyword\">field</span> %_vbkey<span class=\"token token-operator punctuation\">-</span>vbkey<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">import</span> imode_orders imode_rb_orders <span class=\"token keyword\">from</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %_vbkey<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">read</span> <span class=\"token keyword\">table</span> imode_rb_orders\n      <span class=\"token keyword\">into</span> imode_rb_orders_wa\n      <span class=\"token keyword\">with</span> <span class=\"token keyword\">key</span> prog <span class=\"token operator\">=</span> prog\n           rout <span class=\"token operator\">=</span> rout\n      <span class=\"token keyword\">binary</span> <span class=\"token keyword\">search</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">describe</span> <span class=\"token keyword\">table</span> imode_rb_orders <span class=\"token keyword\">lines</span> i_level<span class=\"token punctuation\">.</span>\n      imode_rb_orders_wa<span class=\"token token-operator punctuation\">-</span>prog <span class=\"token operator\">=</span> prog<span class=\"token punctuation\">.</span>\n      imode_rb_orders_wa<span class=\"token token-operator punctuation\">-</span>rout <span class=\"token operator\">=</span> rout<span class=\"token punctuation\">.</span>\n      imode_rb_orders_wa<span class=\"token token-operator punctuation\">-</span>i_level <span class=\"token operator\">=</span> i_level<span class=\"token punctuation\">.</span>\n      imode_rb_orders_wa<span class=\"token token-operator punctuation\">-</span>u_level <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">insert</span> imode_rb_orders_wa <span class=\"token keyword\">into</span> imode_rb_orders <span class=\"token keyword\">index</span> sy<span class=\"token token-operator punctuation\">-</span>tabix<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">export</span> imode_orders imode_rb_orders <span class=\"token keyword\">to</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %_vbkey<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">else</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'P'</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">call</span> <span class=\"token string\">'AB_GET_CALLER'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'PROGRAM'</span> <span class=\"token keyword\">field</span> caller<span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"#EC CI_CCALL</span>\n      mpar1 <span class=\"token operator\">=</span> <span class=\"token string\">'NESTED_PERFORM_ON_ROLLBACK'</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">concatenate</span> <span class=\"token string\">'caller:'</span>  caller <span class=\"token keyword\">into</span> mpar2 <span class=\"token keyword\">separated</span> <span class=\"token keyword\">by</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">concatenate</span> <span class=\"token string\">'program:'</span> prog   <span class=\"token keyword\">into</span> mpar3 <span class=\"token keyword\">separated</span> <span class=\"token keyword\">by</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">concatenate</span> <span class=\"token string\">'form:'</span>    rout   <span class=\"token keyword\">into</span> mpar4 <span class=\"token keyword\">separated</span> <span class=\"token keyword\">by</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*     switch back kernel flag: just for sure.</span>\n      <span class=\"token keyword\">call</span> <span class=\"token string\">'SET_SWITCH_TXEND'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*     already in PERFORM ON ROLLBACK issue short dump</span>\n      <span class=\"token keyword\">message</span> x081<span class=\"token punctuation\">(</span><span class=\"token number\">00</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">with</span> mpar1 mpar2 mpar3 mpar4<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">read</span> <span class=\"token keyword\">table</span> rb_orders <span class=\"token keyword\">into</span> rb_orders_wa\n      <span class=\"token keyword\">with</span> <span class=\"token keyword\">key</span> prog <span class=\"token operator\">=</span> prog\n               rout <span class=\"token operator\">=</span> rout\n      <span class=\"token keyword\">binary</span> <span class=\"token keyword\">search</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">describe</span> <span class=\"token keyword\">table</span> rb_orders <span class=\"token keyword\">lines</span> i_level<span class=\"token punctuation\">.</span>\n      rb_orders_wa<span class=\"token token-operator punctuation\">-</span>prog <span class=\"token operator\">=</span> prog<span class=\"token punctuation\">.</span>\n      rb_orders_wa<span class=\"token token-operator punctuation\">-</span>rout <span class=\"token operator\">=</span> rout<span class=\"token punctuation\">.</span>\n      rb_orders_wa<span class=\"token token-operator punctuation\">-</span>i_level <span class=\"token operator\">=</span> i_level<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">insert</span> rb_orders_wa <span class=\"token keyword\">into</span> rb_orders <span class=\"token keyword\">index</span> sy<span class=\"token token-operator punctuation\">-</span>tabix<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_order_form_for_rollback</span>\n\n\n<span class=\"token comment\">*---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*  %_COMMIT_PREPARE                                                   *</span>\n<span class=\"token comment\">*  Set date and time for aRFC</span>\n<span class=\"token comment\">*---------------------------------------------------------------------*</span>\n<span class=\"token keyword\">form</span> %_commit_prepare <span class=\"token keyword\">using</span> <span class=\"token keyword\">date</span> <span class=\"token keyword\">time</span><span class=\"token punctuation\">.</span>                      <span class=\"token eol-comment comment\">\"#EC *</span>\n\n  %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_time <span class=\"token operator\">=</span> <span class=\"token keyword\">time</span><span class=\"token punctuation\">.</span>\n  %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date <span class=\"token operator\">=</span> <span class=\"token keyword\">date</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_commit_prepare</span>\n\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token comment\">* FORM %_BEFORE_COMMIT</span>\n<span class=\"token comment\">* called from RSYN commit.rs1</span>\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_before_commit<span class=\"token punctuation\">.</span>                                       <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> l_oncom <span class=\"token keyword\">like</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> txend <span class=\"token keyword\">type</span> <span class=\"token keyword\">c</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* forbid COMMIT if already in ON ROLLBACK handling</span>\n<span class=\"token comment\">* allow COMMIT during ON COMMIT for backward compatibilty</span>\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'GET_SWITCH_TXEND'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> txend<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">if</span> txend <span class=\"token operator\">=</span> <span class=\"token string\">'R'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">message</span> x085<span class=\"token punctuation\">(</span><span class=\"token number\">00</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* COMMIT during CALL DIALOG/SUBMIT, POC, Update task</span>\n<span class=\"token comment\">* or End Transaction event?</span>\n  <span class=\"token keyword\">check</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'N'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'P'</span> <span class=\"token keyword\">and</span>\n        sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'E'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'V'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* change sy-oncom to avoid recursion</span>\n  l_oncom <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">.</span>                      <span class=\"token eol-comment comment\">\"E = Event Handling</span>\n\n<span class=\"token comment\">* no escape out off this form other than ENDFORM</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">set</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* Hook for Process Information Infrastructure</span>\n  <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'SPI_AGENT_COMMIT'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* Raise event 'Commit Requested' for Object Manager</span>\n  <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> cl_os_transaction_end_notifier<span class=\"token token-operator punctuation\">=></span>raise_commit_requested<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* restore sy-oncom</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> l_oncom<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* reset marker on call stack.</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">reset</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_before_commit</span>\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* C O M M I T</span>\n<span class=\"token comment\">* commit work</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_commit<span class=\"token punctuation\">.</span>                                              <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> %_state<span class=\"token punctuation\">,</span> %_direct_utask_active<span class=\"token punctuation\">.</span>                     <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> l_lines   <span class=\"token keyword\">like</span> sy<span class=\"token token-operator punctuation\">-</span>tabix<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> %_enqkey  <span class=\"token keyword\">type</span> eqeusrvb<span class=\"token punctuation\">.</span>                            <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> %_enqdone <span class=\"token keyword\">type</span> <span class=\"token keyword\">c</span><span class=\"token punctuation\">.</span>                                   <span class=\"token eol-comment comment\">\"#EC *</span>\n\n<span class=\"token comment\">* status processing of set update task local</span>\n<span class=\"token comment\">* value 'E': local update is active. Export tRFC/qRFC to memory!</span>\n<span class=\"token comment\">* value 'S': local update is active. Map the dialog tRFC/qRFC to called update trfc/qRFC.</span>\n<span class=\"token comment\">*            Import tRFC/qRFC form memory! Save it to the Database.</span>\n<span class=\"token comment\">* value 'X': local update is active. Execute the tRFC/qRFC within the Dialog workprocess.</span>\n\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> l_local_vb_status <span class=\"token keyword\">type</span> <span class=\"token keyword\">c</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* COMMIT during POC, Update task or End Transaction event?</span>\n  <span class=\"token keyword\">check</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'P'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'E'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'V'</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* no escape out off this form other than ENDFORM</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">set</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'ThVBCall'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'OPCODE'</span>  <span class=\"token keyword\">field</span> get_vb_key\n                  <span class=\"token keyword\">id</span> <span class=\"token string\">'VBKEY'</span>   <span class=\"token keyword\">field</span> %%vbkey<span class=\"token token-operator punctuation\">-</span>vbkey<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'N'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*   Not in CALL DIALOG</span>\n    %_vbkey<span class=\"token token-operator punctuation\">-</span>vbkey <span class=\"token operator\">=</span> %%vbkey<span class=\"token token-operator punctuation\">-</span>vbkey<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">perform</span> %_process_p_o_c<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*   Check if local update task is switched on?</span>\n    <span class=\"token keyword\">call</span> <span class=\"token string\">'GET_SWITCH_UTASK'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'MODE'</span>  <span class=\"token keyword\">field</span> <span class=\"token string\">'S'</span>\n                            <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> %_state<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> %_state <span class=\"token keyword\">eq</span> <span class=\"token string\">'N'</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">free</span> %_vb_calls<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">import</span> %_vb_calls <span class=\"token keyword\">from</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %%vbkey<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">describe</span> <span class=\"token keyword\">table</span> %_vb_calls <span class=\"token keyword\">lines</span> l_lines<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">if</span> l_lines <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*       Local update task is active,</span>\n<span class=\"token comment\">*       export the called tRFC/qRFCs from dialog to memory within arfc_end_transaction.</span>\n        l_local_vb_status <span class=\"token operator\">=</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*     Within sapmssy4 (commit work) we have to import and save all dia tRFC/qRFC</span>\n<span class=\"token comment\">*     in arfc_end_transaction</span>\n      <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>cprog <span class=\"token operator\">=</span> <span class=\"token string\">'SAPMSSY4'</span><span class=\"token punctuation\">.</span>\n        l_local_vb_status <span class=\"token operator\">=</span> <span class=\"token string\">'S'</span><span class=\"token punctuation\">.</span>\n        arfc_pending <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n\n    <span class=\"token keyword\">if</span> arfc_pending <span class=\"token operator\">&lt;></span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n      arfc_pending <span class=\"token operator\">=</span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">if</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>dontsend <span class=\"token operator\">&lt;></span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n        %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date  <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>datum<span class=\"token punctuation\">.</span>\n        %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_time  <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>uzeit <span class=\"token operator\">+</span> <span class=\"token number\">3600</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n      <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'ARFC_END_TRANSACTION'</span>\n        <span class=\"token keyword\">exporting</span>\n          <span class=\"token keyword\">mode</span>              <span class=\"token operator\">=</span> <span class=\"token string\">'COMMIT'</span>\n          starttime         <span class=\"token operator\">=</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_time\n          startdate         <span class=\"token operator\">=</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date\n          utask_local_state <span class=\"token operator\">=</span> l_local_vb_status\n          vbkey             <span class=\"token operator\">=</span> %%vbkey<span class=\"token token-operator punctuation\">-</span>vbkey\n          bgrfc_active      <span class=\"token operator\">=</span> bgrfc_eot_action<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*      clear %_sys000-arfc-send_time.</span>\n<span class=\"token comment\">*      clear %_sys000-arfc-send_date.</span>\n<span class=\"token comment\">*      clear %_sys000-arfc-dontsend.</span>\n\n<span class=\"token comment\">***************</span>\n<span class=\"token comment\">*   bgRFC</span>\n<span class=\"token comment\">***************</span>\n<span class=\"token comment\">*     Update task in Asynchronous mode!</span>\n<span class=\"token comment\">*     Wenn arfc_pending &lt;> SPACE dann wurde bereits durch classic qRFC der arfc_end_vb</span>\n<span class=\"token comment\">*     getriggert, falls lokale Verbuchung nicht aktiv ist.</span>\n<span class=\"token comment\">*     N = asynch. update task switched off: direct updates</span>\n      <span class=\"token keyword\">if</span> bgrfc_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"something happened with bgRFC</span>\n<span class=\"token comment\">*       In current LUW classic t/qRFC and bgRFC was called</span>\n\n        <span class=\"token keyword\">if</span> trfc_nowait_for_update <span class=\"token operator\">&lt;></span> <span class=\"token keyword\">space</span> <span class=\"token keyword\">OR</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date <span class=\"token keyword\">is</span> <span class=\"token keyword\">not</span> <span class=\"token keyword\">initial</span><span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"ARFC_END_VB wurde nicht im tRFC/qRFC gerufen</span>\n          <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_time<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>dontsend<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_BGRFC_DB_HELPER'</span><span class=\"token punctuation\">)</span>=>on_commit\n            <span class=\"token keyword\">exporting</span>\n              arfc_end_vb_already_called <span class=\"token operator\">=</span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" ARFC_END_VB wurde bereits im tRFC/qrfc gerufen.</span>\n          <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_time<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>dontsend<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_BGRFC_DB_HELPER'</span><span class=\"token punctuation\">)</span>=>on_commit\n            <span class=\"token keyword\">exporting</span>\n              arfc_end_vb_already_called <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">else</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_time<span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date<span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>dontsend<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*      clear %_sys000-arfc-send_time.</span>\n<span class=\"token comment\">*      clear %_sys000-arfc-send_date.</span>\n<span class=\"token comment\">*      clear %_sys000-arfc-dontsend.</span>\n\n<span class=\"token comment\">*   Wenn kein classic qRFC getriggert und keine lokale Verbuchung, dann</span>\n<span class=\"token comment\">*   muss ARFC_END_VB von bgRFC getriggert werden.</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">if</span> bgrfc_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"something happened with bgRFC</span>\n<span class=\"token comment\">*       In current LUW only bgRFC was called</span>\n        <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_BGRFC_DB_HELPER'</span><span class=\"token punctuation\">)</span>=>on_commit\n          <span class=\"token keyword\">exporting</span>\n            arfc_end_vb_already_called <span class=\"token operator\">=</span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">***************************</span>\n<span class=\"token comment\">*   Local Data Queue (LDQ)</span>\n<span class=\"token comment\">***************************</span>\n    <span class=\"token keyword\">if</span> ldq_writer_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"something happened with LDQ-Writer</span>\n      <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_LDQ_UNIT_WRITER'</span><span class=\"token punctuation\">)</span>=>on_commit<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">if</span> ldq_reader_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"something happened with LDQ-Reader</span>\n      <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_LDQ_UNIT_READER'</span><span class=\"token punctuation\">)</span>=>on_commit<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">if</span> %_state <span class=\"token keyword\">eq</span> <span class=\"token string\">'N'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*     N = asynch. update task switched off: direct updates</span>\n<span class=\"token comment\">*     free %_vb_calls.</span>\n<span class=\"token comment\">*     import %_vb_calls from memory id %%vbkey.</span>\n<span class=\"token comment\">*     describe table %_vb_calls lines l_lines.</span>\n      <span class=\"token keyword\">if</span> l_lines <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*       process direct updates (with the same vbkey)</span>\n        <span class=\"token keyword\">call</span> <span class=\"token string\">'ThVBCall'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'OPCODE'</span>  <span class=\"token keyword\">field</span> get_vb_key\n                        <span class=\"token keyword\">id</span> <span class=\"token string\">'VBKEY'</span>   <span class=\"token keyword\">field</span> %%vbkey<span class=\"token token-operator punctuation\">-</span>vbkey\n                        <span class=\"token keyword\">id</span> <span class=\"token string\">'ENQKEY'</span>  <span class=\"token keyword\">field</span> %_enqkey\n                        <span class=\"token keyword\">id</span> <span class=\"token string\">'ENQDONE'</span> <span class=\"token keyword\">field</span> %_enqdone<span class=\"token punctuation\">.</span>\n\n        <span class=\"token keyword\">submit</span> sapmssy4 <span class=\"token keyword\">with</span> vbkey_id <span class=\"token operator\">=</span> %%vbkey\n                        <span class=\"token keyword\">with</span> enqkey   <span class=\"token operator\">=</span> %_enqkey\n                        <span class=\"token keyword\">with</span> enqdone  <span class=\"token operator\">=</span> %_enqdone <span class=\"token keyword\">and</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*       Start new LUW, release locks that were acquired during dialog part</span>\n        <span class=\"token keyword\">call</span> <span class=\"token string\">'ThVBCall'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'OPCODE'</span>       <span class=\"token keyword\">field</span> reset_vb_enq_key\n                        <span class=\"token keyword\">id</span> <span class=\"token string\">'SYNC_DEQUEUE'</span> <span class=\"token keyword\">field</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* Call Dialog wurde gerufen; gerufene tRFC/qRFC Verarbeitung wie gehabt.</span>\n  <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'N'</span> <span class=\"token keyword\">or</span> l_local_vb_status <span class=\"token operator\">=</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> l_local_vb_status <span class=\"token operator\">=</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*     Lokale Verbuchung ist aktiv Ausführung im Dialog und UPD.</span>\n      l_local_vb_status <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>     <span class=\"token eol-comment comment\">\"Umsetzen auf Ausführung der trfc/qRFC im Dialog.</span>\n      arfc_pending      <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> arfc_pending <span class=\"token operator\">&lt;></span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n      arfc_pending <span class=\"token operator\">=</span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">if</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>dontsend <span class=\"token operator\">&lt;></span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n        %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date  <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>datum<span class=\"token punctuation\">.</span>\n        %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_time  <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>uzeit <span class=\"token operator\">+</span> <span class=\"token number\">3600</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n      <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'ARFC_END_TRANSACTION'</span>\n        <span class=\"token keyword\">exporting</span>\n          <span class=\"token keyword\">mode</span>              <span class=\"token operator\">=</span> <span class=\"token string\">'COMMIT'</span>\n          starttime         <span class=\"token operator\">=</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_time\n          startdate         <span class=\"token operator\">=</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date\n          utask_local_state <span class=\"token operator\">=</span> l_local_vb_status\n          vbkey             <span class=\"token operator\">=</span> %%vbkey<span class=\"token token-operator punctuation\">-</span>vbkey\n          bgrfc_active      <span class=\"token operator\">=</span> bgrfc_eot_action<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_time<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>send_date<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">clear</span> %_sys000<span class=\"token token-operator punctuation\">-</span>arfc<span class=\"token token-operator punctuation\">-</span>dontsend<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>binpt <span class=\"token keyword\">eq</span> <span class=\"token string\">'X'</span> <span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'BDC_END_TRANSACTION'</span><span class=\"token punctuation\">.</span>       <span class=\"token eol-comment comment\">\"ende einer trans in BI</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* clear memory containing registrations for PERFORM ON ROLLBACK.</span>\n<span class=\"token comment\">* delete imode_orders and imode_rb_orders only if not in CALL DIALOG</span>\n  <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'N'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">free</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %_vbkey<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> rb_orders<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* reset marker on call stack.</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">reset</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_commit</span>\n\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token comment\">* FORM %_AFTER_COMMIT</span>\n<span class=\"token comment\">* called from RSYN commit.rs1</span>\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_after_commit<span class=\"token punctuation\">.</span>                                        <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> %_direct_utask_active<span class=\"token punctuation\">,</span> %_task_state<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">type</span> <span class=\"token keyword\">x</span><span class=\"token punctuation\">.</span>      <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">i</span> <span class=\"token keyword\">type</span> <span class=\"token keyword\">i</span><span class=\"token punctuation\">,</span> j <span class=\"token keyword\">type</span> <span class=\"token keyword\">i</span><span class=\"token punctuation\">,</span> x4<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">type</span> <span class=\"token keyword\">x</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> l_update_task <span class=\"token keyword\">type</span> boolean <span class=\"token keyword\">value</span> <span class=\"token string\">'-'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> l_oncom <span class=\"token keyword\">like</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> l_subrc <span class=\"token keyword\">like</span> sy<span class=\"token token-operator punctuation\">-</span>subrc<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* COMMIT during CALL DIALOG/SUBMIT, POC, Update task</span>\n<span class=\"token comment\">* or End Transaction event?</span>\n  <span class=\"token keyword\">check</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'N'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'P'</span> <span class=\"token keyword\">and</span>\n        sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'E'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'V'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* change sy-oncom to avoid recursion</span>\n  l_oncom <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">.</span>                      <span class=\"token eol-comment comment\">\"E = Event Handling</span>\n  l_subrc <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>subrc<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* no escape out off this form other than ENDFORM</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">set</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*</span>\n<span class=\"token comment\">* bgRFC</span>\n<span class=\"token comment\">*</span>\n  <span class=\"token keyword\">if</span> bgrfc_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\"something happened with bgRFC</span>\n    <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_BGRFC_DB_HELPER'</span><span class=\"token punctuation\">)</span>=>AFTER_COMMIT<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*</span>\n<span class=\"token comment\">* Local DATA Queue (LDQ)</span>\n<span class=\"token comment\">*</span>\n  <span class=\"token keyword\">if</span> ldq_writer_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\"something happened with LDW-Writer</span>\n    <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_LDQ_UNIT_WRITER'</span><span class=\"token punctuation\">)</span>=>after_commit<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">if</span> ldq_reader_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\"something happened with LDW-Reader</span>\n    <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_LDQ_UNIT_READER'</span><span class=\"token punctuation\">)</span>=>after_commit<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* Raise event 'Commit Finished' for Object Manager</span>\n<span class=\"token comment\">* for synchronous update task this is after all database changes.</span>\n<span class=\"token comment\">* for asynchronous update task this is after triggering the updates.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> cl_os_transaction_end_notifier<span class=\"token token-operator punctuation\">=></span>raise_commit_finished<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* COMMIT in (classic) update task?</span>\n  <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'TH_USER_INFO'</span>\n    <span class=\"token keyword\">importing</span>\n      task_state <span class=\"token operator\">=</span> <span class=\"token keyword\">i</span><span class=\"token punctuation\">.</span>\n  %_task_state <span class=\"token operator\">=</span> <span class=\"token keyword\">i</span><span class=\"token punctuation\">.</span>\n  j <span class=\"token operator\">=</span> task_vb<span class=\"token punctuation\">.</span> x4 <span class=\"token operator\">=</span> j<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> %_task_state <span class=\"token keyword\">z</span> x4<span class=\"token punctuation\">.</span>            <span class=\"token eol-comment comment\">\"update task must not be active</span>\n    l_update_task <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">if</span> l_update_task <span class=\"token operator\">&lt;></span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*   COMMIT in local update task?</span>\n    <span class=\"token keyword\">call</span> <span class=\"token string\">'GET_SWITCH_UTASK'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'MODE'</span>  <span class=\"token keyword\">field</span> <span class=\"token string\">'A'</span>          <span class=\"token eol-comment comment\">\"A = active?</span>\n                            <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> %_direct_utask_active<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> %_direct_utask_active <span class=\"token operator\">=</span> <span class=\"token string\">'Y'</span> <span class=\"token keyword\">or</span> sy<span class=\"token token-operator punctuation\">-</span>cprog <span class=\"token operator\">=</span> <span class=\"token string\">'SAPMSSY4'</span><span class=\"token punctuation\">.</span>\n      l_update_task <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* raise event 'transaction_finished' only if not in update task.</span>\n  <span class=\"token keyword\">if</span> l_update_task <span class=\"token operator\">&lt;></span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span>\n      cl_system_transaction_state<span class=\"token token-operator punctuation\">=></span>raise_transaction_finished\n      <span class=\"token keyword\">exporting</span>\n        <span class=\"token keyword\">kind</span> <span class=\"token operator\">=</span> cl_system_transaction_state<span class=\"token token-operator punctuation\">=></span>commit_work<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* restore sy-oncom</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> l_oncom<span class=\"token punctuation\">.</span>\n  sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">=</span> l_subrc<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* reset marker on call stack.</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">reset</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                                                <span class=\"token eol-comment comment\">\"%_after_commit</span>\n\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token comment\">* FORM %_PROCESS_P_O_C</span>\n<span class=\"token comment\">* Process PERFORM ON COMMIT orders</span>\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_process_p_o_c<span class=\"token punctuation\">.</span>                                       <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> last_oncom <span class=\"token keyword\">like</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> imode_orders_wa <span class=\"token keyword\">type</span> %_commit_orders<span class=\"token punctuation\">,</span>\n        orders_wa       <span class=\"token keyword\">type</span> %_commit_orders<span class=\"token punctuation\">.</span>\n\n  last_oncom <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">import</span> imode_orders <span class=\"token keyword\">from</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %_vbkey<span class=\"token punctuation\">.</span>\n  sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">sort</span> imode_orders <span class=\"token keyword\">by</span> u_level i_level<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">loop</span> <span class=\"token keyword\">at</span> imode_orders <span class=\"token keyword\">into</span> imode_orders_wa<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">perform</span> %_order_form_level <span class=\"token keyword\">using</span> imode_orders_wa<span class=\"token token-operator punctuation\">-</span>prog\n                                     imode_orders_wa<span class=\"token token-operator punctuation\">-</span>rout\n                                     imode_orders_wa<span class=\"token token-operator punctuation\">-</span>u_level<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endloop</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> imode_orders<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">sort</span> orders <span class=\"token keyword\">by</span> u_level i_level<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* signal begin of ON COMMIT handling</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'P'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'SET_SWITCH_TXEND'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">loop</span> <span class=\"token keyword\">at</span> orders <span class=\"token keyword\">into</span> orders_wa<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">perform</span> <span class=\"token punctuation\">(</span>orders_wa<span class=\"token token-operator punctuation\">-</span>rout<span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">in</span> <span class=\"token keyword\">program</span> <span class=\"token punctuation\">(</span>orders_wa<span class=\"token token-operator punctuation\">-</span>prog<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endloop</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> orders<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* for RTM test concerning POC during OS events</span>\n  <span class=\"token keyword\">free</span> os_orders<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* end RTM</span>\n\n<span class=\"token comment\">* signal end of ON COMMIT</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> last_oncom<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'SET_SWITCH_TXEND'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_process_p_o_c</span>\n\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token comment\">* FORM %_GET_VB_KEY</span>\n<span class=\"token comment\">* Update task without update task</span>\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_get_vb_key <span class=\"token keyword\">using</span> vb_func_name <span class=\"token keyword\">changing</span> vb_data_key<span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"#EC *</span>\n\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> %_vb_calls    <span class=\"token keyword\">type</span> <span class=\"token keyword\">standard</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">of</span> %_vb_calls<span class=\"token punctuation\">,</span>       <span class=\"token eol-comment comment\">\"#EC *</span>\n        %_vb_calls_wa <span class=\"token keyword\">type</span> %_vb_calls<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> utask_on<span class=\"token punctuation\">,</span>                  <span class=\"token eol-comment comment\">\"flag: asynchronous update task on?</span>\n        direct_utask_active<span class=\"token punctuation\">.</span>       <span class=\"token eol-comment comment\">\"flag: already in local update task?</span>\n\n  <span class=\"token keyword\">clear</span> vb_data_key<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'GET_SWITCH_UTASK'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'MODE'</span> <span class=\"token keyword\">field</span> <span class=\"token string\">'S'</span>\n                          <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> utask_on<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'GET_SWITCH_UTASK'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'MODE'</span>  <span class=\"token keyword\">field</span> <span class=\"token string\">'A'</span>\n                          <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> direct_utask_active<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">if</span> utask_on <span class=\"token keyword\">eq</span> <span class=\"token string\">'N'</span> <span class=\"token keyword\">and</span> direct_utask_active <span class=\"token keyword\">eq</span> <span class=\"token string\">'N'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*   update task switched to \"local\", but not yet inside update task.</span>\n    <span class=\"token keyword\">select</span> <span class=\"token keyword\">single</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> tfdir <span class=\"token keyword\">where</span> funcname <span class=\"token operator\">=</span> vb_func_name<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">message</span> a400 <span class=\"token keyword\">with</span> vb_func_name<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n    cl_abap_restrmode_utils<span class=\"token token-operator punctuation\">=></span>check_in_restr_mode_updtask<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> tfdir<span class=\"token token-operator punctuation\">-</span>utask <span class=\"token operator\">=</span> <span class=\"token string\">'1'</span>     <span class=\"token eol-comment comment\">\"direct update task call</span>\n       <span class=\"token keyword\">or</span> tfdir<span class=\"token token-operator punctuation\">-</span>utask <span class=\"token operator\">=</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"direct update task call, no later update</span>\n\n<span class=\"token comment\">*     get identifier for current LUW</span>\n      <span class=\"token keyword\">call</span> <span class=\"token string\">'ThVBCall'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'OPCODE'</span> <span class=\"token keyword\">field</span> get_vb_key\n                      <span class=\"token keyword\">id</span> <span class=\"token string\">'VBKEY'</span>  <span class=\"token keyword\">field</span> %%vbkey<span class=\"token token-operator punctuation\">-</span>vbkey<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">free</span> %_vb_calls<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">clear</span> %_vb_calls_wa<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*     import table with already registered function modules</span>\n      <span class=\"token keyword\">import</span> %_vb_calls <span class=\"token keyword\">from</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %%vbkey<span class=\"token punctuation\">.</span>\n\n      <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*       already got UUID for the parameters of the function module</span>\n        <span class=\"token keyword\">read</span> <span class=\"token keyword\">table</span> %_vb_calls <span class=\"token keyword\">index</span> <span class=\"token number\">1</span>\n          <span class=\"token keyword\">into</span> %_vb_calls_wa <span class=\"token keyword\">transporting</span> daten_id<span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">message</span> x675<span class=\"token punctuation\">(</span><span class=\"token number\">00</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">else</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*       get new UUID as key for the parameters of the function module</span>\n        <span class=\"token keyword\">try</span><span class=\"token punctuation\">.</span>\n          %_vb_calls_wa<span class=\"token token-operator punctuation\">-</span>daten_id<span class=\"token token-operator punctuation\">-</span>vbkey <span class=\"token operator\">=</span> cl_system_uuid<span class=\"token token-operator punctuation\">=></span>create_uuid_c22_static<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">catch</span> cx_uuid_error<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">message</span> x675<span class=\"token punctuation\">(</span><span class=\"token number\">00</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">endtry</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*     fill in name of function module</span>\n      %_vb_calls_wa<span class=\"token token-operator punctuation\">-</span>func_name <span class=\"token operator\">=</span> vb_func_name<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*     identify the function call by consecutive number</span>\n      <span class=\"token keyword\">describe</span> <span class=\"token keyword\">table</span> %_vb_calls <span class=\"token keyword\">lines</span> %_vb_calls_wa<span class=\"token token-operator punctuation\">-</span>daten_id<span class=\"token token-operator punctuation\">-</span>vbkey+<span class=\"token number\">22</span><span class=\"token punctuation\">.</span>\n      %_vb_calls_wa<span class=\"token token-operator punctuation\">-</span>data_temperature <span class=\"token operator\">=</span> cl_abap_stack_temperature<span class=\"token token-operator punctuation\">=></span>get_temperature<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">append</span> %_vb_calls_wa <span class=\"token keyword\">to</span> %_vb_calls<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*     (re-) export the table to memory</span>\n      <span class=\"token keyword\">export</span> %_vb_calls <span class=\"token keyword\">to</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %%vbkey<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">free</span> %_vb_calls<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*     return the identifier of this function call to call.rs1 to export</span>\n<span class=\"token comment\">*     the corresponding parameters with the same identifier.</span>\n      vb_data_key <span class=\"token operator\">=</span> %_vb_calls_wa<span class=\"token token-operator punctuation\">-</span>daten_id<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_get_vb_key</span>\n\n<span class=\"token comment\">*----------------------------------------------------------------------</span>\n<span class=\"token comment\">* FORM %_CALL_ROLLBACK</span>\n<span class=\"token comment\">* Call ROLLBACK-Handling</span>\n<span class=\"token comment\">* To be called by kernel code to perform rollback handling in ABAP</span>\n<span class=\"token comment\">*----------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_call_rollback<span class=\"token punctuation\">.</span>                                       <span class=\"token eol-comment comment\">\"#EC *</span>\n<span class=\"token comment\">* Save SUBRC for returncode after EXCEPTION ERROR_MESSAGE</span>\n  <span class=\"token keyword\">local</span><span class=\"token punctuation\">:</span> sy<span class=\"token token-operator punctuation\">-</span>subrc<span class=\"token punctuation\">,</span> sy<span class=\"token token-operator punctuation\">-</span>msgty<span class=\"token punctuation\">,</span> sy<span class=\"token token-operator punctuation\">-</span>msgid<span class=\"token punctuation\">,</span> sy<span class=\"token token-operator punctuation\">-</span>msgno<span class=\"token punctuation\">,</span>\n         sy<span class=\"token token-operator punctuation\">-</span>msgv1<span class=\"token punctuation\">,</span> sy<span class=\"token token-operator punctuation\">-</span>msgv2<span class=\"token punctuation\">,</span> sy<span class=\"token token-operator punctuation\">-</span>msgv3<span class=\"token punctuation\">,</span> sy<span class=\"token token-operator punctuation\">-</span>msgv4<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* Perform ROLLBACK with all registered rollback hooks</span>\n  <span class=\"token keyword\">rollback</span> <span class=\"token keyword\">work</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_call_rollback</span>\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* R O L L B A C K</span>\n<span class=\"token comment\">* rollback work</span>\n<span class=\"token comment\">* when called within CALL DIALOG --> no effect i.e. symmetrical to</span>\n<span class=\"token comment\">* COMMIT WORK</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_rollback<span class=\"token punctuation\">.</span>                                            <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> txend <span class=\"token keyword\">type</span> <span class=\"token keyword\">c</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> l_oncom <span class=\"token keyword\">like</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* forbid ROLLBACK if already in ON COMMIT/ROLLBACK handling</span>\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'GET_SWITCH_TXEND'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> txend<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">if</span> txend <span class=\"token operator\">=</span> <span class=\"token string\">'C'</span> <span class=\"token keyword\">or</span> txend <span class=\"token operator\">=</span> <span class=\"token string\">'R'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">message</span> x086<span class=\"token punctuation\">(</span><span class=\"token number\">00</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">check</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'N'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'V'</span> <span class=\"token keyword\">and</span>\n        sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'E'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'P'</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* change sy-oncom to avoid recursion</span>\n  l_oncom <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">.</span>                      <span class=\"token eol-comment comment\">\"E = Event Handling</span>\n\n<span class=\"token comment\">* no escape out off this form other than ENDFORM</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">set</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* Hook for Process Information Infrastructure</span>\n  <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'SPI_AGENT_ROLLBACK'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* restore sy-oncom</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> l_oncom<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'ThVBCall'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'OPCODE'</span>  <span class=\"token keyword\">field</span> get_vb_key\n                  <span class=\"token keyword\">id</span> <span class=\"token string\">'VBKEY'</span>  <span class=\"token keyword\">field</span> %%vbkey<span class=\"token token-operator punctuation\">-</span>vbkey<span class=\"token punctuation\">.</span>\n  %_vbkey<span class=\"token token-operator punctuation\">-</span>vbkey <span class=\"token operator\">=</span> %%vbkey<span class=\"token token-operator punctuation\">-</span>vbkey<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* perform ON ROLLBACK orders</span>\n  <span class=\"token keyword\">perform</span> %_process_p_o_r<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* free contents of memory and tables for update task</span>\n  <span class=\"token keyword\">free</span> %_vb_calls<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">import</span> %_vb_calls <span class=\"token keyword\">from</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %%vbkey<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">loop</span> <span class=\"token keyword\">at</span> %_vb_calls<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">free</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %_vb_calls<span class=\"token token-operator punctuation\">-</span>daten_id<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endloop</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %%vbkey<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> %_vb_calls<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* free contents of memory and tables</span>\n  %_vbkey<span class=\"token token-operator punctuation\">-</span>vbkey <span class=\"token operator\">=</span> %%vbkey<span class=\"token token-operator punctuation\">-</span>vbkey<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %_vbkey<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> imode_orders<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> orders<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> imode_rb_orders<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> rb_orders<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* for RTM test concerning POC during OS events</span>\n  <span class=\"token keyword\">free</span> os_orders<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* end RTM</span>\n\n  <span class=\"token keyword\">if</span> arfc_pending <span class=\"token operator\">&lt;></span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n    arfc_pending <span class=\"token operator\">=</span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'ARFC_END_TRANSACTION'</span>\n      <span class=\"token keyword\">exporting</span>\n        <span class=\"token keyword\">mode</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ROLLBACK'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*</span>\n<span class=\"token comment\">* bgRFC</span>\n<span class=\"token comment\">*</span>\n  <span class=\"token keyword\">if</span> bgrfc_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\"something happened with bgRFC</span>\n    <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_BGRFC_DB_HELPER'</span><span class=\"token punctuation\">)</span>=>ON_ROLLBACK<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*</span>\n<span class=\"token comment\">* Local DATA Queue (LDQ)</span>\n<span class=\"token comment\">*</span>\n  <span class=\"token keyword\">if</span> ldq_writer_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"something happened with LDQ-Writer</span>\n    <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_LDQ_UNIT_WRITER'</span><span class=\"token punctuation\">)</span>=>on_rollback<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">if</span> ldq_reader_eot_action  <span class=\"token keyword\">ne</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>  <span class=\"token eol-comment comment\">\"something happened with LDQ-Writer</span>\n    <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'CL_LDQ_UNIT_READER'</span><span class=\"token punctuation\">)</span>=>on_rollback<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* reset marker on call stack.</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">reset</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_rollback</span>\n\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token comment\">* FORM %_AFTER_ROLLBACK</span>\n<span class=\"token comment\">* called from RSYN rollback.rs1</span>\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_after_rollback<span class=\"token punctuation\">.</span>                                      <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> l_oncom <span class=\"token keyword\">like</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* ROLLBACK during POC, Update task or End Transaction event?</span>\n  <span class=\"token keyword\">check</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'P'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'E'</span> <span class=\"token keyword\">and</span>\n        sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'N'</span> <span class=\"token keyword\">and</span> sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">&lt;></span> <span class=\"token string\">'V'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* change sy-oncom to avoid recursion</span>\n  l_oncom <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">.</span>                      <span class=\"token eol-comment comment\">\"E = Event Handling</span>\n<span class=\"token comment\">* no escape out off this form other than ENDFORM</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">set</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> cl_os_transaction_end_notifier<span class=\"token token-operator punctuation\">=></span>raise_rollback_finished<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token keyword\">method</span> cl_system_transaction_state<span class=\"token token-operator punctuation\">=></span>raise_transaction_finished\n    <span class=\"token keyword\">exporting</span>\n      <span class=\"token keyword\">kind</span> <span class=\"token operator\">=</span> cl_system_transaction_state<span class=\"token token-operator punctuation\">=></span>rollback_work<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* switch local update task to 'inactive'</span>\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'SET_SWITCH_UTASK_OFF'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> <span class=\"token string\">'N'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* restore sy-oncom</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> l_oncom<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* reset marker on call stack.</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">reset</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_after_rollback</span>\n\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token comment\">* FORM %_PROCESS_P_O_R</span>\n<span class=\"token comment\">* Process PERFORM ON ROLLBACK orders</span>\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_process_p_o_r<span class=\"token punctuation\">.</span>                                       <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> last_oncom <span class=\"token keyword\">like</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> rb_orders_wa       <span class=\"token keyword\">type</span> %_commit_orders<span class=\"token punctuation\">,</span>\n        imode_rb_orders_wa <span class=\"token keyword\">type</span> %_commit_orders<span class=\"token punctuation\">.</span>\n\n  last_oncom <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>oncom<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">import</span> imode_rb_orders <span class=\"token keyword\">from</span> <span class=\"token keyword\">memory</span> <span class=\"token keyword\">id</span> %_vbkey<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">loop</span> <span class=\"token keyword\">at</span> imode_rb_orders <span class=\"token keyword\">into</span> imode_rb_orders_wa<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">perform</span> %_order_form_for_rollback\n      <span class=\"token keyword\">using</span> imode_rb_orders_wa<span class=\"token token-operator punctuation\">-</span>prog\n            imode_rb_orders_wa<span class=\"token token-operator punctuation\">-</span>rout<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endloop</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> imode_rb_orders<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">sort</span> rb_orders <span class=\"token keyword\">by</span> u_level i_level<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* signal begin of ON ROLLBACK handling</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> <span class=\"token string\">'P'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'SET_SWITCH_TXEND'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> <span class=\"token string\">'R'</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">set</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">loop</span> <span class=\"token keyword\">at</span> rb_orders <span class=\"token keyword\">into</span> rb_orders_wa<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">perform</span> <span class=\"token punctuation\">(</span>rb_orders_wa<span class=\"token token-operator punctuation\">-</span>rout<span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">in</span> <span class=\"token keyword\">program</span> <span class=\"token punctuation\">(</span>rb_orders_wa<span class=\"token token-operator punctuation\">-</span>prog<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endloop</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">system-call</span> state_limit <span class=\"token keyword\">reset</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">free</span> rb_orders<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* signal end of ON ROLLBACK</span>\n  sy<span class=\"token token-operator punctuation\">-</span>oncom <span class=\"token operator\">=</span> last_oncom<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'SET_SWITCH_TXEND'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'STATE'</span> <span class=\"token keyword\">field</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_process_p_o_r</span>\n\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token comment\">* FORM SYSTEM_HOOK</span>\n<span class=\"token comment\">* ---------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> system_hook<span class=\"token punctuation\">.</span>                                           <span class=\"token eol-comment comment\">\"#EC CALLED</span>\n  sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"system_hook</span>\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* R E G I S T E R _ A F R C</span>\n<span class=\"token comment\">* register ARFC call</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_register_arfc<span class=\"token punctuation\">.</span>                                       <span class=\"token eol-comment comment\">\"#EC *</span>\n  arfc_pending <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_register_arfc</span>\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* R E G I S T E R _ t R F C / q R F C independent from Update TASK</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_register_trfc_no_wait_for_update<span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"#EC PREFIX_OK</span>\n  trfc_nowait_for_update <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*-------------------------------------------------------------------</span>\n<span class=\"token comment\">* register bgRFC actions</span>\n<span class=\"token comment\">*-------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_register_bgrfc<span class=\"token punctuation\">.</span>                                       <span class=\"token eol-comment comment\">\"#EC *</span>\n  bgrfc_eot_action <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_register_bgrfc</span>\n\n<span class=\"token comment\">*-------------------------------------------------------------------</span>\n<span class=\"token comment\">* register Local Data Queue (ldq) actions</span>\n<span class=\"token comment\">*-------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_register_ldq_writer<span class=\"token punctuation\">.</span>                                 <span class=\"token eol-comment comment\">\"#EC *</span>\n  ldq_writer_eot_action <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_register_ldq_writer</span>\n\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*&amp;      Form  %_register_ldq_reader</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*       text</span>\n<span class=\"token comment\">*----------------------------------------------------------------------*</span>\n<span class=\"token keyword\">form</span> %_register_ldq_reader<span class=\"token punctuation\">.</span>                                 <span class=\"token eol-comment comment\">\"#EC *</span>\n  ldq_reader_eot_action <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_register_ldq_reader</span>\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* L I S T _ C O M M A N D</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">module</span> list_command <span class=\"token keyword\">input</span><span class=\"token punctuation\">.</span>                                  <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">result</span> <span class=\"token keyword\">type</span> <span class=\"token keyword\">i</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*  IF sy-xcode(5) EQ 'PFILE'.</span>\n<span class=\"token comment\">*    MESSAGE ID '02' TYPE 'I' NUMBER '016'.</span>\n<span class=\"token comment\">*    CLEAR sy-xcode.</span>\n<span class=\"token comment\">*  ENDIF.</span>\n  <span class=\"token keyword\">result</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">call</span> <span class=\"token string\">'QUERY_LIST_TO_MEMORY'</span> <span class=\"token keyword\">id</span> <span class=\"token string\">'RESULT'</span> <span class=\"token keyword\">field</span> <span class=\"token keyword\">result</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token keyword\">result</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n    sy<span class=\"token token-operator punctuation\">-</span>xcode <span class=\"token operator\">=</span> <span class=\"token string\">'%SMEX'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">check</span> sy<span class=\"token token-operator punctuation\">-</span>xcode<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token string\">'%'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'LIST_COMMAND'</span>\n    <span class=\"token keyword\">exporting</span>\n      command         <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>xcode\n    <span class=\"token keyword\">exceptions</span>\n      unknown_command <span class=\"token operator\">=</span> <span class=\"token number\">4</span>\n      <span class=\"token keyword\">others</span>          <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">check</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">clear</span><span class=\"token punctuation\">:</span> sy<span class=\"token token-operator punctuation\">-</span>ucomm<span class=\"token punctuation\">,</span> sy<span class=\"token token-operator punctuation\">-</span>xcode<span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endmodule</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"list_command INPUT</span>\n\n<span class=\"token comment\">* R/3-Drucken Anfang</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* P R I N T _ S T A R T</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">module</span> print_start <span class=\"token keyword\">input</span><span class=\"token punctuation\">.</span>                                   <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> hex02 <span class=\"token keyword\">type</span> <span class=\"token keyword\">x</span> <span class=\"token keyword\">value</span> <span class=\"token string\">'02'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">data</span><span class=\"token punctuation\">:</span> display_mode<span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* Korrektur Ralf Wendelgaß 20.5.98</span>\n\n  <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>xcode <span class=\"token operator\">=</span> <span class=\"token string\">'PRI'</span>   <span class=\"token keyword\">or</span>\n     sy<span class=\"token token-operator punctuation\">-</span>xcode <span class=\"token operator\">=</span> <span class=\"token string\">'PRINT'</span> <span class=\"token keyword\">or</span>\n     sy<span class=\"token token-operator punctuation\">-</span>xcode <span class=\"token operator\">=</span> <span class=\"token string\">'%PRI'</span> <span class=\"token keyword\">or</span>\n     sy<span class=\"token token-operator punctuation\">-</span>xcode <span class=\"token operator\">=</span> <span class=\"token string\">'%PRN'</span><span class=\"token punctuation\">.</span>\n\n    display_mode <span class=\"token operator\">=</span> cl_abap_list_layout<span class=\"token token-operator punctuation\">=></span>get_display_mode<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n\n    sy<span class=\"token token-operator punctuation\">-</span>callr <span class=\"token operator\">=</span> <span class=\"token string\">'OKPRI'</span><span class=\"token punctuation\">.</span>\n<span class=\"token comment\">* no print dialog if print icon was pressed</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>xcode <span class=\"token operator\">=</span> <span class=\"token string\">'%PRN'</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'PRINT_REPORT_DEFAULT'</span>\n        <span class=\"token keyword\">exporting</span>\n          <span class=\"token keyword\">report</span> <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>cprog\n          uc_display_mode <span class=\"token operator\">=</span> display_mode\n        <span class=\"token keyword\">exceptions</span>\n          <span class=\"token keyword\">others</span> <span class=\"token operator\">=</span> <span class=\"token number\">99</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">call</span> <span class=\"token keyword\">function</span> <span class=\"token string\">'PRINT_REPORT'</span>\n        <span class=\"token keyword\">exporting</span>\n          <span class=\"token keyword\">report</span> <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>cprog\n          uc_display_mode <span class=\"token operator\">=</span> display_mode\n        <span class=\"token keyword\">exceptions</span>\n          <span class=\"token keyword\">others</span> <span class=\"token operator\">=</span> <span class=\"token number\">99</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* printing ok</span>\n    <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* cover page</span>\n      <span class=\"token keyword\">if</span> sy<span class=\"token token-operator punctuation\">-</span>subty <span class=\"token keyword\">o</span> hex02 <span class=\"token keyword\">and</span> %_print<span class=\"token token-operator punctuation\">-</span>prbig <span class=\"token operator\">&lt;></span> <span class=\"token keyword\">space</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">perform</span> %_%_cover_page<span class=\"token punctuation\">(</span>rsdbrunt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n      sy<span class=\"token token-operator punctuation\">-</span>xcode <span class=\"token operator\">=</span> <span class=\"token string\">'PRI'</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* errors occured or printout cancelled</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">clear</span> sy<span class=\"token token-operator punctuation\">-</span>xcode<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">message</span> s015<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">endif</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">endmodule</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"print_start INPUT</span>\n<span class=\"token comment\">* R/3-Drucken Ende</span>\n\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* S Y N T A X C H E C K - Popup (143)</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">module</span> sc_init <span class=\"token keyword\">output</span><span class=\"token punctuation\">.</span>                                      <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">tables</span><span class=\"token punctuation\">:</span> trdir<span class=\"token punctuation\">,</span> abmsg<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">set</span> <span class=\"token keyword\">titlebar</span> <span class=\"token string\">'001'</span><span class=\"token punctuation\">.</span>                                       <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">set</span> <span class=\"token keyword\">pf-status</span> <span class=\"token string\">'SCMS'</span> <span class=\"token keyword\">immediately</span><span class=\"token punctuation\">.</span>                         <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">select</span> <span class=\"token keyword\">single</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> trdir <span class=\"token keyword\">where</span> <span class=\"token keyword\">name</span> <span class=\"token operator\">=</span> abmsg<span class=\"token token-operator punctuation\">-</span>irepid<span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endmodule</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"sc_init OUTPUT</span>\n\n<span class=\"token comment\">*---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*       MODULE SC_RESET                                               *</span>\n<span class=\"token comment\">*---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*       ........                                                      *</span>\n<span class=\"token comment\">*---------------------------------------------------------------------*</span>\n<span class=\"token keyword\">module</span> sc_reset<span class=\"token punctuation\">.</span>                                            <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">leave</span> <span class=\"token keyword\">to</span> <span class=\"token keyword\">transaction</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endmodule</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"sc_reset</span>\n\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* L I S T _ E X I T</span>\n<span class=\"token comment\">* return from \"Listprocessing\" (main list of report -> LIST_RETURN)</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_list_exit<span class=\"token punctuation\">.</span>                                           <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">leave</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_list_exit</span>\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* L I S T _ R E T U R N</span>\n<span class=\"token comment\">* return from main list of report -> selection screen</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> %_list_return<span class=\"token punctuation\">.</span>                                         <span class=\"token eol-comment comment\">\"#EC *</span>\n  <span class=\"token keyword\">perform</span> %_return_to_selscreen <span class=\"token keyword\">in</span> <span class=\"token keyword\">program</span> rsdbrunt <span class=\"token keyword\">if</span> <span class=\"token keyword\">found</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>                    <span class=\"token eol-comment comment\">\"%_list_return</span>\n\n<span class=\"token comment\">*???????????????????????????????????????????????????????????????????????</span>\n<span class=\"token keyword\">form</span> list_command ##NEEDED<span class=\"token punctuation\">.</span>                                 <span class=\"token eol-comment comment\">\"#EC CALLED</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token comment\">* N E W - L I N E</span>\n<span class=\"token comment\">* called by ab_trigg to force a line-skip after GET processing</span>\n<span class=\"token comment\">* -------------------------------------------------------------------</span>\n<span class=\"token keyword\">form</span> <span class=\"token keyword\">new-line</span> ##FIELD_HYPHEN<span class=\"token punctuation\">.</span>                               <span class=\"token eol-comment comment\">\"#EC CALLED</span>\n  <span class=\"token keyword\">new-line</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endform</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*&amp;      Module  LEAVE_LIST  OUTPUT</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*       text                                                           *</span>\n<span class=\"token comment\">*----------------------------------------------------------------------*</span>\n<span class=\"token comment\">*odule %_list_return output.</span>\n<span class=\"token comment\">* perform %_return_to_selscreen in program rsdbrunt if found.</span>\n<span class=\"token comment\">* leave screen.</span>\n<span class=\"token comment\">*ndmodule.                             \" LEAVE_LIST  OUTPUT</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*&amp;      Module  LIST_STRUCTURE_RECOGNIZER  OUTPUT</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*       text</span>\n<span class=\"token comment\">*----------------------------------------------------------------------*</span>\n<span class=\"token keyword\">module</span> list_structure_recognizer <span class=\"token keyword\">output</span><span class=\"token punctuation\">.</span>\n   cl_abap_list_parser<span class=\"token token-operator punctuation\">=></span>refresh_lsr_container<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">endmodule</span><span class=\"token punctuation\">.</span>                 <span class=\"token eol-comment comment\">\" LIST_STRUCTURE_RECOGNIZER  OUTPUT</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*&amp;      Form  thew_list_masking</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*       text</span>\n<span class=\"token comment\">*----------------------------------------------------------------------*</span>\n<span class=\"token comment\">*  -->  p1        text</span>\n<span class=\"token comment\">*  &lt;--  p2        text</span>\n<span class=\"token comment\">*----------------------------------------------------------------------*</span>\n<span class=\"token keyword\">FORM</span> thew_list_masking <span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">DATA</span><span class=\"token punctuation\">:</span>\n    lv_func       <span class=\"token keyword\">TYPE</span> rs38l_fnam <span class=\"token keyword\">VALUE</span> <span class=\"token string\">'/UIM/PBO_120_HOOK_LIST'</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">TRY</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'FUNCTION_EXISTS'</span>\n        <span class=\"token keyword\">EXPORTING</span>\n          funcname           <span class=\"token operator\">=</span> lv_func\n        <span class=\"token keyword\">EXCEPTIONS</span>\n          function_not_exist <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n          <span class=\"token keyword\">OTHERS</span>             <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> lv_func<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">CATCH</span> cx_root<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDTRY</span><span class=\"token punctuation\">.</span>\n\n\n<span class=\"token keyword\">ENDFORM</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*&amp;      Form  thew_list_masking2</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*       advanced UI masking of special fields with helpid</span>\n<span class=\"token comment\">*       called from kernel by ab_rperf from abwrite</span>\n<span class=\"token comment\">*----------------------------------------------------------------------*</span>\n<span class=\"token keyword\">FORM</span> thew_list_masking2<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">DATA</span><span class=\"token punctuation\">:</span>\n    lv_func       <span class=\"token keyword\">TYPE</span> rs38l_fnam <span class=\"token keyword\">VALUE</span> <span class=\"token string\">'/UIM/PBO_WRITE_HOOK'</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">TRY</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'FUNCTION_EXISTS'</span>\n        <span class=\"token keyword\">EXPORTING</span>\n          funcname           <span class=\"token operator\">=</span> lv_func\n        <span class=\"token keyword\">EXCEPTIONS</span>\n          function_not_exist <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n          <span class=\"token keyword\">OTHERS</span>             <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n\n        <span class=\"token keyword\">FIELD-SYMBOLS</span><span class=\"token punctuation\">:</span>\n          &lt;in_p1>    <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">any</span><span class=\"token punctuation\">,</span>\n          &lt;in_p2>    <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">any</span><span class=\"token punctuation\">,</span>\n          &lt;inout_p3> <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">any</span><span class=\"token punctuation\">,</span>\n          &lt;out_p4>   <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">any</span><span class=\"token punctuation\">.</span>\n\n        <span class=\"token keyword\">CALL</span> <span class=\"token string\">'AB_GET_C_PARMS'</span> <span class=\"token keyword\">ID</span> <span class=\"token string\">'P1'</span> <span class=\"token keyword\">FIELD</span> &lt;in_p1>    <span class=\"token eol-comment comment\">\"field name</span>\n                              <span class=\"token keyword\">ID</span> <span class=\"token string\">'P2'</span> <span class=\"token keyword\">FIELD</span> &lt;in_p2>    <span class=\"token eol-comment comment\">\"ddic name</span>\n                              <span class=\"token keyword\">ID</span> <span class=\"token string\">'P3'</span> <span class=\"token keyword\">FIELD</span> &lt;inout_p3>    <span class=\"token eol-comment comment\">\"field value</span>\n                              <span class=\"token keyword\">ID</span> <span class=\"token string\">'P4'</span> <span class=\"token keyword\">FIELD</span> &lt;out_p4><span class=\"token punctuation\">.</span>    <span class=\"token eol-comment comment\">\"flag is list masking</span>\n\n        <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> lv_func\n          <span class=\"token keyword\">EXPORTING</span>\n            fieldname       <span class=\"token operator\">=</span> &lt;in_p1>\n            ddicname        <span class=\"token operator\">=</span> &lt;in_p2>\n          <span class=\"token keyword\">IMPORTING</span>\n            is_list_masking <span class=\"token operator\">=</span> &lt;out_p4>\n          <span class=\"token keyword\">CHANGING</span>\n            fieldvalue      <span class=\"token operator\">=</span> &lt;inout_p3><span class=\"token punctuation\">.</span>\n\n        <span class=\"token keyword\">CALL</span> <span class=\"token string\">'AB_SET_C_PARMS'</span> <span class=\"token keyword\">ID</span> <span class=\"token string\">'P3'</span> <span class=\"token keyword\">FIELD</span> &lt;inout_p3>\n                      <span class=\"token keyword\">ID</span> <span class=\"token string\">'P4'</span> <span class=\"token keyword\">FIELD</span> &lt;out_p4><span class=\"token punctuation\">.</span>    <span class=\"token eol-comment comment\">\"#EC CI_CCALL CI_CCALL</span>\n      <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CATCH</span> cx_root<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDTRY</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">ENDFORM</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>"},{"id":"transformer-remark-markdown-html-4b1e4944f3a43edb376da780da95811b-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":"<h2>HTML in Markdown!?</h2>\n<p>Well, it’s a little known fact (at least it was for me) that you can use native HTML tags are supported in Markdown, though the support over different sites is varying. I would say the code presented here should work on about 99% of pages - let me know if that’s not the case</p>\n<h2>Code</h2>\n<p>To get this to work in most environments<sup>1</sup> all we have to do is to make use of the <code>&#x3C;details></code> tag. Since you probably want your dropdown to have a title, we also need to use the <code>&#x3C;summary></code> tag. So a cool markdown dropdown could look as simple as this:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-markdown\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>details</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>summary</span><span class=\"token punctuation\">></span></span>Cool Dropdown<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>summary</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\nblah blah blah blah you found me!\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>details</span><span class=\"token punctuation\">></span></span>\n</code></pre>\n      </div>\n<p>Or, rendered (go on and give the arrow a click!):</p>\n<details><summary>Cool Dropdown</summary><br>\nblah blah blah blah you found me!\n</details>\n<p>Of course, all goodies of markdown will work inside of this dropdown - lists, links, etc.</p>\n<h2>Longer Example</h2>\n<p>Here’s a bigger example for your copypasta pleasure:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-markdown\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>details</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>summary</span><span class=\"token punctuation\">></span></span>Cool Dropdown #1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>summary</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n\n```js\n// so wow, much amazing... you can even put code in these drop downs!\ndocument.getElementById('root')\n```s\n\n<span class=\"token url\">[Or a link - like to google](https://google.com)</span>\n\n<span class=\"token list punctuation\">-</span> Or a List\n  <span class=\"token list punctuation\">-</span> or a nested List\n  <span class=\"token list punctuation\">-</span> like this\n  <span class=\"token list punctuation\">-</span> with 😄 emojis\n<span class=\"token list punctuation\">-</span> Like this\n\nOr even just normal text\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>details</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>details</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>summary</span><span class=\"token punctuation\">></span></span>Cool Dropdown #2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>summary</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n\nMore cool text hiding in my dropdown\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>details</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>details</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>summary</span><span class=\"token punctuation\">></span></span>Cool Dropdown #3<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>summary</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n\nEaster egg! 🥚🥚🥚\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>details</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n</code></pre>\n      </div>\n<p>Rendered on this page, that snippet looks like this:</p>\n<p>\n<details><summary>Cool Dropdown #1</summary><br>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-js\"><code><span class=\"token comment\">// so wow, much amazing... you can even put code in these drop downs!</span>\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span>\n</code></pre>\n      </div>\n<p><a href=\"https://google.com\">Or a link - like to google</a></p>\n<ul>\n<li>\n<p>Or a List</p>\n<ul>\n<li>or a nested List</li>\n<li>like this</li>\n<li>with 😄 emojis</li>\n</ul>\n</li>\n<li>Like this</li>\n</ul>\n<p>Or even just normal text</p>\n</details>\n<details><summary>Cool Dropdown #2</summary><br>\n<p>More cool text hiding in my dropdown</p>\n</details>\n<details><summary>Cool Dropdown #3</summary><br>\n<p>Easter egg! 🥚🥚🥚</p>\n</details>\n</p>\n```\n<h2>Most Important - Use It!</h2>\n<p>I for one am going to start using this in my README’s. After all, it is the first page a lot of developers and users see, so using these dropdowns would be a nice simple way to keep your README uncluttered and organized - the communitiy at large will benefit and thank you for piece-wise docs.</p>\n<hr/>\n<h2>Footnotes</h2>\n<ol>\n<li>This page you are looking at right now is generated with Gatsby (which generates React HTML from markdown), and I know these dropdowns work on the Markdown of GitHub too.</li>\n</ol>"},{"id":"transformer-remark-markdown-html-c9b3bde2b7b63bef1a3680dc64b34d54-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":"<p>Lots of words have been thrown around Bitcoin recently. Tulip Madness. Silk Road. Ponzi Scheme. While this blog will (rest assured) remain about software development and programming, I had to give my final say (barring whatever crap I may spew on reddit from time to time 😄) SOMEWHERE about Bitcoin. I decided that somewhere was here.</p>\n<h1>My Promise to You</h1>\n<p>Let me promise you, I won’t post about Bitcoin speculation on this blog ever again. (At least in relation to any sort of price speculation, maybe one day later I will post on some tech stuff)</p>\n<h1>The Numbers</h1>\n<p>The most basic key economics of Bitcoin for determining it’s price are: 1. there will only be 21 million of them, and 2. The demand for the holy coin is ever increasing, and at least all of 2018, it looks as though that trend will hold. As long as these two key economic ingredients hold true (the 21 million I am 100% sure of, it’s <a href=\"https://github.com/bitcoin/bitcoin/blob/c24337964f2d0500975abb4ef55c324daaf349b6/src/main.cpp#L1361\">baked intp Bitcoin’s code</a>), the inarguable bottom line is that the price will go up, no exceptions. We don’t even need any technical analysis! There are millions of examples throughout history: something with a limited supply and increasing demand, the “things” price goes up. No exceptions.</p>\n<h1>First to Market</h1>\n<p>It’s important to remember, Bitcoin was the first of its kind (certainly not the best - many improvements in other coins and blockchain protocols exist - more on that below), Bitcoin has both the largest <em>and</em> majority of the market caps among all the other cryptocurrencies. (Edit: December 19th! Bitcoin dipped just below 49.9% market capitilization in crypto! <a href=\"frewinchristopher.github.io/markcap\">I built a small bookmarklet called MarkCap</a> for <a href=\"coinmarketcap.com\">coinmarketcap.com</a> that puts the percent market cap next to the market cap number.)</p>\n<p></p>\n<p>A comic I thought up about Bitcoin  😂😂😂 (<em>comic is still not done, but it will show up here soon</em>).</p>\n<p>As cash flows from standard gold to Bitcoin, the market cap could approach the <em>trillions</em> range. With that order of magnitude of market cap, 1 Bitcoin would have:</p>\n<table>\n<thead>\n<tr>\n<th>Market Capitalization</th>\n<th>Bitcoin price*</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1 Trillion</td>\n<td>~$55,500</td>\n</tr>\n<tr>\n<td>2 Trillion</td>\n<td>~$111,000</td>\n</tr>\n<tr>\n<td>3 Trillion</td>\n<td>~$167,000</td>\n</tr>\n<tr>\n<td>…</td>\n<td>…</td>\n</tr>\n<tr>\n<td>7 Trillion (market cap of gold)</td>\n<td>~$389,000</td>\n</tr>\n</tbody>\n</table>\n<p>*(assuming around 18 million Bitcoins - currently 16.7 as of writing this entry - it’s accurate enough as of this posting in late 2017; the 18th millionth Bitcoin isn’t expected to be mined until October 9th, 2019 - check out <a href=\"https://medium.com/@frewin.christopher/the-bitcoin-mining-schedule-from-december-18-2017-to-june-8-2020-407db59e69f4\">my post on medium about the mining schedule until the next halving</a>)</p>\n<p>I predict:</p>\n<ul>\n<li>$20,000 by January 1st 2018 (update: we already made it for a short period of time on December 17th!)</li>\n<li>$50,000 by end of Q2 2018 (i.e. end of June 2018)</li>\n<li>$100,000 by end of Q4 2018 (i.e. end of December 2018)</li>\n</ul>\n<h1>But… 5 Years Out? 10 Years?</h1>\n<p>So I have a somewhat non-average view of Bitcoin in the long run (5-10 year) time range (yes, things like <a href=\"http://blog.flippening.watch/what-is-the-flippening/\">THE FLIPPENING</a> I think could happen). The world is still getting used to cryptocurrency. However, as soon as that honeymoon period is <em>over</em>, the world should (not as it always does, I know), realize a few things:</p>\n<ul>\n<li>Bitcoin, while first to the cryptocurrency market, is undoubtedly <em>not</em> the best cryptocurrency on the market. Even as I write this post, transaction times are stacking up, and a single transaction costs over $3. And what happens to the miners once mining stop? <a href=\"https://news.bitcoin.com/what-happens-bitcoin-miners-all-coins-mined/\">That’s still a question where I’m not totally satisfied what some of the answers are.</a></li>\n<li>Litecoin is a copy of (suprised? look at this <a href=\"https://github.com/litecoin-project/litecoin/commit/4405b78d6059e536c36974088a8ed4d9f0f29898\">fork to litecoin from the bitcoin repository by Charlie Lee, the founder of Litecoin</a>) sorry, but I don’t see much innovation there</li>\n<li>\n<p>Other blockchain technologies, like Ethereum, Cosmos, and many more (I have a few personal favorites) have numerous advantages, not limited to:</p>\n<ul>\n<li>a much larger development team</li>\n<li>a much stronger and active code base</li>\n<li>MUCH faster transaction times (Ether, the next closes coin in market cap, processes about <em>2.5x</em> as many transactions as Bitcoin per day)</li>\n</ul>\n</li>\n</ul>\n<p>Once these aspects of the market are noticed, I believe wealth will slowly transfer out of Bitcoin - when and if enough people will decide that Bitcoin’s ‘store of wealth’ could in fact be invested in the next best thing (i.e. coin/token). Perhaps once Bitcoin does reach such towering numbers of 50 - 100K, it’s purpose as a store of global wealth (note NOT the original purpose of Bitcoin) will be met, and perhaps the demand for transactions will taper off. On the other hand, perhaps even a better option for storing wealth in a blockchain could appear. With the rate of speed the tech is moving, its impossible to say, again, only time will tell.</p>\n<p>But, for the present, let the following stand:</p>\n<p><strong>As of 16:08 UTC, Tuesday December 12, 2017 the mid-market price on GDAX for 1 Bitcoin was $17,450.</strong></p>\n<h1>My Conclusions</h1>\n<p>My overall thoughts are this: Bitcoin will continue to see a run up into very large numbers in the 50K-100K region, then stabilize as buying rates finally settle down to match that of selling rates. Then, at some point along this stagnation, there will be a slow starting decrease downtrend in Bitcoin’s price, then accelerating, bringing the price of Bitcoin back to its pre-boom levels (think: $5 - $10 range). When will this happen? I would say not within the next 5-10 years. But it’s my long term feeling.</p>\n<p>Cheers! 🍺</p>"},{"id":"transformer-remark-markdown-html-db2401cb48c509be4ca1a43a137aa659-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":"<p><em>This post is for developer who have at least some hands on experience writing DApps. If you are new to blockchain development, or are new to Ethereum and looking for a more technical 2017 overview of the Project, <a href=\"https://medium.com/@frewin.christopher/the-ethereum-project-a-high-level-review-of-the-projects-progress-status-resources-tools-4e4f88050ffa\">read my Medium article on the subject.</a></em></p>\n<h1>Ethereum is not that old</h1>\n<p>As such, the tools surrounding decentralized apps (DApps) and blockchain development are being created with blazing speed - it’s like 2014 (I know, so long ago, right?) when es5 came out, as well as react, webpack, and hundreds of other tools were being released.</p>\n<h1>Enter Truffle</h1>\n<h1>Enter Ethermint</h1>\n<h1>Truffle and Ethermint?!?!</h1>"},{"id":"transformer-remark-markdown-html-f188a4d4c807cec0fc8830103c771561-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":"<p>I’ll be writing here for sometime into the future now, though I’m not sure how often, as I’m rather busy with the work for <a href=\"nlp-champs.com\">nlp-champs.com</a> and <a href=\"skillscout.herokuapp.com\">SkillScout</a> (the original thing that brought on the need case for <a href=\"nlp-champs.com\">nlp-champs.com</a>. Plus, it <em>really</em> doesn’t help that I recently fell down the rabbit hole that is blockchain. That stuff makes my head 💥 💥 💥 daily.</p>"},{"id":"transformer-remark-markdown-html-1ce98b38739c2343ab453c0708f858e1-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":"<p>This’ll be a real short one; I just learned you can link to specific lines of code on GitHub!</p>\n<p>All you need to do is find your link to the source code preview (***NOTE: <em>not</em> the raw view!) as an example, let’s look at a source file from Bitcoin repository*:</p>\n<p><a href=\"https://github.com/bitcoin/bitcoin/blob/c24337964f2d0500975abb4ef55c324daaf349b6/src/main.cpp\">https://github.com/bitcoin/bitcoin/blob/c24337964f2d0500975abb4ef55c324daaf349b6/src/main.cpp</a></p>\n<p>Let’s say I want to highlight line 123. All you have to do is add a ‘#L’ and the line number you want, so let’s add #L123:</p>\n<p><a href=\"https://github.com/bitcoin/bitcoin/blob/c24337964f2d0500975abb4ef55c324daaf349b6/src/main.cpp#L123\">https://github.com/bitcoin/bitcoin/blob/c24337964f2d0500975abb4ef55c324daaf349b6/src/main.cpp#L123</a></p>\n<p>Go on. Give it a click. You know you want to! You’ll see your browser jumps down and highlights that line.</p>\n<hr/>\n<p>* <code>main.cpp</code> doesn’t exist anymore in the current codebase; it has been reorganized into various other parts of the code, but as an example <code>main.cpp</code> is an attractive file name 😄.</p>"},{"id":"transformer-remark-markdown-html-c46e3fa3db7c9600fce9d1627b471244-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":"<h2>Hey, Want to be an American living in Austria and working in Liechtenstein?</h2>\n<h2>Look no further!</h2>\n<p>This is a detailed how-to guide on applying and obtaining:</p>\n<ul>\n<li>An Austrian residence permit</li>\n<li>A Liechtensteiner work permit</li>\n</ul>\n<h2>The Task</h2>\n<p>Warning: this process took me over two months. I want to share first how I did it, and then how I should have done it in hopes to save others time if they should wish to attempt tackling this debauchery of paperwork and bureaucracy.*</p>\n<p><sup>* Trust me when I say I’m not a legal counsel so always take my words with a grain of salt. However, as of February 2016, these were the steps I took to get started working. UPDATE 2017: The process is still the same as described here. I know this because you have to renew your permits each year for your first three years in Austria. Granted, it is much easier the second and third times as you have all of your papers in place already from the previous year!</sup></p>\n<h2>Overview</h2>\n<p>When you plan on living in Austria for longer than three months, and then longer than sixth months (there are some other special visas such as a student visa, artist visa which last for sixth months), then the government requires you to apply for a Niedlerlassungsbewilligung, a specific type of Aufenhaltstitel, or residence permit, very similar to a green card in the US. Then, Liechtenstein requires that you have Aufenhaltstitel, or a working permit to legally work in Liechtenstein. Your company should help you with this process, and, since a cross border working permit for Liechtenstein is very common, the application is relatively simple compared to the Niedlerlassungsbewilligung.</p>\n<h2>Legal Entities</h2>\n<p>There are four legal entities you are going to need to work with to get everything to jive:</p>\n<ol>\n<li>Perhaps most important, is the Bezirkshauptmannschaft, or “BH” for short in German, or in English, the district authority. This is where you will complete your Niedlerlassungsbewilligung, or residence permit.</li>\n<li>Another place you will visit is the Gemeindeamt, or town hall of the town your apartment is in. This is where you will make your Meldezettel, or certification of registration. When you do this registration, you want to make your Haupwohnsitz, or main place of residence to that town.</li>\n<li>You will also need to work with the Besitzer, or the owner of the apartment. If the apartment you want to rent is a private, this shouldn’t be so difficult. Unfortunately, it is quite common in Austria that apartments are owned by an apartment company, so you may have to work with one of those companies to finally get the rent contract and the signature of the official owner of the building itself.</li>\n<li>Finally, the two documents you will need to send from Liechtenstein are mandated by the Besitzer Ausländer- und Passamt, or the Immigration and Passport Office of Liechtenstein.\nLong Term Residence Permit(Nieder- lassungs- bewilligung)\nFor the residence permit, fill out the Niedlerlassungsbewilligung application. If you already have your apartment, you should even be able to fill in those parts as well. If you don’t have a spouse or children, you can skip many parts of this application. Anyways, the BH will look over it when you first supply it to them anyway, so don’t stress too much.\nTo fully complete the Niedlerlassungsbewilligung application, you will need to bring the following documents when you go to the BH:</li>\n</ol>\n<h2>Original Documents</h2>\n<ol>\n<li>Passport photo (glue it right on the front page of the application)</li>\n<li>Your birth certificate, signed by an apostle</li>\n<li>A police report from you local police station listing an infractions you may or may not have, also signed by an apostle</li>\n<li>Your (at the lowest) A1 German proficiency certificate</li>\n</ol>\n<h2>Copied Documents</h2>\n<ol>\n<li>Your rent agreement, make sure the copy has the signature of owner of the apartment building</li>\n<li>Flight confirmation ticket (so the BH knows how long you have to legally stay in Austria)</li>\n<li>A police report from you local police station listing an infractions you may or may not have, also signed by an apostle</li>\n<li>Your A1 certification in German. This is exam is not to be taken lightly! I did it through the Goethe Institut in U.S.</li>\n<li>Your work contract - make sure all the work contracts have signatures.</li>\n<li>A “simulation” of your wage with expected taxes from Austria - make sure this has signatures from your company as well.\nWork Permit(Arbeits- bewilligung)\nFor the work permit, you will need to fill out the Stellanantritt ohne Wohnsitznahme in Liechtenstein and Persönliche Angabe zur Ausstellung des Aufenhaltstitels applications. Your company in Liechtenstein may send you these half completed, or they may not. Mine did.\nTo fully complete the applications, you will need the following attachments:</li>\n</ol>\n<h2>Original Documents</h2>\n<ol>\n<li>Passport photo (glue it right on the front page of the Persönliche Angabe zur Ausstellung des Aufenhaltstitels)</li>\n</ol>\n<p>And… that’s it. Just the passport photo. Told you it was cake compared to the residence permit.\nThe Perfect Process\nNow, some of the things you have seen above may not really make any sense to you. The list below will describe them and outline, if you were perfect, how you could complete the entire process without any confusion or wasting of time:</p>\n<h2>Before Going to Austria</h2>\n<ol>\n<li>Get a job offer in Liechtenstein! The company will send you contracts which you need to sign in the presence of an apostle, which you will then send back to the company for their final approval. They’ll then order the contracts which you need to fill out for Liechtenstein.</li>\n<li>Pass your German A1 Proficiency Exam and wait for certificate to be mailed to you (this is probably easier before you go to Austria, but not impossible to do in Austria or Germany). This exam is includes basic reading, writing, and speaking in German. I did mine through the Goethe Institut. More about it here.</li>\n</ol>\n<h2>Once In Austria</h2>\n<ol>\n<li>Obtain an Austrian Bank Account (this takes a few days because they always need to approve foreigners) this will help time saving immensely with any bank transfers you need for the apartment, such as the security deposit or first months rent.</li>\n<li>Aggressively hunt for an apartment, get the rent contract made up and sign it with the owner of the apartment as soon as you can. (This process took me a month.)</li>\n<li>In the meantime of all the apartment hunting, get a bunch of passport photos taken. You will need them for a few things later on.</li>\n<li>Make your Meldezettal, or certification of registration at your local  Gemindeamt or town hall (make sure to bring your rent contract when you go!)</li>\n<li>Go to the BH with all of the documents listed above. If you’re good (unlike me) and have all the documents when you go, you should need to go only once.</li>\n<li>Now, this step is tricky. Liechtenstein won’t issue you a work permit without first seeing your residence permit (would be easy if you were an EU citizen - they would issue it as soon as they knew you were a citizen!) However, Austria won’t issue you a residence permit without first seeing the work permit! Catch 22 right? Well, not exactly. When you have everything ready for your residence permit at the BH, you can get help from your company and the Liechtenstein government to send a short confirmation letter saying that yes, as soon as you have your residence permit, they will issue you a work permit if you send in your residence permit for them to examine.</li>\n<li>Now wait. Some district authority offices say it can take as long as six months to approve your residence permit. I personally think that it depends more on your start date. I don’t think they will toast you and make you wait for months if they see your start date is coming up in just a few weeks or month.</li>\n<li>Then, eventually, the BH will call you and tell you when you can pick up your residence permit! You will have to go this time with your passport and pay a final 20 EUR to receive the residence permit. They told me to come back on a date about a week after I finally submitted everything.</li>\n<li>Then, you will need to work with your company. The authorities in Liechtenstein will need to see that residence permit that you just got, with those two other documents I mentioned above. Probably with yet another week, then will then issue you the work permit. I picked my work permit up from my company, but maybe they sometimes mail it. I’m not sure.</li>\n<li>Finally, you’ve done it! Hike up to a hut, sip a delicious Austrian beer and eat a big Germknödel! Try not to think about after all that paperwork your only reward is to start working!</li>\n</ol>"},{"id":"transformer-remark-markdown-html-db3793957d7070894669774f0e9d5739-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":"<h2>SAP users lockin’ up your objects?</h2>\n<h3>We’re gonna write an ABAP report and run it as a batch job to 🤖 <em>Automatically</em> 🤖 get rid of them!</h3>\n<h2>Overview</h2>\n<p>Alright everyone, we’re gonna walk through a fun ABAP report that involves functional programming, some challenging and creative BDC techniques, and a <em>‘forbidden’ SAP internal function module!!!</em> 😱 😱 😱</p>\n<h2>SAP and it’s Locked Objects</h2>\n<p>Anyone with a bit of technical sided SAP/ABAP experience knows that SAP has a locked object system - that is, a maximum of one entity can change an object at a time, wether it be a human user, a program, or any process. These ‘objects’ in SAP are numerous - orders, HUs, even warehouse bins are ‘objects’ that can be ‘locked’ when they are under modification somewhere in the system.</p>\n<p>This can get very annoying when multiple entities want to change multiple objects in similar time frames.</p>\n<h2>A Remedy for the Problem</h2>\n<p>The ABAP report I’m going to go through alleviates this problem and could be useful for any company that has automatic processes applied to objects in the system, but at the same time have human users that <em>also</em> modify these objects.</p>\n<p>The example program I will go through is for orders specifically (think TYPE AUFNR). Feel free to modify the code for any locked objects of your liking 😊 - the program logic following the locked object selection will not change, as we will soon see.</p>\n<h2>Specific Problem</h2>\n<p>At my company we had some batch jobs that were attempting to change orders, only to find that the users were locked by some of our employees in their own SAP GUI transactions. Nothing ‘bad’ per say was happening, we were just seeing in the protocol of those various batch jobs that the orders couldn’t be accessed. We realized a human user could easily forget they had a transaction open which locked an order, while they went off to work on something else, or were totally away from their work station.</p>\n<p>We decided ultimately to build a timed warning system for users that happened to be locking orders, functioning as follows:</p>\n<ol>\n<li>A warning popup for the user at 5 minutes of lock time</li>\n<li>A second warning popup for the user warning at 10 minutes of lock time</li>\n<li>Forcefully close the transaction that was locking the order at 15 minutes of lock time</li>\n</ol>\n<p>And yes, this can all be done from an automatic process with no overseeing required! 😊</p>\n<p>Let’s get started!</p>\n<h2>Identify Locked Objects</h2>\n<p>The first thing we need to do is get the locked objects and times of all those locked objects across the whole system. As I said, for our case, we are only interested in locked orders. This is object type <code>AUFK</code></p>\n<p>So, we have our table of objects, and the users who are locking. To be as</p>\n<h2>The ‘forbidden’ module</h2>\n<h2>BDC Tricks</h2>\n<hr/>\n<h1>Footnotes</h1>"},{"id":"transformer-remark-markdown-html-1394bab26ddea6adf8fd0b284fefff4e-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":"<h2>So, we don’t want to be rebuilding SAP GUI transactions 1:1 in the Web…</h2>\n<p>That would be like reinventing the wheel.</p>\n<p>In SAPUI5 function, that looks something like this:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code>\n</code></pre>\n      </div>\n<p>Dear SAP Gods” You shout. I know, what the heck are those random %20??!?! What the heck is that * there for? I recognize the transaction CO03, but what is going on here?!?!?!?</p>\n<p>All shall become clear. Let’s break it down.</p>"},{"id":"transformer-remark-markdown-html-50c44d197767b38d62d9904b63aa12b4-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":"<p>Alright, let’s do a bit of applied stuff today.</p>\n<h1>Backstory</h1>\n<p>For a long time, I had a ticket open for our IT team (I am likewise in the SAP team) for an automatic job that would restart a certain task on a Windows server we had - for reasons we still don’t know yet, this particular service would state that it was running, when in fact the job it was supposed to be orchestrating was clearly not running. We were able to verify if the service wasn’t working properly by pinging an RFC node. If the RFC ping returned with an error, then we knew the service was not working - don’t worry, this RFC ping will come into the code later.</p>\n<p>One lazy Friday when I didn’t have much to do, I was brainstorming if it was possible that maybe I could take this ticket into my own hands, writing something on our ABAP stack that could do the trick.</p>\n<h1>The Problem</h1>\n<p>I knew at least that I had to issue specific commands to the command line. That much I already knew how to do - I had used custom command services in SAP/ABAP with transaction SM69 before. The hard thing that I got stuck with: how could I, from our SAP application server, issue a specific command, to the Service Control Manager, to a specific service? Whew. Still with me? With help from one of our basic team members, we discovered that as it turns out, Windows has a very nice command for exactly that.</p>\n<p>It’s called <code>sc</code>:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-none\"><code>C:\\>sc\nDESCRIPTION:\n        SC is a command line program used for communicating with the\n        Service Control Manager and services.\nUSAGE:\n        sc <server> [command] [service name] <option1> <option2>...\n\n\n        The option <server> has the form \"\\\\ServerName\"\n        Further help on commands can be obtained by typing: \"sc [command]\"\n        Commands:\n          query-----------Queries the status for a service, or enumerates the status for types of services.\n          queryex---------Queries the extended status for a service, or enumerates the status for types of services.\n          start-----------Starts a service.\n          pause-----------Sends a PAUSE control request to a service.\n          interrogate-----Sends an INTERROGATE control request to a service.\n          continue--------Sends a CONTINUE control request to a service.\n          stop------------Sends a STOP request to a service.\n          config----------Changes the configuration of a service (persistent).\n          description-----Changes the description of a service.\n          failure---------Changes the actions taken by a service upon failure.\n          failureflag-----Changes the failure actions flag of a service.\n          sidtype---------Changes the service SID type of a service.\n          privs-----------Changes the required privileges of a service.\n          managedaccount--Changes the service to mark the service account password as managed by LSA.\n          qc--------------Queries the configuration information for a service.\n          qdescription----Queries the description for a service.\n          qfailure--------Queries the actions taken by a service upon failure.\n          qfailureflag----Queries the failure actions flag of a service.\n          qsidtype--------Queries the service SID type of a service.\n          qprivs----------Queries the required privileges of a service.\n          qtriggerinfo----Queries the trigger parameters of a service.\n          qpreferrednode--Queries the preferred NUMA node of a service.\n          qrunlevel-------Queries the run level of a service.\n          qmanagedaccount-Queries whether a services uses an account with a password managed by LSA.\n          qprotection-----Queries the process protection level of a service.\n          delete----------Deletes a service (from the registry).\n          create----------Creates a service. (adds it to the registry).\n          control---------Sends a control to a service.\n          sdshow----------Displays a service's security descriptor.\n          sdset-----------Sets a service's security descriptor.\n          showsid---------Displays the service SID string corresponding to an arbitrary name.\n          triggerinfo-----Configures the trigger parameters of a service.\n          preferrednode---Sets the preferred NUMA node of a service.\n          runlevel--------Sets the run level of a service.\n          GetDisplayName--Gets the DisplayName for a service.\n          GetKeyName------Gets the ServiceKeyName for a service.\n          EnumDepend------Enumerates Service Dependencies.\n\n        The following commands don't require a service name:\n        sc <server> <command> <option>\n          boot------------(ok | bad) Indicates whether the last boot should be saved as the last-known-good boot configuration\n          Lock------------Locks the Service Database\n          QueryLock-------Queries the LockStatus for the SCManager Database\nEXAMPLE:\n        sc start MyService\n\nWould you like to see help for the QUERY and QUERYEX commands? [ y | n ]:</code></pre>\n      </div>\n<p>Wow. That’s a monster of a command documentation. Let’s break down what we need.</p>\n<ul>\n<li>The server name. We know that (for this example, I’m going to just call it AWESOMESERVER01). But wait! There’s a gotchya, we will need to write it like:</li>\n</ul>\n<p><code>\\\\AWESOMESERVER01</code></p>\n<p>That’s not a special setting for server names that we have at my company or anything like that, that’s part of the <code>sc</code> command. Notice the line in the documentation that says exactly that:</p>\n<blockquote>\n<blockquote>\n<p>The option <server> has the form ”\\\\ServerName”</p>\n</blockquote>\n</blockquote>\n<p>Okay, now for our service name. Again, for instruction purposes of the command and for privacy sake, I’m going to call our service <code>ServiceName even with Whitespace</code>.</p>\n<p>Okay, what do I need to send as a command? What command do we need? Let’s check out that wall of text documentation:</p>\n<blockquote>\n<blockquote>\n<p>stop------------Sends a STOP request to a service.</p>\n</blockquote>\n</blockquote>\n<p>Yep, that sounds about as right as you can get. Oh also, hold your thoughts on this one:</p>\n<blockquote>\n<blockquote>\n<p>Commands:\n…\nstart-----------Starts a service.</p>\n</blockquote>\n</blockquote>\n<p>That will be useful later, too.</p>\n<p>Alright… Server name? Check. Service Name? Check. Command name(s)? Check. So, what do we get as a command for our efforts? It looks like this:</p>\n<p><code>sc \\\\AWESOMESERVER01 start \"ServiceName even with Whitespace\"</code></p>\n<p>In order for this to be a true <em>restart</em> of the service, we would have to issue a stop/start command pair on the service:</p>\n<p><code>sc \\\\AWESOMESERVER01 stop \"ServiceName even with Whitespace\"</code><br>\n<code>sc \\\\AWESOMESERVER01 start \"ServiceName even with Whitespace\"</code></p>\n<p>How do we do that in ABAP? Well, to run SM69 commands programmatically, we have the tasty function module <code>SXPG_COMMAND_EXECUTE</code>:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'SXPG_COMMAND_EXECUTE'</span>\n  <span class=\"token keyword\">EXPORTING</span>\n    commandname                   <span class=\"token operator\">=</span> gv_commandname\n    additional_parameters         <span class=\"token operator\">=</span> gv_additional_parameters\n    operatingsystem               <span class=\"token operator\">=</span> gv_operatingsystem\n  <span class=\"token keyword\">TABLES</span>\n    exec_protocol                 <span class=\"token operator\">=</span> gt_result\n  <span class=\"token keyword\">EXCEPTIONS</span>\n    no_permission                 <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n    command_not_found             <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n    parameters_too_long           <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n    security_risk                 <span class=\"token operator\">=</span> <span class=\"token number\">4</span>\n    wrong_check_call_interface    <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\n    program_start_error           <span class=\"token operator\">=</span> <span class=\"token number\">6</span>\n    program_termination_error     <span class=\"token operator\">=</span> <span class=\"token number\">7</span>\n    x_error                       <span class=\"token operator\">=</span> <span class=\"token number\">8</span>\n    parameter_expected            <span class=\"token operator\">=</span> <span class=\"token number\">9</span>\n    too_many_parameters           <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n    illegal_command               <span class=\"token operator\">=</span> <span class=\"token number\">11</span>\n    wrong_asynchronous_parameters <span class=\"token operator\">=</span> <span class=\"token number\">12</span>\n    cant_enq_tbtco_entry          <span class=\"token operator\">=</span> <span class=\"token number\">13</span>\n    jobcount_generation_error     <span class=\"token operator\">=</span> <span class=\"token number\">14</span>\n    <span class=\"token keyword\">OTHERS</span>                        <span class=\"token operator\">=</span> <span class=\"token number\">15</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>\n<p>I’ll just say I maintained the two commands in SM69 as <code>Z_MY_SUPER_AWESOME_COMMAND_START</code> and <code>Z_MY_SUPER_AWESOME_COMMAND_STOP</code>.</p>\n<p>So, all that’s left is to check if the service is not responding. As I summarized above, if the Windows service was broken, the RFC node that talked to it would also be broken. (i.e. pinging it would not work). An RFC node is easy enough to test with function module <code>RFC_PING</code>.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'RFC_PING'</span>\n  <span class=\"token keyword\">DESTINATION</span> <span class=\"token string\">'Z_BROKEN_RFC_DESTINATION'</span>\n  <span class=\"token keyword\">EXCEPTIONS</span>\n    system_failure        <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n    communication_failure <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>\n<p>Easy enough. If <code>sy-subrc</code> is of value 1 or 2, then it means indeed, that our <code>Z_BROKEN_RFC_DESTINATION</code> is indeed broken.</p>\n<p>So if it turns out this service is not responding, we call the command pair with function module <code>SXPG_COMMAND_EXECUTE</code>, check <code>sy-subrc</code>, and we are done! The total code looks like this:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">REPORT</span> Z_RESTART_SERVICE<span class=\"token punctuation\">.</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*&amp; Report:  Z_RESTART_SERVICE                                          *</span>\n<span class=\"token comment\">*&amp; Author: Chris Frewin                                                *</span>\n<span class=\"token comment\">*&amp; Creation Date: 27.10.2017                                           *</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*&amp; Requester:                                                          *</span>\n<span class=\"token comment\">*&amp; Chris Frewin - a report that restarts a windows service             *</span>\n<span class=\"token comment\">*&amp;                                                                     *</span>\n<span class=\"token comment\">*&amp;                                                                     *</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n<span class=\"token comment\">*&amp; Changes:                                                            *</span>\n<span class=\"token comment\">*&amp; Chris Frewin      2017.12.13 - First version                        *</span>\n<span class=\"token comment\">*&amp;                                                                     *</span>\n<span class=\"token comment\">*&amp;---------------------------------------------------------------------*</span>\n\n<span class=\"token eol-comment comment\">\" Check RFC destination Z_BROKEN_RFC_DESTINATION - if it hangs or returns error, try to restart it</span>\n<span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'RFC_PING'</span>\n  <span class=\"token keyword\">DESTINATION</span> <span class=\"token string\">'Z_BROKEN_RFC_DESTINATION'</span>\n  <span class=\"token keyword\">EXCEPTIONS</span>\n    system_failure        <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n    communication_failure <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">CASE</span> sy<span class=\"token token-operator punctuation\">-</span>subrc<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">WHEN</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">WRITE</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">/</span> <span class=\"token string\">'Ping Test RFC Destination Z_BROKEN_RFC_DESTINATION with SY-SUBRC = 1: \"system_failure\" Trying to restart the service...'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">WHEN</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">WRITE</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">/</span> <span class=\"token string\">'Ping Test RFC Destination Z_BROKEN_RFC_DESTINATION with SY-SUBRC = 2: \"communication_failure\" Trying to restart the service...'</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">WHEN</span> <span class=\"token keyword\">OTHERS</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">WRITE</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">/</span> <span class=\"token string\">'Ping Test RFC Destination Z_BROKEN_RFC_DESTINATION is offline or not functioning properly! Trying to restart the service...'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDCASE</span><span class=\"token punctuation\">.</span>\n  <span class=\"token eol-comment comment\">\" restart the service with a stop/start combo</span>\n  <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'SXPG_COMMAND_EXECUTE'</span>\n    <span class=\"token keyword\">EXPORTING</span>\n      commandname <span class=\"token operator\">=</span> <span class=\"token string\">'Z_MY_SUPER_AWESOME_COMMAND_STOP'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">WRITE</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">/</span> <span class=\"token string\">'Error with the start command - Z_MY_SUPER_AWESOME_COMMAND_STOP command!'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'SXPG_COMMAND_EXECUTE'</span>\n    <span class=\"token keyword\">EXPORTING</span>\n      commandname <span class=\"token operator\">=</span> <span class=\"token string\">'Z_MY_SUPER_AWESOME_COMMAND_START'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">WRITE</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">/</span> <span class=\"token string\">'Error with the stop command - Z_MY_SUPER_AWESOME_COMMAND_START command!'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ELSE</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">WRITE</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">/</span> <span class=\"token string\">'Service successfully newly started!'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>\n<p>We set this report up as a batch job to run every 5 minutes, and the ticket was resolved 😄</p>\n<h1>Review</h1>\n<p>As a review, we determined the specific commands needed to be sent to the Windows Service Control Manager, maintained the needed commands in transaction SM69, and wrote a report that we ran as a batch job!</p>\n<h1>Notes and Comments</h1>\n<p>I hope everyone enjoyed this post and learned a thing or two. I’m going to be posting a lot more ABAP as well as SAPUI5 content in the coming months. I’ve found that the learning curve for SAPUI5 is a lot higher than other frontend frameworks like React, Vue, or Cycle. I’ve done specialized projects with SAPUI5 is both the EWM and PP modules - There is A LOT of really cool stuff you can do, (especially in EWM) with WebSockets, statistics, and SAPUI5. The bottom line is, I’ve got some great content in the coming months for everyone!</p>\n<p>Cheers everyone! 🍺</p>\n<p><em>Intellectual property/privacy disclaimer: the exact source code and use case have been modified from the real use case at the company I work for, <a href=\"https://www.ospelt.com/en/ospelt/info/home.html\">Ospelt</a>.</em></p>"},{"id":"transformer-remark-markdown-html-7efb569c92c973fbb96e4058610d6b41-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":"<h1>Dude, where’s my color scheme?!</h1>\n<p>At some point, <em>SAP took away my Monokai Color scheme from the SAPUI5 Web IDE!</em> That is unforgivable…</p>\n<p><img src=\"/unforgivable-595b9ad46814fa0343339c67fe02f92a.gif\" alt=\"Like I said, unforgivable.\"></p>\n<h2>Don’t worry - code to the rescue!</h2>\n<p>I wrote a small tampermonkey script that address this issue, and you can get your monokai colors back! <a href=\"https://github.com/ajaxorg/ace/tree/master/lib/ace/theme\">(See Ace’s GitHub for all possible themes.)</a></p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/sapwebidecolors-e6d59dd4b3c1c3b91006bfdb294938f4-d437b.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 55.99250936329588%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB50lEQVQoz42SXWsTQRSG979oze7s7uzs19SNpK1aWvMHRMHeFrzQK0FEUEoupIpUU0HailjtlYh/QqQIImgh0iY2MTHJJtukjV/g1evsxBqDXfTi5SzszMMz5xwle2YWudv3MZ9fEVnG4oM1LCw9Qm7hHq7fuIO5+TzmbuaRu7X4X1FmrtxFvdlCM9pDp/ddJtr9hnCnh1KljqXlFaw+foKnz57j4eraP6Ocu3gNYa2EWjNCV8D2vv74nXeFTVi2Ds9TkT1lI5MxoGqHkVIPJUaZuXAV3cYHeflTuIN298sQ0PFMMG4hM8HBRx04LoXtmMnA07OXUCxt483bDay/eo3N4jZK5arMi5frsF0DhpkCYwSUqqCWCsvSRNVkJfrIUJSz5y+j1/6IYrU29Nw/Dak2giBNERzPiGrBdVVhmYLzK0Q/MjCUwKiGciNMBMYH40uuZwiYIXpqCqAOZhNpr4t/+72VwFbUQUE8tdHeTQZaOizugAemsPSQTvs4Griirwyca6K3ZACMV2SrUhUD+XwAkMqDuu9gcvokxscYpqZPwOf2wUOJgZWwhY3CltzBv4Bu35CJ9ZFmx3w55XgAGumHkMG3BNbbXbwvllEPO4mG1CKYEGZj2SmMT6Zhj1KwgMNnfdC+4U87GBduPa1pyAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"What's this trickery?!?! Is that MONOKAI for SAP Web IDE?!\"\n        title=\"\"\n        src=\"/blog/static/sapwebidecolors-e6d59dd4b3c1c3b91006bfdb294938f4-fb8a0.png\"\n        srcset=\"/blog/static/sapwebidecolors-e6d59dd4b3c1c3b91006bfdb294938f4-1a291.png 148w,\n/blog/static/sapwebidecolors-e6d59dd4b3c1c3b91006bfdb294938f4-2bc4a.png 295w,\n/blog/static/sapwebidecolors-e6d59dd4b3c1c3b91006bfdb294938f4-fb8a0.png 590w,\n/blog/static/sapwebidecolors-e6d59dd4b3c1c3b91006bfdb294938f4-526de.png 885w,\n/blog/static/sapwebidecolors-e6d59dd4b3c1c3b91006bfdb294938f4-fa2eb.png 1180w,\n/blog/static/sapwebidecolors-e6d59dd4b3c1c3b91006bfdb294938f4-08f6a.png 1770w,\n/blog/static/sapwebidecolors-e6d59dd4b3c1c3b91006bfdb294938f4-d437b.png 2136w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \nWhat’s this trickery?!?! Is that the MONOKAI color scheme for SAP Web IDE?!</p>\n<p>This obviously requires that you have tampermonkey installed for your browser - check out the <a href=\"https://tampermonkey.net/\">tampermonkey website on how to install it</a>.</p>\n<p>Once you’ve installed tampermonkey, just copy in and paste the script from below (or the <a href=\"https://github.com/frewinchristopher/sapwebidecolors\">GitHub</a> page) and all you should need to change is the <code>[YOUR_USER_NAME_HERE]</code> value in the <code>@match</code> variable. This username is your SAP ‘s’ username, an ‘s’ followed by 10 numbers, i.e. <code>S0123456789</code>.</p>\n<h2>TL;DR: Gimme Code!</h2>\n<p>The full code (as of January 11, 2018) is as follows:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code><span class=\"token comment\">// ==UserScript==</span>\n<span class=\"token comment\">// @name         Monokai Web IDE colors</span>\n<span class=\"token comment\">// @namespace    http://tampermonkey.net/</span>\n<span class=\"token comment\">// @version      1.0</span>\n<span class=\"token comment\">// @description  Changes the Ace Shell CSS in SAP Web IDE from any defaults to Monokai.</span>\n<span class=\"token comment\">// @author       Chris Frewin</span>\n<span class=\"token comment\">// @match        https://webide-[YOUR_USER_NAME_HERE]trial.dispatcher.hanatrial.ondemand.com</span>\n<span class=\"token comment\">// @grant        GM_getResourceText</span>\n<span class=\"token comment\">// @grant        GM_addStyle</span>\n<span class=\"token comment\">// @resource     customCSS https://raw.githubusercontent.com/ajaxorg/ace/master/lib/ace/theme/monokai.css</span>\n<span class=\"token comment\">// @require      http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js</span>\n<span class=\"token comment\">// @require      http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js</span>\n<span class=\"token comment\">// ==/UserScript==</span>\n\n<span class=\"token comment\">// *** NOTE: feel free to replace the 'customCSS' link above with any of the following ace themes found here: (make sure to select the raw version!)</span>\n<span class=\"token comment\">// https://github.com/ajaxorg/ace/tree/master/lib/ace/theme</span>\n\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> newCSS <span class=\"token operator\">=</span> <span class=\"token function\">GM_getResourceText</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"customCSS\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// monokai css for ace editor</span>\n    <span class=\"token function\">GM_addStyle</span> <span class=\"token punctuation\">(</span>newCSS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"added css...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> editor <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#__editor0\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// select editor ID</span>\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>editor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">removeClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// remove any of the default classes</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"removed default css...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>editor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addClass</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ace_editor\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// add back in original class</span>\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>editor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addClass</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ace-monokai\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// monokai colors class!</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"added ace-monokai css...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token number\">20000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n      </div>\n<p>I would recommend you check out the newest version on GitHub: <a href=\"https://github.com/frewinchristopher/sapwebidecolors\">https://github.com/frewinchristopher/sapwebidecolors</a></p>\n<p>Cheers! 🍺</p>"},{"id":"transformer-remark-markdown-html-eba90b509d721eed284273fd04503412-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":"<h2>No, It’s not Easter for Christmas…</h2>\n<h3>It’s a quick surprise for those celebrating christmas from npm!</h3>\n<p>Simply issue <code>npm xmas</code> in your terminal:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/npm-christmas-2a17567402dd88093188006fb75ee2b6-650df.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 104.14364640883977%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAACQklEQVQ4y61U2XLaQBDkLeEQQZbA5pIT0AGyIqFbCCQQ2HGl/BDHqeT//6QzWlEYh8Ok7IepkWZ2e3t6ZrcU6GO4YwVeosLVFbgGmavCv3IQfEowF39iJj4yi/hb8j8w5e8p/oSwkSEi++U94Lua4E/wgJJVlWGXj5tbO53/10qT8vDkAq9Jnn9HQAb2boCCTLqtSLc1+z4L0KkqR5OOKGPWjKk5OuwLilXewjBn1DRhNwxEoolM8mGLbwFkuinw6yGWEvkBMb2cngFYOcIu7zAnw+cCuFUDt4MUseq/quVhhrRp2TeYZveqgjlvIKXynYqCuP/1pJb7gAR2KwTUiDHWfIRF16JOa1gJPhLOLtaI/wEYE5PoovjOr17SJrY9jzS92cpwai5fAm70Ca9jRALd6c21dLoe5pzFGpSXm1wlR7XcA8wZPA0eqSwTYZtYNfRtfjlcYNYaIWhQs4TxQS2fATcnJp0QK6koe6lncKSQjY9d0/Dbu0PWDajzGhZ196CWW0CnR13seIgHhfBZy8Ts0sBCshDyasEw1zLfyI12ZvUQILELSJ+sHbLg6otFb+MKXt3HNNeNAIJehJS38E2hA2l8PN58UdnOYA+pLBMLwcF6dEcaakg7VtHxfrodlZAkmNYmiHsJNUdGyjnkR3t3vDShgDM04EkaZopFpSt0wJj5QJrAbhWl+Z8pTiPk9m8QdHWWnw+L9btavv4eCvLZTxcD1D72oX+4hltWn58t0sitFf+sLDbQGjOWr6pHAf8CkhZRHCiOkhwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"A nice little Christmas tree\"\n        title=\"\"\n        src=\"/blog/static/npm-christmas-2a17567402dd88093188006fb75ee2b6-fb8a0.png\"\n        srcset=\"/blog/static/npm-christmas-2a17567402dd88093188006fb75ee2b6-1a291.png 148w,\n/blog/static/npm-christmas-2a17567402dd88093188006fb75ee2b6-2bc4a.png 295w,\n/blog/static/npm-christmas-2a17567402dd88093188006fb75ee2b6-fb8a0.png 590w,\n/blog/static/npm-christmas-2a17567402dd88093188006fb75ee2b6-650df.png 724w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>(You would learned this only if you been a good boy or girl and read NPM’s recent Newsletter 😄😉)</p>\n<p>Another fun fact - the tree is not deterministic! Give it a few runs and you’ll see what I mean.</p>\n<p>Merry Christmas and a Happy New Year everyone!</p>"},{"id":"transformer-remark-markdown-html-8368319928f93d97bad3ed5d1674541b-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":"<h1>Laptop Stickers!</h1>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/laptopstickers1-ce10386796d1b866b5dd08091672a70c-b2a60.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAADBf/EABUBAQEAAAAAAAAAAAAAAAAAAAIB/9oADAMBAAIQAxAAAAE7wbB9CHGf/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAECERIh/9oACAEBAAEFAovkeGmUrs0f/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFhEBAQEAAAAAAAAAAAAAAAAAABEB/9oACAECAQE/Abiv/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAEgMXH/2gAIAQEABj8CwTZcP//EABsQAQACAgMAAAAAAAAAAAAAAAEAESFBMVGB/9oACAEBAAE/IbUrmE9hkhrPpco0xC3Kwj//2gAMAwEAAgADAAAAEOA//8QAFhEBAQEAAAAAAAAAAAAAAAAAABEB/9oACAEDAQE/EJqP/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/EKMP/8QAHBABAQACAgMAAAAAAAAAAAAAAREAMSGRYXHR/9oACAEBAAE/EDc9851PeQYwDKlO/GT0At5F3cCm1w04S+7Am3P/2Q=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"So hipster. Much win. Yes.\"\n        title=\"\"\n        src=\"/blog/static/laptopstickers1-ce10386796d1b866b5dd08091672a70c-f8fb9.jpg\"\n        srcset=\"/blog/static/laptopstickers1-ce10386796d1b866b5dd08091672a70c-e8976.jpg 148w,\n/blog/static/laptopstickers1-ce10386796d1b866b5dd08091672a70c-63df2.jpg 295w,\n/blog/static/laptopstickers1-ce10386796d1b866b5dd08091672a70c-f8fb9.jpg 590w,\n/blog/static/laptopstickers1-ce10386796d1b866b5dd08091672a70c-85e3d.jpg 885w,\n/blog/static/laptopstickers1-ce10386796d1b866b5dd08091672a70c-d1924.jpg 1180w,\n/blog/static/laptopstickers1-ce10386796d1b866b5dd08091672a70c-9452e.jpg 1770w,\n/blog/static/laptopstickers1-ce10386796d1b866b5dd08091672a70c-b2a60.jpg 3264w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Nothing shows others better that you are a humble, totally epic developer, than putting really cheap stickers on your really expensive laptop!</p>\n<p>(Okay, I can’t be <em>that</em> humble since I’m bragging about a few 50¢ stickers on a blog - and I’m even wrong on a second account - my Mac here is used, from 2013, and only set me back about $700 😄)</p>\n<h1>Tech stack</h1>\n<p>Okay, I’m lying; there are a few stickers there of tools I haven’t used in one of my applications yet, but am learning and plan to very soon:</p>\n<ul>\n<li>Redux</li>\n<li>TypeScript</li>\n<li>ReactiveX</li>\n</ul>\n<p>Otherwise, it’s my honest-to-goodness workflow tools.</p>\n<h1>So You Wanna Be Cool Too, Eh?</h1>\n<p>I ordered all of these on <a href=\"redbubble.com\">redbubble.com</a> No, no, it’s not what you think, its not an affiliate link! In fact, a good start portal for RedBubble is <a href=\"devstickers.com\">devstickers.com</a>. Unfortunately, I found I often had to find the 4-per-page stickers in order to have a sticker size that was suitable for me, <em>obviously</em> so I could fit as many dev stickers as possible on my laptop 😂 - see the picture for reference.</p>\n<p>Cheers! 🍺</p>"},{"id":"transformer-remark-markdown-ast-a60bf6189c1b048e350881bd57d5d833-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":{"type":"root","children":[{"type":"yaml","value":"title: Calculating Activity Amounts for Production and Process Orders with SAP ABAP\ndate: \"2018-01-03\"\ndraft: false","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":5,"column":4,"offset":123},"indent":[1,1,1,1]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"First off, Congratulations! 🎊","position":{"start":{"line":7,"column":3,"offset":127},"end":{"line":7,"column":33,"offset":157},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":125},"end":{"line":7,"column":33,"offset":157},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<sup>","position":{"start":{"line":8,"column":1,"offset":158},"end":{"line":8,"column":6,"offset":163},"indent":[]}},{"type":"text","value":"And a happy new year! (If you’re viewing this in the summer or something, see the date!)","position":{"start":{"line":8,"column":6,"offset":163},"end":{"line":8,"column":94,"offset":251},"indent":[]}},{"type":"html","value":"</sup>","position":{"start":{"line":8,"column":94,"offset":251},"end":{"line":8,"column":100,"offset":257},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":158},"end":{"line":8,"column":100,"offset":257},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"You’ve found the only post on the entire internet that describes the full process of calculating activity amounts for production order confirmations by programming it directly using SAP ABAP! 😱😱😱","position":{"start":{"line":9,"column":4,"offset":261},"end":{"line":9,"column":202,"offset":459},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":258},"end":{"line":9,"column":202,"offset":459},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"I hope you use this post to maximum effectiveness, because it took me four days to find, build, and get a working answer. 😄","position":{"start":{"line":10,"column":4,"offset":463},"end":{"line":10,"column":128,"offset":587},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":460},"end":{"line":10,"column":128,"offset":587},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"The Problem","position":{"start":{"line":12,"column":4,"offset":592},"end":{"line":12,"column":15,"offset":603},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":589},"end":{"line":12,"column":15,"offset":603},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Let’s jump right into ABAP programming: the go-to function module to calculate time ticket proposals for production orders is with function module ","position":{"start":{"line":14,"column":1,"offset":605},"end":{"line":14,"column":148,"offset":752},"indent":[]}},{"type":"inlineCode","value":"BAPI_PRODORDCONF_GET_TT_PROP","position":{"start":{"line":14,"column":148,"offset":752},"end":{"line":14,"column":178,"offset":782},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":14,"column":178,"offset":782},"end":{"line":14,"column":179,"offset":783},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":605},"end":{"line":14,"column":179,"offset":783},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'BAPI_PRODORDCONF_GET_TT_PROP'</span>\n<span class=\"token comment\">* EXPORTING</span>\n<span class=\"token comment\">*   PROPOSE                  = ' '</span>\n<span class=\"token comment\">* IMPORTING</span>\n<span class=\"token comment\">*   RETURN                   =</span>\n  <span class=\"token keyword\">TABLES</span>\n    timetickets              <span class=\"token operator\">=</span>\n<span class=\"token comment\">*   GOODSMOVEMENTS           =</span>\n<span class=\"token comment\">*   LINK_CONF_GOODSMOV       =</span>\n<span class=\"token comment\">*   DETAIL_RETURN            =</span>\n          <span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>","position":{"start":{"line":16,"column":1,"offset":785},"end":{"line":28,"column":4,"offset":1076},"indent":[1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Likewise, there is a very similiar ","position":{"start":{"line":30,"column":1,"offset":1078},"end":{"line":30,"column":36,"offset":1113},"indent":[]}},{"type":"inlineCode","value":"BAPI_PROCORDCONF_GET_TT_PROP","position":{"start":{"line":30,"column":36,"offset":1113},"end":{"line":30,"column":66,"offset":1143},"indent":[]}},{"type":"text","value":" for process orders:","position":{"start":{"line":30,"column":66,"offset":1143},"end":{"line":30,"column":86,"offset":1163},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":1078},"end":{"line":30,"column":86,"offset":1163},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'BAPI_PROCORDCONF_GET_TT_PROP'</span>\n<span class=\"token comment\">* EXPORTING</span>\n<span class=\"token comment\">*   PROPOSE                  = ' '</span>\n<span class=\"token comment\">* IMPORTING</span>\n<span class=\"token comment\">*   RETURN                   =</span>\n  <span class=\"token keyword\">TABLES</span>\n    timetickets              <span class=\"token operator\">=</span>\n<span class=\"token comment\">*   GOODSMOVEMENTS           =</span>\n<span class=\"token comment\">*   LINK_CONF_GOODSMOV       =</span>\n<span class=\"token comment\">*   DETAIL_RETURN            =</span>\n          <span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>","position":{"start":{"line":32,"column":1,"offset":1165},"end":{"line":44,"column":4,"offset":1456},"indent":[1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Pretty similar. However, as part of my indentured servitude that is being a full-time employee, I spent a day tinkering, writing, and testing code with these function modules. No matter what combinations of inputs I provided, I couldn’t get the ","position":{"start":{"line":46,"column":1,"offset":1458},"end":{"line":46,"column":246,"offset":1703},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"activity confirmation amount","position":{"start":{"line":46,"column":247,"offset":1704},"end":{"line":46,"column":275,"offset":1732},"indent":[]}}],"position":{"start":{"line":46,"column":246,"offset":1703},"end":{"line":46,"column":276,"offset":1733},"indent":[]}},{"type":"text","value":" to be calculated, which are a very important part of the final calculation of the confirmation! (more on the actual final confirmation submission is also included in later on) From scrounging around on SCN and the SAP blog, I learned that many developers had the same issue with these functions. (Things like date, yield/scrap amounts, and the goods movements would be proposed just fine by these BAPIs.)","position":{"start":{"line":46,"column":276,"offset":1733},"end":{"line":46,"column":681,"offset":2138},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":1458},"end":{"line":46,"column":681,"offset":2138},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"So, ","position":{"start":{"line":48,"column":1,"offset":2140},"end":{"line":48,"column":5,"offset":2144},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"calculating these activity confirmation amounts programmatically (in ABAP) will be the main focus of this post ","position":{"start":{"line":48,"column":7,"offset":2146},"end":{"line":48,"column":118,"offset":2257},"indent":[]}},{"type":"html","value":"<sup>","position":{"start":{"line":48,"column":118,"offset":2257},"end":{"line":48,"column":123,"offset":2262},"indent":[]}},{"type":"html","value":"<a href=\"#footnote-1\">","position":{"start":{"line":48,"column":123,"offset":2262},"end":{"line":48,"column":145,"offset":2284},"indent":[]}},{"type":"text","value":"2","position":{"start":{"line":48,"column":145,"offset":2284},"end":{"line":48,"column":146,"offset":2285},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":48,"column":146,"offset":2285},"end":{"line":48,"column":150,"offset":2289},"indent":[]}},{"type":"html","value":"</sup>","position":{"start":{"line":48,"column":150,"offset":2289},"end":{"line":48,"column":156,"offset":2295},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":48,"column":156,"offset":2295},"end":{"line":48,"column":157,"offset":2296},"indent":[]}}],"position":{"start":{"line":48,"column":5,"offset":2144},"end":{"line":48,"column":159,"offset":2298},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":2140},"end":{"line":48,"column":159,"offset":2298},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Unfortunately, with much more digging, the reason the two functions wouldn’t produce activity confirmation amounts never became quite clear to me. I realized I would have to calculate them in a more manual manner and then add them to those BAPI structures ","position":{"start":{"line":50,"column":1,"offset":2300},"end":{"line":50,"column":257,"offset":2556},"indent":[]}},{"type":"inlineCode","value":"lt_timetickets","position":{"start":{"line":50,"column":257,"offset":2556},"end":{"line":50,"column":273,"offset":2572},"indent":[]}},{"type":"text","value":" manually.","position":{"start":{"line":50,"column":273,"offset":2572},"end":{"line":50,"column":283,"offset":2582},"indent":[]}}],"position":{"start":{"line":50,"column":1,"offset":2300},"end":{"line":50,"column":283,"offset":2582},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"The Calculation Function Module","position":{"start":{"line":52,"column":4,"offset":2587},"end":{"line":52,"column":35,"offset":2618},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":2584},"end":{"line":52,"column":35,"offset":2618},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Through SAP GUI in transaction ","position":{"start":{"line":54,"column":1,"offset":2620},"end":{"line":54,"column":32,"offset":2651},"indent":[]}},{"type":"inlineCode","value":"CO11N","position":{"start":{"line":54,"column":32,"offset":2651},"end":{"line":54,"column":39,"offset":2658},"indent":[]}},{"type":"text","value":", determining system-proposed confirmation amounts is easy enough by and asking the system to do the calculation for us ","position":{"start":{"line":54,"column":39,"offset":2658},"end":{"line":54,"column":159,"offset":2778},"indent":[]}},{"type":"html","value":"<sup>","position":{"start":{"line":54,"column":159,"offset":2778},"end":{"line":54,"column":164,"offset":2783},"indent":[]}},{"type":"html","value":"<a href=\"#footnote-3\">","position":{"start":{"line":54,"column":164,"offset":2783},"end":{"line":54,"column":186,"offset":2805},"indent":[]}},{"type":"text","value":"3","position":{"start":{"line":54,"column":186,"offset":2805},"end":{"line":54,"column":187,"offset":2806},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":54,"column":187,"offset":2806},"end":{"line":54,"column":191,"offset":2810},"indent":[]}},{"type":"html","value":"</sup>","position":{"start":{"line":54,"column":191,"offset":2810},"end":{"line":54,"column":197,"offset":2816},"indent":[]}},{"type":"text","value":". My struggle was finding the programmatic way to do this in ABAP.","position":{"start":{"line":54,"column":197,"offset":2816},"end":{"line":54,"column":263,"offset":2882},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":2620},"end":{"line":54,"column":263,"offset":2882},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Anyone with significant production planning experience (i.e., not me 😂 ) knows that the actual formula behind the activity calculation is not with the activity itself, but with the work center ","position":{"start":{"line":56,"column":1,"offset":2884},"end":{"line":56,"column":195,"offset":3078},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"behind","position":{"start":{"line":56,"column":196,"offset":3079},"end":{"line":56,"column":202,"offset":3085},"indent":[]}}],"position":{"start":{"line":56,"column":195,"offset":3078},"end":{"line":56,"column":203,"offset":3086},"indent":[]}},{"type":"text","value":" the activity ","position":{"start":{"line":56,"column":203,"offset":3086},"end":{"line":56,"column":217,"offset":3100},"indent":[]}},{"type":"html","value":"<sup>","position":{"start":{"line":56,"column":217,"offset":3100},"end":{"line":56,"column":222,"offset":3105},"indent":[]}},{"type":"html","value":"<a href=\"#footnote-4\">","position":{"start":{"line":56,"column":222,"offset":3105},"end":{"line":56,"column":244,"offset":3127},"indent":[]}},{"type":"text","value":"3","position":{"start":{"line":56,"column":244,"offset":3127},"end":{"line":56,"column":245,"offset":3128},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":56,"column":245,"offset":3128},"end":{"line":56,"column":249,"offset":3132},"indent":[]}},{"type":"html","value":"</sup>","position":{"start":{"line":56,"column":249,"offset":3132},"end":{"line":56,"column":255,"offset":3138},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":56,"column":255,"offset":3138},"end":{"line":56,"column":256,"offset":3139},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":2884},"end":{"line":56,"column":256,"offset":3139},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In transaction ","position":{"start":{"line":58,"column":1,"offset":3141},"end":{"line":58,"column":16,"offset":3156},"indent":[]}},{"type":"inlineCode","value":"CR03","position":{"start":{"line":58,"column":16,"offset":3156},"end":{"line":58,"column":22,"offset":3162},"indent":[]}},{"type":"text","value":" (display work center), in the ‘Costing’ Tab, there is a ‘Formula’ button with the check symbol on it:","position":{"start":{"line":58,"column":22,"offset":3162},"end":{"line":58,"column":124,"offset":3264},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":3141},"end":{"line":58,"column":124,"offset":3264},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"test-formula.jpeg","alt":"GUI testing calculation","position":{"start":{"line":60,"column":1,"offset":3266},"end":{"line":60,"column":46,"offset":3311},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":3266},"end":{"line":60,"column":46,"offset":3311},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This was my starting point to find any sort of function that could do this programmatically - with more time, I learned from SCN of a function that does exactly that! It’s called ","position":{"start":{"line":62,"column":1,"offset":3313},"end":{"line":62,"column":180,"offset":3492},"indent":[]}},{"type":"inlineCode","value":"CR_WORKCENTER_FORMULA_CALC","position":{"start":{"line":62,"column":180,"offset":3492},"end":{"line":62,"column":208,"offset":3520},"indent":[]}},{"type":"text","value":"!","position":{"start":{"line":62,"column":208,"offset":3520},"end":{"line":62,"column":209,"offset":3521},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":3313},"end":{"line":62,"column":209,"offset":3521},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Let’s head on over to transaction ","position":{"start":{"line":64,"column":1,"offset":3523},"end":{"line":64,"column":35,"offset":3557},"indent":[]}},{"type":"inlineCode","value":"SE37","position":{"start":{"line":64,"column":35,"offset":3557},"end":{"line":64,"column":41,"offset":3563},"indent":[]}},{"type":"text","value":" and test it ourselves!","position":{"start":{"line":64,"column":41,"offset":3563},"end":{"line":64,"column":64,"offset":3586},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":3523},"end":{"line":64,"column":64,"offset":3586},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"error-test-frame.jpeg","alt":"Yep, that's SAP","position":{"start":{"line":66,"column":1,"offset":3588},"end":{"line":66,"column":42,"offset":3629},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":3588},"end":{"line":66,"column":42,"offset":3629},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"😑😑😑 shit… SAP, you had one job to do!","position":{"start":{"line":68,"column":1,"offset":3631},"end":{"line":68,"column":43,"offset":3673},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":3631},"end":{"line":68,"column":43,"offset":3673},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Fine. We’ll do it ourselves. We can open up the source code of ","position":{"start":{"line":70,"column":1,"offset":3675},"end":{"line":70,"column":64,"offset":3738},"indent":[]}},{"type":"inlineCode","value":"CR_WORKCENTER_FORMULA_CALC","position":{"start":{"line":70,"column":64,"offset":3738},"end":{"line":70,"column":92,"offset":3766},"indent":[]}},{"type":"text","value":" and set a breakpoint in the first line:","position":{"start":{"line":70,"column":92,"offset":3766},"end":{"line":70,"column":132,"offset":3806},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":3675},"end":{"line":70,"column":132,"offset":3806},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"function-breakpoint.png","alt":"The first possible line in the function we can breakpoint","position":{"start":{"line":72,"column":1,"offset":3808},"end":{"line":72,"column":86,"offset":3893},"indent":[]},"value":"\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/function-breakpoint-7f2c794c579923ae724605626ba5369b-f1f65.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 61.25954198473282%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABR0lEQVQoz5WS63KDIBCF8ypt0okXQIyXxIBATDCavv/znC7WjpM/Hf3BrKzD2Q/O2SVJAsYY0jRFdkzg9gJ1xNFcr5C5RBzHm9YuCHLBJ0FJgubAEdH3VqE3QcZ/CUNDty363kNrhZh6OQ2RXEAIgTzPkWXZesLQcF2H79eA0A/78UPClWf4YYB/9ui8RzT/W0XYGgPf08HuBinlLHjBuWngbvZfsYWQL4TGGgzjQIcdnLPoPzOoot5oypugJUKPB1E6R+JEaOnKeVGgoHWitckUpTXu9w7ja4SgQYHQVhc86f1OZQkh5TZTLF3zSQaMvoc/ZHicmukJOhpSHxlailWZRNBUmy825VZRNXtORqYzIVsIw/WDGXwOetiHuDCqq95wKOu3YDuaFMJ9VYqyqKGotqZFWVUbgj0T/tEFooly3qdpstrlH3u1coVcvutYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"The first possible line in the function we can breakpoint\"\n        title=\"\"\n        src=\"/blog/static/function-breakpoint-7f2c794c579923ae724605626ba5369b-fb8a0.png\"\n        srcset=\"/blog/static/function-breakpoint-7f2c794c579923ae724605626ba5369b-1a291.png 148w,\n/blog/static/function-breakpoint-7f2c794c579923ae724605626ba5369b-2bc4a.png 295w,\n/blog/static/function-breakpoint-7f2c794c579923ae724605626ba5369b-fb8a0.png 590w,\n/blog/static/function-breakpoint-7f2c794c579923ae724605626ba5369b-526de.png 885w,\n/blog/static/function-breakpoint-7f2c794c579923ae724605626ba5369b-f1f65.png 1048w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    "}],"position":{"start":{"line":72,"column":1,"offset":3808},"end":{"line":72,"column":86,"offset":3893},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"and in CR03, drag our ","position":{"start":{"line":74,"column":1,"offset":3895},"end":{"line":74,"column":23,"offset":3917},"indent":[]}},{"type":"link","title":null,"url":"https://chrisfrew.in/debugging-abap-with-sap-shortcut","children":[{"type":"text","value":"debugging shortcut into the calculation window","position":{"start":{"line":74,"column":24,"offset":3918},"end":{"line":74,"column":70,"offset":3964},"indent":[]}}],"position":{"start":{"line":74,"column":23,"offset":3917},"end":{"line":74,"column":126,"offset":4020},"indent":[]}},{"type":"text","value":", and we press return SAP debugging’s return button to jump out to whatever parent program is calling this function… ","position":{"start":{"line":74,"column":126,"offset":4020},"end":{"line":74,"column":245,"offset":4139},"indent":[]}},{"type":"html","value":"\n  <a class=\"gatsby-resp-image-link\" href=\"/blog/static/return-00b1c8c77e113cd8f5a0809a202489c2-0c9b0.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n  \n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; ; max-width: 58px; margin-left: auto; margin-right: auto;\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAACj0lEQVQ4y9WUy06TQRiGWbv0BrgFlm5MjFfghoWEhSIJJkQSVKBKOFSCIEJCKiooBBALCATahBKIcsZISilt/xYolFIOErSlfwsUaAUep8UGJYVg1IWLNzOTmTzzfoeZOJ9xmr+puH8OlCdtR6NBOp6LUf4d4DHEinfCgldvYsvmYnPKjjwhHR0+JzTu2JkVv2We7bk1Qut7WB4rWBwdISDWYbe+qRlOiyaGwyPY+vt+bCW5zFeV03clHs2liziHBsTBWeRxM7Je+iGLcG6NCY0AvXozO043loJMepMvY2yuoftqPF0JF1ixTHKwEyLkkfkmbwr52d/cZndlXaRHiu3QK24MA6XCuxjV1ewfgCE/A7d+nLeNLSQmJ3ErLY0bKTdJSU0lMek6qtIy9mdcbJyA/uJQKryH/nkxm9ICPoONXfMcExodrVU19HVqGB4ZYWhgkA8D/ZjGPrEt8npmyJIIeaq1lsAW+FxfkB1rbJtmYclNb3Mbt9PTeaBQkJ5xh/qqF4RsTjYM1tjAwMJXpKJseq4l8LE4k8GsZIyVSnwWB37hwjQ0RqdWQ0+3ji6tlvH+QQLiMm8shxHbYtM9Oo6rsQ5X/WsWa1+y2t6GR1QzIMLXNbVwX5FDkVJJtnDZ/KqOoHUhtsMo1G+yszW7wpZ9VfTjZ/wil0HnKgQPmZ4w0vCmkY62dprUaoZ1veyY7Wc4jD6x8JMTt3pE5YPSPFp1K9kFeZRVVFD5TEWlSkVpRTnalnfsSQ68pzk8qXAoQdsCPQ1qHuU85Gm+kpLcfJ7kFVKQpaCjui6yv3FeYKRY4vCe1QFzKxzal4SWIyNzyxGYd9J6/u8rmoYw1COad+MnhdfRUGP24f/1wf6pvgPpiV2HYVoizQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\">\n      <img class=\"gatsby-resp-image-image\" style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\" alt=\"return\" title=\"\" src=\"/blog/static/return-00b1c8c77e113cd8f5a0809a202489c2-0c9b0.png\" srcset=\"/blog/static/return-00b1c8c77e113cd8f5a0809a202489c2-0c9b0.png 58w\" sizes=\"(max-width: 58px) 100vw, 58px\">\n    </span>\n  </span>\n  \n  </a>\n    ","position":{"start":{"line":74,"column":245,"offset":4139},"end":{"line":74,"column":268,"offset":4162},"indent":[]}},{"type":"text","value":" and…","position":{"start":{"line":74,"column":268,"offset":4162},"end":{"line":74,"column":275,"offset":4169},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":3895},"end":{"line":74,"column":275,"offset":4169},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"🙏 Violá! 🙏 We’ve found where ","position":{"start":{"line":76,"column":1,"offset":4171},"end":{"line":76,"column":32,"offset":4202},"indent":[]}},{"type":"inlineCode","value":"CR_WORKCENTER_FORMULA_CALC","position":{"start":{"line":76,"column":32,"offset":4202},"end":{"line":76,"column":60,"offset":4230},"indent":[]}},{"type":"text","value":" is called out in the wild!","position":{"start":{"line":76,"column":60,"offset":4230},"end":{"line":76,"column":87,"offset":4257},"indent":[]}}],"position":{"start":{"line":76,"column":1,"offset":4171},"end":{"line":76,"column":87,"offset":4257},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"function-found.png","alt":"There you are `CR_WORKCENTER_FORMULA_CALC`","position":{"start":{"line":78,"column":1,"offset":4259},"end":{"line":78,"column":66,"offset":4324},"indent":[]},"value":"\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/function-found-264ed624475401f4e4bc06397a03d9b9-f42d4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 80.1670146137787%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABsElEQVQ4y5WT627iMBCF+yy7vcWX3CEXx4SEJu1WK22FhETL+z/H6YwhXSBBpT9GljX25zMzxzdBEEBKCaUVfN8H72dJhDSKkcQxwjB0oZSE53nfxo0DKgZqCCEgCN7aAn/zGl1hIfwQ6XwOu1ggL4rrgAxSSu3XRw+5DmEqg5LCmBKCzvjK+5lCfVAoCZjeS/gP4irANJB7eFCoCdT9CmDuNapbDXOnENODpQmweorRrmK3mor2XYymiVCWdJ7yp0C9Bw4vJaSyJmB1p5E/cO5UybDnu1KKr7v/h6JOgUN0fUcKynF5UYI/r6+omyUqa5Fl2dFQpLgItAtLdtJjoPZdrmmbE/XfKmS7rFbtGBhE6J972GXt8gPUARl23sOYerj8rdGHOWqdjIHUuzRNXcxmszMfUsmsckoh96aylTM1/5jjkudk+EnbsMLBh+cHaiqppZIKAvLXPB4K5y77UE/3kNVl2fziUKIonAael5wcesjGZi9O/QolHn9e8vPLi/Pb29s/9P2Ts4kxZl9ycjsGFtnhD5PCpmmw2Wyw/fjAdrfDZvuOHa3vtF+v11fFJxYD8ulTKPJeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"There you are `CR_WORKCENTER_FORMULA_CALC`\"\n        title=\"\"\n        src=\"/blog/static/function-found-264ed624475401f4e4bc06397a03d9b9-fb8a0.png\"\n        srcset=\"/blog/static/function-found-264ed624475401f4e4bc06397a03d9b9-1a291.png 148w,\n/blog/static/function-found-264ed624475401f4e4bc06397a03d9b9-2bc4a.png 295w,\n/blog/static/function-found-264ed624475401f4e4bc06397a03d9b9-fb8a0.png 590w,\n/blog/static/function-found-264ed624475401f4e4bc06397a03d9b9-526de.png 885w,\n/blog/static/function-found-264ed624475401f4e4bc06397a03d9b9-f42d4.png 958w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    "}],"position":{"start":{"line":78,"column":1,"offset":4259},"end":{"line":78,"column":66,"offset":4324},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"(For those deeply interested, you can find exactly where the function is called in SAP Program ","position":{"start":{"line":80,"column":1,"offset":4326},"end":{"line":80,"column":96,"offset":4421},"indent":[]}},{"type":"inlineCode","value":"SAPLCRA0","position":{"start":{"line":80,"column":96,"offset":4421},"end":{"line":80,"column":106,"offset":4431},"indent":[]}},{"type":"text","value":", Include ","position":{"start":{"line":80,"column":106,"offset":4431},"end":{"line":80,"column":116,"offset":4441},"indent":[]}},{"type":"inlineCode","value":"LCRA0F71","position":{"start":{"line":80,"column":116,"offset":4441},"end":{"line":80,"column":126,"offset":4451},"indent":[]}},{"type":"text","value":", line 55, at least for SAPGUI 740.)","position":{"start":{"line":80,"column":126,"offset":4451},"end":{"line":80,"column":162,"offset":4487},"indent":[]}}],"position":{"start":{"line":80,"column":1,"offset":4326},"end":{"line":80,"column":162,"offset":4487},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"form-program.png","alt":"Calling program details","position":{"start":{"line":82,"column":1,"offset":4489},"end":{"line":82,"column":45,"offset":4533},"indent":[]},"value":"\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/form-program-1d2cbb852e085c74901d5a542ef48c3a-ab5af.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 12.916666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAjklEQVQI13WNyw7CIBBF+f+PMi60MbEiUIqUIlQaY/CV+gXXCSZd1cXJzUzmnmEX0SByhbv1eLqwyIPI/oxwkBiOCjfT/71lYrWBrWrkloSWll1EPnkkrnGVtuQoDYJQUOsKYU/Cxv1uF2CKhFM3FD4+4e0iCTQ0le22Rkvp6WHYCTiaX9zMTDbO3dLvE767N9XvLiHEkQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Calling program details\"\n        title=\"\"\n        src=\"/blog/static/form-program-1d2cbb852e085c74901d5a542ef48c3a-fb8a0.png\"\n        srcset=\"/blog/static/form-program-1d2cbb852e085c74901d5a542ef48c3a-1a291.png 148w,\n/blog/static/form-program-1d2cbb852e085c74901d5a542ef48c3a-2bc4a.png 295w,\n/blog/static/form-program-1d2cbb852e085c74901d5a542ef48c3a-fb8a0.png 590w,\n/blog/static/form-program-1d2cbb852e085c74901d5a542ef48c3a-526de.png 885w,\n/blog/static/form-program-1d2cbb852e085c74901d5a542ef48c3a-ab5af.png 960w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    "}],"position":{"start":{"line":82,"column":1,"offset":4489},"end":{"line":82,"column":45,"offset":4533},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"The Details (The Hard Part)","position":{"start":{"line":84,"column":4,"offset":4538},"end":{"line":84,"column":31,"offset":4565},"indent":[]}}],"position":{"start":{"line":84,"column":1,"offset":4535},"end":{"line":84,"column":31,"offset":4565},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"So what the heck does SAP do with this function? Well, first, they are doing a do loop six times. Aha, we know why - because there can be a total of six confirmation values ","position":{"start":{"line":86,"column":1,"offset":4567},"end":{"line":86,"column":174,"offset":4740},"indent":[]}},{"type":"html","value":"<sup>","position":{"start":{"line":86,"column":174,"offset":4740},"end":{"line":86,"column":179,"offset":4745},"indent":[]}},{"type":"html","value":"<a href=\"#footnote-3\">","position":{"start":{"line":86,"column":179,"offset":4745},"end":{"line":86,"column":201,"offset":4767},"indent":[]}},{"type":"text","value":"3","position":{"start":{"line":86,"column":201,"offset":4767},"end":{"line":86,"column":202,"offset":4768},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":86,"column":202,"offset":4768},"end":{"line":86,"column":206,"offset":4772},"indent":[]}},{"type":"html","value":"</sup>","position":{"start":{"line":86,"column":206,"offset":4772},"end":{"line":86,"column":212,"offset":4778},"indent":[]}},{"type":"text","value":"  - SAP is by default looping over all of them.","position":{"start":{"line":86,"column":212,"offset":4778},"end":{"line":86,"column":259,"offset":4825},"indent":[]}}],"position":{"start":{"line":86,"column":1,"offset":4567},"end":{"line":86,"column":259,"offset":4825},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now for the function parameters themselves: they pass the work center code (","position":{"start":{"line":88,"column":1,"offset":4827},"end":{"line":88,"column":77,"offset":4903},"indent":[]}},{"type":"inlineCode","value":"arbid","position":{"start":{"line":88,"column":77,"offset":4903},"end":{"line":88,"column":84,"offset":4910},"indent":[]}},{"type":"text","value":"), the operation number (","position":{"start":{"line":88,"column":84,"offset":4910},"end":{"line":88,"column":109,"offset":4935},"indent":[]}},{"type":"inlineCode","value":"rcrop","position":{"start":{"line":88,"column":109,"offset":4935},"end":{"line":88,"column":116,"offset":4942},"indent":[]}},{"type":"text","value":"), the index of the confirmation (a value of 1-6), our 4 default values (","position":{"start":{"line":88,"column":116,"offset":4942},"end":{"line":88,"column":189,"offset":5015},"indent":[]}},{"type":"inlineCode","value":"vgw","position":{"start":{"line":88,"column":189,"offset":5015},"end":{"line":88,"column":194,"offset":5020},"indent":[]}},{"type":"text","value":"), and the date (","position":{"start":{"line":88,"column":194,"offset":5020},"end":{"line":88,"column":211,"offset":5037},"indent":[]}},{"type":"inlineCode","value":"date","position":{"start":{"line":88,"column":211,"offset":5037},"end":{"line":88,"column":217,"offset":5043},"indent":[]}},{"type":"text","value":").","position":{"start":{"line":88,"column":217,"offset":5043},"end":{"line":88,"column":219,"offset":5045},"indent":[]}}],"position":{"start":{"line":88,"column":1,"offset":4827},"end":{"line":88,"column":219,"offset":5045},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In turn, the function spits out the fixed value amount of the activity calculation (","position":{"start":{"line":90,"column":1,"offset":5047},"end":{"line":90,"column":85,"offset":5131},"indent":[]}},{"type":"inlineCode","value":"value_fix","position":{"start":{"line":90,"column":85,"offset":5131},"end":{"line":90,"column":96,"offset":5142},"indent":[]}},{"type":"text","value":"), the variable part (","position":{"start":{"line":90,"column":96,"offset":5142},"end":{"line":90,"column":118,"offset":5164},"indent":[]}},{"type":"inlineCode","value":"value_var","position":{"start":{"line":90,"column":118,"offset":5164},"end":{"line":90,"column":129,"offset":5175},"indent":[]}},{"type":"text","value":"), both in whatever unit the function gives out in ","position":{"start":{"line":90,"column":129,"offset":5175},"end":{"line":90,"column":180,"offset":5226},"indent":[]}},{"type":"inlineCode","value":"unit","position":{"start":{"line":90,"column":180,"offset":5226},"end":{"line":90,"column":186,"offset":5232},"indent":[]}},{"type":"text","value":", and ","position":{"start":{"line":90,"column":186,"offset":5232},"end":{"line":90,"column":192,"offset":5238},"indent":[]}},{"type":"inlineCode","value":"co_a","position":{"start":{"line":90,"column":192,"offset":5238},"end":{"line":90,"column":198,"offset":5244},"indent":[]}},{"type":"text","value":" is for the cost center accounting ","position":{"start":{"line":90,"column":198,"offset":5244},"end":{"line":90,"column":233,"offset":5279},"indent":[]}},{"type":"html","value":"<sup>","position":{"start":{"line":90,"column":233,"offset":5279},"end":{"line":90,"column":238,"offset":5284},"indent":[]}},{"type":"html","value":"<a href=\"#footnote-4\">","position":{"start":{"line":90,"column":238,"offset":5284},"end":{"line":90,"column":260,"offset":5306},"indent":[]}},{"type":"text","value":"4","position":{"start":{"line":90,"column":260,"offset":5306},"end":{"line":90,"column":261,"offset":5307},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":90,"column":261,"offset":5307},"end":{"line":90,"column":265,"offset":5311},"indent":[]}},{"type":"html","value":"</sup>","position":{"start":{"line":90,"column":265,"offset":5311},"end":{"line":90,"column":271,"offset":5317},"indent":[]}},{"type":"text","value":". There are actually four exceptions to this function, so I’m not sure why SAP internal is taking only two of them. In any case, there are other ","position":{"start":{"line":90,"column":271,"offset":5317},"end":{"line":90,"column":416,"offset":5462},"indent":[]}},{"type":"inlineCode","value":"IMPORTING","position":{"start":{"line":90,"column":416,"offset":5462},"end":{"line":90,"column":427,"offset":5473},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":90,"column":427,"offset":5473},"end":{"line":90,"column":432,"offset":5478},"indent":[]}},{"type":"inlineCode","value":"EXPORTING","position":{"start":{"line":90,"column":432,"offset":5478},"end":{"line":90,"column":443,"offset":5489},"indent":[]}},{"type":"text","value":" parameters in the function signature, but this looks like a good starting point as a minimum. In fact, as you’ll see below, the final working version of the code I created is almost exactly the same except where I found out with a bit of playing around.","position":{"start":{"line":90,"column":443,"offset":5489},"end":{"line":90,"column":697,"offset":5743},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":5047},"end":{"line":90,"column":697,"offset":5743},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"So I mentioned the default values that must go into ","position":{"start":{"line":92,"column":1,"offset":5745},"end":{"line":92,"column":53,"offset":5797},"indent":[]}},{"type":"inlineCode","value":"vgw","position":{"start":{"line":92,"column":53,"offset":5797},"end":{"line":92,"column":58,"offset":5802},"indent":[]}},{"type":"text","value":" - these are the four values that are the equivalent of those four fields we can type into in ","position":{"start":{"line":92,"column":58,"offset":5802},"end":{"line":92,"column":152,"offset":5896},"indent":[]}},{"type":"inlineCode","value":"COR3","position":{"start":{"line":92,"column":152,"offset":5896},"end":{"line":92,"column":158,"offset":5902},"indent":[]}},{"type":"text","value":" for checking the formula, things like setup time, machine time, personnel setup, and personnel time. It might sound like a lot of work to hunt down these values, but luckily these are master data and can be determined with a few select statements, first from table ","position":{"start":{"line":92,"column":158,"offset":5902},"end":{"line":92,"column":424,"offset":6168},"indent":[]}},{"type":"inlineCode","value":"AFVC","position":{"start":{"line":92,"column":424,"offset":6168},"end":{"line":92,"column":430,"offset":6174},"indent":[]}},{"type":"text","value":" ‘operation within an order’, and then table ","position":{"start":{"line":92,"column":430,"offset":6174},"end":{"line":92,"column":475,"offset":6219},"indent":[]}},{"type":"inlineCode","value":"PLPO","position":{"start":{"line":92,"column":475,"offset":6219},"end":{"line":92,"column":481,"offset":6225},"indent":[]}},{"type":"text","value":" ‘task list - operation/activity’:","position":{"start":{"line":92,"column":481,"offset":6225},"end":{"line":92,"column":515,"offset":6259},"indent":[]}}],"position":{"start":{"line":92,"column":1,"offset":5745},"end":{"line":92,"column":515,"offset":6259},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token eol-comment comment\">\" this is the full key for table AFVC - operation within an order - for the routing number and counter - should always work with SELECT SINGLE</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">SINGLE</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> afvc <span class=\"token keyword\">INTO</span> ls_afvc\n  <span class=\"token keyword\">WHERE</span> aufpl <span class=\"token operator\">=</span> ls_operation<span class=\"token token-operator punctuation\">-</span>routing_no\n  <span class=\"token keyword\">AND</span>   aplzl <span class=\"token operator\">=</span> ls_operation<span class=\"token token-operator punctuation\">-</span>counter<span class=\"token punctuation\">.</span>\n\n<span class=\"token eol-comment comment\">\" this is the full key for table PLPO - task list - operation/activity - so it should always work with SELECT SINGLE</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">SINGLE</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> plpo <span class=\"token keyword\">INTO</span> ls_plpo\n  <span class=\"token keyword\">WHERE</span> plnty <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>plnty\n  <span class=\"token keyword\">AND</span> plnnr <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>plnnr\n  <span class=\"token keyword\">AND</span> plnkn <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>plnkn\n  <span class=\"token keyword\">AND</span> zaehl <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>zaehl<span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>","position":{"start":{"line":94,"column":1,"offset":6261},"end":{"line":106,"column":4,"offset":6808},"indent":[1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The routing number ","position":{"start":{"line":108,"column":1,"offset":6810},"end":{"line":108,"column":20,"offset":6829},"indent":[]}},{"type":"inlineCode","value":"ls_operation-routing_no","position":{"start":{"line":108,"column":20,"offset":6829},"end":{"line":108,"column":45,"offset":6854},"indent":[]}},{"type":"text","value":" and counter ","position":{"start":{"line":108,"column":45,"offset":6854},"end":{"line":108,"column":58,"offset":6867},"indent":[]}},{"type":"inlineCode","value":"ls_operation-counter","position":{"start":{"line":108,"column":58,"offset":6867},"end":{"line":108,"column":80,"offset":6889},"indent":[]}},{"type":"text","value":" we’ve gotten from function ","position":{"start":{"line":108,"column":80,"offset":6889},"end":{"line":108,"column":108,"offset":6917},"indent":[]}},{"type":"inlineCode","value":"BAPI_PRODORD_GET_DETAIL","position":{"start":{"line":108,"column":108,"offset":6917},"end":{"line":108,"column":133,"offset":6942},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":108,"column":133,"offset":6942},"end":{"line":108,"column":134,"offset":6943},"indent":[]}}],"position":{"start":{"line":108,"column":1,"offset":6810},"end":{"line":108,"column":134,"offset":6943},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token eol-comment comment\">\" need only the operations from the function</span>\n    ls_order_objects<span class=\"token token-operator punctuation\">-</span>operations <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n    lv_number <span class=\"token operator\">=</span> ls_orderid_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'BAPI_PRODORD_GET_DETAIL'</span>\n      <span class=\"token keyword\">EXPORTING</span>\n        <span class=\"token keyword\">number</span>        <span class=\"token operator\">=</span> lv_number\n<span class=\"token comment\">*       COLLECTIVE_ORDER       =</span>\n        order_objects <span class=\"token operator\">=</span> ls_order_objects\n<span class=\"token comment\">*     IMPORTING</span>\n<span class=\"token comment\">*       RETURN        =</span>\n      <span class=\"token keyword\">TABLES</span>\n<span class=\"token comment\">*       HEADER        =</span>\n<span class=\"token comment\">*       POSITION      =</span>\n<span class=\"token comment\">*       SEQUENCE      =</span>\n        operation     <span class=\"token operator\">=</span> lt_operation\n<span class=\"token comment\">*       TRIGGER_POINT =</span>\n<span class=\"token comment\">*       COMPONENT     =</span>\n<span class=\"token comment\">*       PROD_REL_TOOL =</span>\n      <span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>","position":{"start":{"line":110,"column":1,"offset":6945},"end":{"line":131,"column":4,"offset":7486},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"(There is plenty of SAP standard documentation and discussion on SCN on how to use ","position":{"start":{"line":133,"column":1,"offset":7488},"end":{"line":133,"column":84,"offset":7571},"indent":[]}},{"type":"inlineCode","value":"BAPI_PRODORD_GET_DETAIL","position":{"start":{"line":133,"column":84,"offset":7571},"end":{"line":133,"column":109,"offset":7596},"indent":[]}},{"type":"text","value":", so I’ll leave that to you if you need more info 😉. Here we are just getting the operation information from the order - that’s all we need.)","position":{"start":{"line":133,"column":109,"offset":7596},"end":{"line":133,"column":251,"offset":7738},"indent":[]}}],"position":{"start":{"line":133,"column":1,"offset":7488},"end":{"line":133,"column":251,"offset":7738},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We can finally move the corresponding fields of ","position":{"start":{"line":135,"column":1,"offset":7740},"end":{"line":135,"column":49,"offset":7788},"indent":[]}},{"type":"inlineCode","value":"ls_plpo","position":{"start":{"line":135,"column":49,"offset":7788},"end":{"line":135,"column":58,"offset":7797},"indent":[]}},{"type":"text","value":" to ","position":{"start":{"line":135,"column":58,"offset":7797},"end":{"line":135,"column":62,"offset":7801},"indent":[]}},{"type":"inlineCode","value":"ls_vgw","position":{"start":{"line":135,"column":62,"offset":7801},"end":{"line":135,"column":70,"offset":7809},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":135,"column":70,"offset":7809},"end":{"line":135,"column":71,"offset":7810},"indent":[]}}],"position":{"start":{"line":135,"column":1,"offset":7740},"end":{"line":135,"column":71,"offset":7810},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">MOVE-CORRESPONDING</span> ls_plpo <span class=\"token keyword\">TO</span> ls_vgw<span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>","position":{"start":{"line":137,"column":1,"offset":7812},"end":{"line":139,"column":4,"offset":7861},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"However, in addition to these four values, there are two more that are essential, that is the yield amount (","position":{"start":{"line":141,"column":1,"offset":7863},"end":{"line":141,"column":109,"offset":7971},"indent":[]}},{"type":"inlineCode","value":"mgvrg","position":{"start":{"line":141,"column":109,"offset":7971},"end":{"line":141,"column":116,"offset":7978},"indent":[]}},{"type":"text","value":"), and the unit (","position":{"start":{"line":141,"column":116,"offset":7978},"end":{"line":141,"column":133,"offset":7995},"indent":[]}},{"type":"inlineCode","value":"meinh","position":{"start":{"line":141,"column":133,"offset":7995},"end":{"line":141,"column":140,"offset":8002},"indent":[]}},{"type":"text","value":")! We can pass them right into ","position":{"start":{"line":141,"column":140,"offset":8002},"end":{"line":141,"column":171,"offset":8033},"indent":[]}},{"type":"inlineCode","value":"ls_op","position":{"start":{"line":141,"column":171,"offset":8033},"end":{"line":141,"column":178,"offset":8040},"indent":[]}},{"type":"text","value":" as well:","position":{"start":{"line":141,"column":178,"offset":8040},"end":{"line":141,"column":187,"offset":8049},"indent":[]}}],"position":{"start":{"line":141,"column":1,"offset":7863},"end":{"line":141,"column":187,"offset":8049},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">MOVE-CORRESPONDING</span> ls_plpo <span class=\"token keyword\">TO</span> ls_op<span class=\"token punctuation\">.</span>\nls_op<span class=\"token token-operator punctuation\">-</span>mgvrg <span class=\"token operator\">=</span> ls_yield_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\nls_op<span class=\"token token-operator punctuation\">-</span>meinh <span class=\"token operator\">=</span> ls_conf_quan_unit_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>","position":{"start":{"line":143,"column":1,"offset":8051},"end":{"line":147,"column":4,"offset":8170},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Armed with our structures ","position":{"start":{"line":149,"column":1,"offset":8172},"end":{"line":149,"column":27,"offset":8198},"indent":[]}},{"type":"inlineCode","value":"ls_afvc","position":{"start":{"line":149,"column":27,"offset":8198},"end":{"line":149,"column":36,"offset":8207},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":149,"column":36,"offset":8207},"end":{"line":149,"column":38,"offset":8209},"indent":[]}},{"type":"inlineCode","value":"ls_op","position":{"start":{"line":149,"column":38,"offset":8209},"end":{"line":149,"column":45,"offset":8216},"indent":[]}},{"type":"text","value":", and ","position":{"start":{"line":149,"column":45,"offset":8216},"end":{"line":149,"column":51,"offset":8222},"indent":[]}},{"type":"inlineCode","value":"ls_vgw","position":{"start":{"line":149,"column":51,"offset":8222},"end":{"line":149,"column":59,"offset":8230},"indent":[]}},{"type":"text","value":", we are ready to call our function:","position":{"start":{"line":149,"column":59,"offset":8230},"end":{"line":149,"column":95,"offset":8266},"indent":[]}}],"position":{"start":{"line":149,"column":1,"offset":8172},"end":{"line":149,"column":95,"offset":8266},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'CR_WORKCENTER_FORMULA_CALC'</span> <span class=\"token eol-comment comment\">\" You can see a SAP standard example with the function in the source code for transaction CR03 for costing formula: Program SAPLCRA0, Include LCRA0F71, Form FORMEL_RESULT_CALC, line 55</span>\n  <span class=\"token keyword\">EXPORTING</span>\n    arbid             <span class=\"token operator\">=</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>arbid\n    op                <span class=\"token operator\">=</span> ls_op\n    vgw               <span class=\"token operator\">=</span> ls_vgw\n    <span class=\"token keyword\">index</span>             <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>index\n    <span class=\"token keyword\">date</span>              <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>datum\n  <span class=\"token keyword\">IMPORTING</span>\n    value_fix          <span class=\"token operator\">=</span> lv_value_fix\n    value_var         <span class=\"token operator\">=</span> lv_value_var\n    <span class=\"token keyword\">unit</span>              <span class=\"token operator\">=</span> lv_unit\n  <span class=\"token keyword\">EXCEPTIONS</span>\n    missing_parameter <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n    not_found         <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n    division_by_zero  <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n    <span class=\"token keyword\">OTHERS</span>            <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">CONCATENATE</span> sy<span class=\"token token-operator punctuation\">-</span>msgno sy<span class=\"token token-operator punctuation\">-</span>msgid sy<span class=\"token token-operator punctuation\">-</span>msgv1 sy<span class=\"token token-operator punctuation\">-</span>msgv2 sy<span class=\"token token-operator punctuation\">-</span>msgv3 sy<span class=\"token token-operator punctuation\">-</span>msgv4 <span class=\"token keyword\">INTO</span> es_entityset<span class=\"token token-operator punctuation\">-</span>error_message<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>","position":{"start":{"line":151,"column":1,"offset":8268},"end":{"line":172,"column":4,"offset":9086},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We want the total, right? Okay, we just add the fixed value and variable value part:","position":{"start":{"line":174,"column":1,"offset":9088},"end":{"line":174,"column":85,"offset":9172},"indent":[]}}],"position":{"start":{"line":174,"column":1,"offset":9088},"end":{"line":174,"column":85,"offset":9172},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code>lv_value <span class=\"token operator\">=</span> lv_value_fix <span class=\"token operator\">+</span> lv_value_var<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" total value is the sum of the fixed and variable values for this activity</span>\n</code></pre>\n      </div>","position":{"start":{"line":176,"column":1,"offset":9174},"end":{"line":178,"column":4,"offset":9301},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"A requirement by my company was to have all the activity confirmation values with the same unit (I find it cleaner anyway to have all the activity confirmation values in the same unit anyway). Unfortunately, the default unit for some of the activities was hours, so we have to take a small intermediary step and call a conversion function before we are truly done:","position":{"start":{"line":180,"column":1,"offset":9303},"end":{"line":180,"column":365,"offset":9667},"indent":[]}}],"position":{"start":{"line":180,"column":1,"offset":9303},"end":{"line":180,"column":365,"offset":9667},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token eol-comment comment\">\" convert any </span><span class=\"token string\">'H'</span> <span class=\"token keyword\">values</span> <span class=\"token keyword\">to</span> <span class=\"token string\">'MIN'</span>\n<span class=\"token keyword\">IF</span> lv_unit <span class=\"token keyword\">NE</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'UNIT_CONVERSION_SIMPLE'</span>\n    <span class=\"token keyword\">EXPORTING</span>\n      <span class=\"token keyword\">input</span>                <span class=\"token operator\">=</span> lv_value\n      unit_in              <span class=\"token operator\">=</span> lv_unit\n      unit_out             <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span>\n    <span class=\"token keyword\">IMPORTING</span>\n      <span class=\"token keyword\">output</span>               <span class=\"token operator\">=</span> lv_output\n    <span class=\"token keyword\">EXCEPTIONS</span>\n      conversion_not_found <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n      division_by_zero     <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n      input_invalid        <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n      output_invalid       <span class=\"token operator\">=</span> <span class=\"token number\">4</span>\n      <span class=\"token keyword\">overflow</span>              <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\n      type_invalid         <span class=\"token operator\">=</span> <span class=\"token number\">6</span>\n      units_missing        <span class=\"token operator\">=</span> <span class=\"token number\">7</span>\n      unit_in_not_found    <span class=\"token operator\">=</span> <span class=\"token number\">8</span>\n      unit_out_not_found   <span class=\"token operator\">=</span> <span class=\"token number\">9</span>\n      <span class=\"token keyword\">OTHERS</span>               <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n    lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n    <span class=\"token keyword\">CONCATENATE</span> sy<span class=\"token token-operator punctuation\">-</span>msgno sy<span class=\"token token-operator punctuation\">-</span>msgid sy<span class=\"token token-operator punctuation\">-</span>msgv1 sy<span class=\"token token-operator punctuation\">-</span>msgv2 sy<span class=\"token token-operator punctuation\">-</span>msgv3 sy<span class=\"token token-operator punctuation\">-</span>msgv4 <span class=\"token keyword\">INTO</span> es_entityset<span class=\"token token-operator punctuation\">-</span>error_message<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>","position":{"start":{"line":182,"column":1,"offset":9669},"end":{"line":208,"column":4,"offset":10580},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We then finally carry over this converted ","position":{"start":{"line":209,"column":1,"offset":10581},"end":{"line":209,"column":43,"offset":10623},"indent":[]}},{"type":"inlineCode","value":"lv_output","position":{"start":{"line":209,"column":43,"offset":10623},"end":{"line":209,"column":54,"offset":10634},"indent":[]}},{"type":"text","value":" over to the ","position":{"start":{"line":209,"column":54,"offset":10634},"end":{"line":209,"column":67,"offset":10647},"indent":[]}},{"type":"inlineCode","value":"conf_activity","position":{"start":{"line":209,"column":67,"offset":10647},"end":{"line":209,"column":82,"offset":10662},"indent":[]}},{"type":"text","value":" field for ","position":{"start":{"line":209,"column":82,"offset":10662},"end":{"line":209,"column":93,"offset":10673},"indent":[]}},{"type":"inlineCode","value":"lt_timetickets","position":{"start":{"line":209,"column":93,"offset":10673},"end":{"line":209,"column":109,"offset":10689},"indent":[]}},{"type":"text","value":", doing this for all 1-6 ","position":{"start":{"line":209,"column":109,"offset":10689},"end":{"line":209,"column":134,"offset":10714},"indent":[]}},{"type":"inlineCode","value":"conf_activity","position":{"start":{"line":209,"column":134,"offset":10714},"end":{"line":209,"column":149,"offset":10729},"indent":[]}},{"type":"text","value":"’s:","position":{"start":{"line":209,"column":149,"offset":10729},"end":{"line":209,"column":152,"offset":10732},"indent":[]}}],"position":{"start":{"line":209,"column":1,"offset":10581},"end":{"line":209,"column":152,"offset":10732},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">CASE</span> sy<span class=\"token token-operator punctuation\">-</span>index<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">WHEN</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity1  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit1 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">WHEN</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity2  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit2 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">WHEN</span> <span class=\"token number\">3</span><span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity3  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit3 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">WHEN</span> <span class=\"token number\">4</span><span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity4  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit4 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">WHEN</span> <span class=\"token number\">5</span><span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity5  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit5 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">WHEN</span> <span class=\"token number\">6</span><span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity6  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit6 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">ENDCASE</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>","position":{"start":{"line":211,"column":1,"offset":10734},"end":{"line":232,"column":4,"offset":11381},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"With that, we can call the final confirmation function, with all our calculated values wrapped up in ","position":{"start":{"line":234,"column":1,"offset":11383},"end":{"line":234,"column":102,"offset":11484},"indent":[]}},{"type":"inlineCode","value":"lt_timetickets","position":{"start":{"line":234,"column":102,"offset":11484},"end":{"line":234,"column":118,"offset":11500},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":234,"column":118,"offset":11500},"end":{"line":234,"column":119,"offset":11501},"indent":[]}}],"position":{"start":{"line":234,"column":1,"offset":11383},"end":{"line":234,"column":119,"offset":11501},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token eol-comment comment\">\" create confirmation</span>\n<span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'BAPI_PRODORDCONF_CREATE_TT'</span>\n<span class=\"token comment\">*     EXPORTING</span>\n<span class=\"token comment\">*       POST_WRONG_ENTRIES             = '0'</span>\n<span class=\"token comment\">*       TESTRUN                        =</span>\n<span class=\"token comment\">*       CALL_ON_INBOUND_QUEUE          = ' '</span>\n  <span class=\"token keyword\">IMPORTING</span>\n    <span class=\"token keyword\">return</span>         <span class=\"token operator\">=</span> ls_return\n  <span class=\"token keyword\">TABLES</span>\n    timetickets    <span class=\"token operator\">=</span> lt_timetickets\n    goodsmovements <span class=\"token operator\">=</span> lt_goodsmovements\n<span class=\"token comment\">*       LINK_CONF_GOODSMOV             =</span>\n<span class=\"token comment\">*       CHARACTERISTICS_WIPBATCH       =</span>\n<span class=\"token comment\">*       LINK_CONF_CHAR_WIPBATCH        =</span>\n    detail_return  <span class=\"token operator\">=</span> lt_detail_return\n<span class=\"token comment\">*       CHARACTERISTICS_BATCH          =</span>\n<span class=\"token comment\">*       LINK_GM_CHAR_BATCH             =</span>\n  <span class=\"token keyword\">EXCEPTIONS</span>\n    <span class=\"token keyword\">OTHERS</span>         <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n  lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n  <span class=\"token keyword\">CONCATENATE</span> sy<span class=\"token token-operator punctuation\">-</span>msgno sy<span class=\"token token-operator punctuation\">-</span>msgid sy<span class=\"token token-operator punctuation\">-</span>msgv1 sy<span class=\"token token-operator punctuation\">-</span>msgv2 sy<span class=\"token token-operator punctuation\">-</span>msgv3 sy<span class=\"token token-operator punctuation\">-</span>msgv4 <span class=\"token keyword\">INTO</span> es_entityset<span class=\"token token-operator punctuation\">-</span>error_message<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>","position":{"start":{"line":236,"column":1,"offset":11503},"end":{"line":261,"column":4,"offset":12422},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If you were sharp, you realized all of this code is only on the operation level - so indeed, the six-level loop must be done each time, for each operation - we have to throw all the above code into a loop over our operations! See below for the full result!","position":{"start":{"line":262,"column":1,"offset":12423},"end":{"line":262,"column":257,"offset":12679},"indent":[]}}],"position":{"start":{"line":262,"column":1,"offset":12423},"end":{"line":262,"column":257,"offset":12679},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Production Orders","position":{"start":{"line":264,"column":4,"offset":12684},"end":{"line":264,"column":21,"offset":12701},"indent":[]}}],"position":{"start":{"line":264,"column":1,"offset":12681},"end":{"line":264,"column":21,"offset":12701},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In summary, the full code looks like this:","position":{"start":{"line":265,"column":1,"offset":12702},"end":{"line":265,"column":43,"offset":12744},"indent":[]}}],"position":{"start":{"line":265,"column":1,"offset":12702},"end":{"line":265,"column":43,"offset":12744},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"NOTE: the full code examples were written for a SAP Gateway environment - i.e. the server environment from a SAPUI5 OData call! If you try to copy and paste this code directly into something like a report or function, ABAP statements like:","position":{"start":{"line":267,"column":3,"offset":12748},"end":{"line":267,"column":242,"offset":12987},"indent":[]}}],"position":{"start":{"line":267,"column":1,"offset":12746},"end":{"line":267,"column":244,"offset":12989},"indent":[]}}],"position":{"start":{"line":267,"column":1,"offset":12746},"end":{"line":267,"column":244,"offset":12989},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code>lt_filters <span class=\"token operator\">=</span> io_tech_request_context<span class=\"token token-operator punctuation\">-></span>get_filter<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span>->get_filter_select_options<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>","position":{"start":{"line":269,"column":1,"offset":12991},"end":{"line":271,"column":4,"offset":13085},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"won’t be in scope and won’t compile without errors! However, if you are familiar with the CRUD based methods of the SAP Gateway backend, these will fit nicely into the ","position":{"start":{"line":273,"column":1,"offset":13087},"end":{"line":273,"column":169,"offset":13255},"indent":[]}},{"type":"inlineCode","value":"GET_ENTITYSET","position":{"start":{"line":273,"column":169,"offset":13255},"end":{"line":273,"column":184,"offset":13270},"indent":[]}},{"type":"text","value":" method 😄","position":{"start":{"line":273,"column":184,"offset":13270},"end":{"line":273,"column":194,"offset":13280},"indent":[]}}],"position":{"start":{"line":273,"column":1,"offset":13087},"end":{"line":273,"column":194,"offset":13280},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">DATA</span> <span class=\"token punctuation\">:</span> lt_filters           <span class=\"token keyword\">TYPE</span>           /iwbep/t_mgw_select_option<span class=\"token punctuation\">,</span>\n           ls_filters           <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_filters<span class=\"token punctuation\">,</span>\n           lt_select_options    <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n           ls_plant_so          <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n           ls_orderid_so        <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n           ls_fin_conf_so       <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n           ls_dev_reason_so     <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n           ls_conf_text_so      <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n           ls_conf_quan_unit_so <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n           ls_yield_so          <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n           ls_scrap_so          <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n           lt_stg_loc           <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n           ls_stg_loc           <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_stg_loc<span class=\"token punctuation\">,</span>\n           lt_batch             <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n           ls_batch             <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_batch<span class=\"token punctuation\">,</span>\n           lt_reserv_no         <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n           ls_reserv_no         <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_reserv_no<span class=\"token punctuation\">,</span>\n           lt_res_item          <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n           ls_res_item          <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_res_item<span class=\"token punctuation\">,</span>\n           lt_entry_qnt         <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n           ls_entry_qnt         <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_entry_qnt<span class=\"token punctuation\">,</span>\n           lt_entry_uom         <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n           ls_entry_uom         <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_entry_uom<span class=\"token punctuation\">,</span>\n           ls_return            <span class=\"token keyword\">TYPE</span> bapiret1<span class=\"token punctuation\">,</span>\n           lt_goodsmovements    <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span> bapi2017_gm_item_create<span class=\"token punctuation\">,</span>\n           ls_goodsmovements    <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_goodsmovements<span class=\"token punctuation\">,</span>\n           lv_reserv_lines      <span class=\"token keyword\">TYPE</span> int4<span class=\"token punctuation\">,</span>\n           lv_index             <span class=\"token keyword\">TYPE</span> int4 <span class=\"token keyword\">VALUE</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n           lt_detail_return     <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span> bapi_coru_return<span class=\"token punctuation\">,</span>\n           ls_detail_return     <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_detail_return<span class=\"token punctuation\">,</span>\n           lv_log_handle        <span class=\"token keyword\">TYPE</span> balloghndl<span class=\"token punctuation\">,</span>\n           lv_message           <span class=\"token keyword\">TYPE</span> char200<span class=\"token punctuation\">,</span>\n           lo_logger            <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">REF</span> <span class=\"token keyword\">TO</span> zcl_bc_app_logger<span class=\"token punctuation\">,</span>\n           es_entityset         <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> et_entityset<span class=\"token punctuation\">,</span>\n           lv_error_message     <span class=\"token keyword\">TYPE</span> bapi_msg<span class=\"token punctuation\">,</span>\n           ls_order_objects     <span class=\"token keyword\">TYPE</span> bapi_pp_order_objects<span class=\"token punctuation\">,</span>\n           lt_operation         <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span> bapi_order_operation1<span class=\"token punctuation\">,</span>\n           ls_operation         <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_operation<span class=\"token punctuation\">,</span>\n           lt_timetickets       <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  bapi_pp_timeticket<span class=\"token punctuation\">,</span>\n           ls_timetickets       <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_timetickets<span class=\"token punctuation\">,</span>\n           lv_number            <span class=\"token keyword\">TYPE</span> bapi_order_key<span class=\"token token-operator punctuation\">-</span>order_number<span class=\"token punctuation\">,</span>\n           ls_propose           <span class=\"token keyword\">TYPE</span> bapi_pp_conf_prop<span class=\"token punctuation\">,</span>\n           ls_op                <span class=\"token keyword\">TYPE</span> rcrop<span class=\"token punctuation\">,</span>\n           ls_vgw               <span class=\"token keyword\">TYPE</span> rcrvgw<span class=\"token punctuation\">,</span>\n           ls_afvc              <span class=\"token keyword\">TYPE</span> afvc<span class=\"token punctuation\">,</span>\n           ls_plpo              <span class=\"token keyword\">TYPE</span> plpo<span class=\"token punctuation\">,</span>\n           lv_value_fix         <span class=\"token keyword\">TYPE</span> p <span class=\"token keyword\">DECIMALS</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n           lv_value_var         <span class=\"token keyword\">TYPE</span> p <span class=\"token keyword\">DECIMALS</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n           lv_value             <span class=\"token keyword\">TYPE</span> p <span class=\"token keyword\">DECIMALS</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n           lv_unit              <span class=\"token keyword\">TYPE</span> rcrvgw<span class=\"token token-operator punctuation\">-</span>vge01<span class=\"token punctuation\">,</span>\n           lv_output            <span class=\"token keyword\">TYPE</span> p <span class=\"token keyword\">DECIMALS</span> <span class=\"token number\">3</span><span class=\"token punctuation\">.</span>\n\n           <span class=\"token eol-comment comment\">\" Create a log instance</span>\n    <span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">OBJECT</span> lo_logger\n      <span class=\"token keyword\">EXPORTING</span>\n        iv_subobject <span class=\"token operator\">=</span> <span class=\"token string\">'ZPP_APP'</span><span class=\"token punctuation\">.</span>\n    lo_logger<span class=\"token token-operator punctuation\">-></span>create_log<span class=\"token punctuation\">(</span> <span class=\"token keyword\">IMPORTING</span> ev_log_handle <span class=\"token operator\">=</span> lv_log_handle <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n    lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> <span class=\"token string\">'Begin Method PRODCONFIRMATION_GET_ENTITYSET.'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n\n    <span class=\"token eol-comment comment\">\"get $filter through the io_tech request (odata request)</span>\n    lt_filters <span class=\"token operator\">=</span> io_tech_request_context<span class=\"token token-operator punctuation\">-></span>get_filter<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span>->get_filter_select_options<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token eol-comment comment\">\" Process filters</span>\n\n    <span class=\"token eol-comment comment\">\" for these below we just need the singular select option structure</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'PLANT'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_plant_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ORDERID'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_orderid_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'FIN_CONF'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_fin_conf_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'DEV_REASON'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_dev_reason_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'CONF_TEXT'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_conf_text_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'CONF_QUAN_UNIT'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_conf_quan_unit_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'YIELD'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_yield_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'SCRAP'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_scrap_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token eol-comment comment\">\" for the following we need tables (make a loop and get the values from each)</span>\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'STGE_LOC'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_stg_loc <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'BATCH'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_batch <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'RESERV_NO'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_reserv_no <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'RES_ITEM'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_res_item <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ENTRY_QNT'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_entry_qnt <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ENTRY_UOM'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_entry_uom <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n<span class=\"token eol-comment comment\">\" Create goodsmovement structure for all the retroactive items</span>\n    <span class=\"token keyword\">DESCRIBE</span> <span class=\"token keyword\">TABLE</span> lt_reserv_no <span class=\"token keyword\">LINES</span> lv_reserv_lines<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">DO</span> lv_reserv_lines <span class=\"token keyword\">TIMES</span><span class=\"token punctuation\">.</span>\n      ls_stg_loc <span class=\"token operator\">=</span> lt_stg_loc[ lv_index ]<span class=\"token punctuation\">.</span>\n      ls_batch <span class=\"token operator\">=</span> lt_batch[ lv_index ]<span class=\"token punctuation\">.</span>\n      ls_reserv_no <span class=\"token operator\">=</span> lt_reserv_no[ lv_index ]<span class=\"token punctuation\">.</span>\n      ls_res_item <span class=\"token operator\">=</span> lt_res_item[ lv_index ]<span class=\"token punctuation\">.</span>\n      ls_entry_qnt <span class=\"token operator\">=</span> lt_entry_qnt[ lv_index ]<span class=\"token punctuation\">.</span>\n      ls_entry_uom <span class=\"token operator\">=</span> lt_entry_uom[ lv_index ]<span class=\"token punctuation\">.</span>\n      ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>plant <span class=\"token operator\">=</span> ls_plant_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" fixed factory</span>\n      ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>stge_loc <span class=\"token operator\">=</span> ls_stg_loc<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>batch <span class=\"token operator\">=</span> ls_batch<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>move_type <span class=\"token operator\">=</span> <span class=\"token string\">'261'</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" fixed movement type</span>\n      ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>item_text <span class=\"token operator\">=</span> <span class=\"token string\">'Warenbewegung für Rückmeldung PP APP'</span><span class=\"token punctuation\">.</span>\n      ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>reserv_no <span class=\"token operator\">=</span> ls_reserv_no<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>res_item <span class=\"token operator\">=</span> ls_res_item<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>entry_qnt <span class=\"token operator\">=</span> ls_entry_qnt<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>entry_uom <span class=\"token operator\">=</span> ls_entry_uom<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">APPEND</span> ls_goodsmovements <span class=\"token keyword\">TO</span> lt_goodsmovements<span class=\"token punctuation\">.</span>\n      lv_index <span class=\"token operator\">=</span> lv_index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">ENDDO</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token eol-comment comment\">\" need only the operations from the function</span>\n    ls_order_objects<span class=\"token token-operator punctuation\">-</span>operations <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n    lv_number <span class=\"token operator\">=</span> ls_orderid_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'BAPI_PRODORD_GET_DETAIL'</span>\n      <span class=\"token keyword\">EXPORTING</span>\n        <span class=\"token keyword\">number</span>        <span class=\"token operator\">=</span> lv_number\n<span class=\"token comment\">*       COLLECTIVE_ORDER       =</span>\n        order_objects <span class=\"token operator\">=</span> ls_order_objects\n<span class=\"token comment\">*     IMPORTING</span>\n<span class=\"token comment\">*       RETURN        =</span>\n      <span class=\"token keyword\">TABLES</span>\n<span class=\"token comment\">*       HEADER        =</span>\n<span class=\"token comment\">*       POSITION      =</span>\n<span class=\"token comment\">*       SEQUENCE      =</span>\n        operation     <span class=\"token operator\">=</span> lt_operation\n<span class=\"token comment\">*       TRIGGER_POINT =</span>\n<span class=\"token comment\">*       COMPONENT     =</span>\n<span class=\"token comment\">*       PROD_REL_TOOL =</span>\n      <span class=\"token punctuation\">.</span>\n\n    <span class=\"token eol-comment comment\">\" build structures for each step (each operation)</span>\n    <span class=\"token keyword\">LOOP</span> <span class=\"token keyword\">AT</span> lt_operation <span class=\"token keyword\">INTO</span> ls_operation<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">CLEAR</span> ls_timetickets<span class=\"token punctuation\">.</span>\n\n      <span class=\"token eol-comment comment\">\" this is the full key for table AFVC - Auftragsarbeitsvorgang for the routing number and counter - should always work with SELECT SINGLE</span>\n      <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">SINGLE</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> afvc <span class=\"token keyword\">INTO</span> ls_afvc\n        <span class=\"token keyword\">WHERE</span> aufpl <span class=\"token operator\">=</span> ls_operation<span class=\"token token-operator punctuation\">-</span>routing_no\n        <span class=\"token keyword\">AND</span>   aplzl <span class=\"token operator\">=</span> ls_operation<span class=\"token token-operator punctuation\">-</span>counter<span class=\"token punctuation\">.</span>\n\n      <span class=\"token eol-comment comment\">\" this is the full key for table PLPO - Plan: Vorgang - so it should always work with SELECT SINGLE</span>\n      <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">SINGLE</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> plpo <span class=\"token keyword\">INTO</span> ls_plpo\n        <span class=\"token keyword\">WHERE</span> plnty <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>plnty\n        <span class=\"token keyword\">AND</span> plnnr <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>plnnr\n        <span class=\"token keyword\">AND</span> plnkn <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>plnkn\n        <span class=\"token keyword\">AND</span> zaehl <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>zaehl<span class=\"token punctuation\">.</span>\n\n      <span class=\"token eol-comment comment\">\" now provide all the standard values (vorgabewert) VGW01, 02, etc into the calculation formula</span>\n      <span class=\"token keyword\">MOVE-CORRESPONDING</span> ls_plpo <span class=\"token keyword\">TO</span> ls_op<span class=\"token punctuation\">.</span>\n      ls_op<span class=\"token token-operator punctuation\">-</span>mgvrg <span class=\"token operator\">=</span> ls_yield_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_op<span class=\"token token-operator punctuation\">-</span>meinh <span class=\"token operator\">=</span> ls_conf_quan_unit_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">MOVE-CORRESPONDING</span> ls_plpo <span class=\"token keyword\">TO</span> ls_vgw<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">DO</span> <span class=\"token number\">6</span> <span class=\"token keyword\">TIMES</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" for each activity (usually 4 activities here at my company, but there can be up to 6 activities total)</span>\n        <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">1</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw01 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span>\n        <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">2</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw02 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span>\n        <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">3</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw03 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span>\n        <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">4</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw04 <span class=\"token keyword\">EQ</span> 0f\n        <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">5</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw05 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span>\n        <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">6</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw06 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">CONTINUE</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" skip and 0 values</span>\n        <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'CR_WORKCENTER_FORMULA_CALC'</span> <span class=\"token eol-comment comment\">\" You can see a SAP standard example with the function in the source code for transaction CR03 for costing formula: Program SAPLCRA0, Include LCRA0F71, Form FORMEL_RESULT_CALC, line 55</span>\n          <span class=\"token keyword\">EXPORTING</span>\n            arbid             <span class=\"token operator\">=</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>arbid\n            op                <span class=\"token operator\">=</span> ls_op\n            vgw               <span class=\"token operator\">=</span> ls_vgw\n            <span class=\"token keyword\">index</span>             <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>index\n            <span class=\"token keyword\">date</span>              <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>datum\n          <span class=\"token keyword\">IMPORTING</span>\n            value_fix          <span class=\"token operator\">=</span> lv_value_fix\n            value_var         <span class=\"token operator\">=</span> lv_value_var\n            <span class=\"token keyword\">unit</span>              <span class=\"token operator\">=</span> lv_unit\n          <span class=\"token keyword\">EXCEPTIONS</span>\n            missing_parameter <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n            not_found         <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n            division_by_zero  <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n            <span class=\"token keyword\">OTHERS</span>            <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">CONCATENATE</span> sy<span class=\"token token-operator punctuation\">-</span>msgno sy<span class=\"token token-operator punctuation\">-</span>msgid sy<span class=\"token token-operator punctuation\">-</span>msgv1 sy<span class=\"token token-operator punctuation\">-</span>msgv2 sy<span class=\"token token-operator punctuation\">-</span>msgv3 sy<span class=\"token token-operator punctuation\">-</span>msgv4 <span class=\"token keyword\">INTO</span> es_entityset<span class=\"token token-operator punctuation\">-</span>error_message<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n\n        lv_value <span class=\"token operator\">=</span> lv_value_fix <span class=\"token operator\">+</span> lv_value_var<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" total value is the sum of the fixed and varible values for this activity</span>\n\n        <span class=\"token eol-comment comment\">\" convert any </span><span class=\"token string\">'H'</span> <span class=\"token keyword\">values</span> <span class=\"token keyword\">to</span> <span class=\"token string\">'MIN'</span>\n        <span class=\"token keyword\">IF</span> lv_unit <span class=\"token keyword\">NE</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'UNIT_CONVERSION_SIMPLE'</span>\n            <span class=\"token keyword\">EXPORTING</span>\n              <span class=\"token keyword\">input</span>                <span class=\"token operator\">=</span> lv_value\n              unit_in              <span class=\"token operator\">=</span> lv_unit\n              unit_out             <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span>\n            <span class=\"token keyword\">IMPORTING</span>\n              <span class=\"token keyword\">output</span>               <span class=\"token operator\">=</span> lv_output\n            <span class=\"token keyword\">EXCEPTIONS</span>\n              conversion_not_found <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n              division_by_zero     <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n              input_invalid        <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n              output_invalid       <span class=\"token operator\">=</span> <span class=\"token number\">4</span>\n              <span class=\"token keyword\">overflow</span>              <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\n              type_invalid         <span class=\"token operator\">=</span> <span class=\"token number\">6</span>\n              units_missing        <span class=\"token operator\">=</span> <span class=\"token number\">7</span>\n              unit_in_not_found    <span class=\"token operator\">=</span> <span class=\"token number\">8</span>\n              unit_out_not_found   <span class=\"token operator\">=</span> <span class=\"token number\">9</span>\n              <span class=\"token keyword\">OTHERS</span>               <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n            lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n            <span class=\"token keyword\">CONCATENATE</span> sy<span class=\"token token-operator punctuation\">-</span>msgno sy<span class=\"token token-operator punctuation\">-</span>msgid sy<span class=\"token token-operator punctuation\">-</span>msgv1 sy<span class=\"token token-operator punctuation\">-</span>msgv2 sy<span class=\"token token-operator punctuation\">-</span>msgv3 sy<span class=\"token token-operator punctuation\">-</span>msgv4 <span class=\"token keyword\">INTO</span> es_entityset<span class=\"token token-operator punctuation\">-</span>error_message<span class=\"token punctuation\">.</span>\n            <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">ELSE</span><span class=\"token punctuation\">.</span>\n          lv_output <span class=\"token operator\">=</span> lv_value<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" copy over MIN value</span>\n        <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n\n        <span class=\"token keyword\">CASE</span> sy<span class=\"token token-operator punctuation\">-</span>index<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">WHEN</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity1  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit1 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">WHEN</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity2  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit2 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">WHEN</span> <span class=\"token number\">3</span><span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity3  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit3 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">WHEN</span> <span class=\"token number\">4</span><span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity4  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit4 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">WHEN</span> <span class=\"token number\">5</span><span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity5  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit5 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">WHEN</span> <span class=\"token number\">6</span><span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity6  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit6 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">ENDCASE</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">ENDDO</span><span class=\"token punctuation\">.</span>\n\n      <span class=\"token eol-comment comment\">\" Now build the table to confirm the operations (Vorgänge)</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_no     <span class=\"token operator\">=</span> ls_operation<span class=\"token token-operator punctuation\">-</span>conf_no<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>orderid     <span class=\"token operator\">=</span> ls_orderid_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>sequence    <span class=\"token operator\">=</span> ls_operation<span class=\"token token-operator punctuation\">-</span>sequence_no<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>operation   <span class=\"token operator\">=</span> ls_operation<span class=\"token token-operator punctuation\">-</span>operation_number<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>work_cntr   <span class=\"token operator\">=</span> ls_operation<span class=\"token token-operator punctuation\">-</span>work_center<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" Resource for process order, logdate, logtime, and posting date added to the table</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>plant       <span class=\"token operator\">=</span> ls_plant_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>logdate     <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>datlo<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>logtime     <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>timlo<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>postg_date  <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>datlo<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>yield <span class=\"token operator\">=</span> ls_yield_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>scrap <span class=\"token operator\">=</span> ls_scrap_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>fin_conf <span class=\"token operator\">=</span> ls_fin_conf_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" also overwrite the proposed partial or final confirmation - take what the user provides!</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_quan_unit <span class=\"token operator\">=</span> ls_conf_quan_unit_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" Also the unit</span>\n      <span class=\"token keyword\">APPEND</span> ls_timetickets <span class=\"token keyword\">TO</span> lt_timetickets<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">ENDLOOP</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token eol-comment comment\">\" create confirmation</span>\n    <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'BAPI_PRODORDCONF_CREATE_TT'</span>\n<span class=\"token comment\">*     EXPORTING</span>\n<span class=\"token comment\">*       POST_WRONG_ENTRIES             = '0'</span>\n<span class=\"token comment\">*       TESTRUN                        =</span>\n<span class=\"token comment\">*       CALL_ON_INBOUND_QUEUE          = ' '</span>\n      <span class=\"token keyword\">IMPORTING</span>\n        <span class=\"token keyword\">return</span>         <span class=\"token operator\">=</span> ls_return\n      <span class=\"token keyword\">TABLES</span>\n        timetickets    <span class=\"token operator\">=</span> lt_timetickets\n        goodsmovements <span class=\"token operator\">=</span> lt_goodsmovements\n<span class=\"token comment\">*       LINK_CONF_GOODSMOV             =</span>\n<span class=\"token comment\">*       CHARACTERISTICS_WIPBATCH       =</span>\n<span class=\"token comment\">*       LINK_CONF_CHAR_WIPBATCH        =</span>\n        detail_return  <span class=\"token operator\">=</span> lt_detail_return\n<span class=\"token comment\">*       CHARACTERISTICS_BATCH          =</span>\n<span class=\"token comment\">*       LINK_GM_CHAR_BATCH             =</span>\n      <span class=\"token keyword\">EXCEPTIONS</span>\n        <span class=\"token keyword\">OTHERS</span>         <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n      lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n      <span class=\"token keyword\">CONCATENATE</span> sy<span class=\"token token-operator punctuation\">-</span>msgno sy<span class=\"token token-operator punctuation\">-</span>msgid sy<span class=\"token token-operator punctuation\">-</span>msgv1 sy<span class=\"token token-operator punctuation\">-</span>msgv2 sy<span class=\"token token-operator punctuation\">-</span>msgv3 sy<span class=\"token token-operator punctuation\">-</span>msgv4 <span class=\"token keyword\">INTO</span> es_entityset<span class=\"token token-operator punctuation\">-</span>error_message<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>","position":{"start":{"line":275,"column":1,"offset":13282},"end":{"line":594,"column":4,"offset":27678},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Process Orders","position":{"start":{"line":596,"column":4,"offset":27683},"end":{"line":596,"column":18,"offset":27697},"indent":[]}}],"position":{"start":{"line":596,"column":1,"offset":27680},"end":{"line":596,"column":18,"offset":27697},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Because SAP is ever-so-special, process orders have a slightly different program process due to a few name changes. Here is a summary of some of those name and type changes:","position":{"start":{"line":598,"column":1,"offset":27699},"end":{"line":598,"column":174,"offset":27872},"indent":[]}}],"position":{"start":{"line":598,"column":1,"offset":27699},"end":{"line":598,"column":174,"offset":27872},"indent":[]}},{"type":"html","value":"<hr/>","position":{"start":{"line":600,"column":1,"offset":27874},"end":{"line":600,"column":6,"offset":27879},"indent":[]}},{"type":"table","align":[null,null,null],"children":[{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Topic","position":{"start":{"line":602,"column":3,"offset":27883},"end":{"line":602,"column":8,"offset":27888},"indent":[]}}],"position":{"start":{"line":602,"column":3,"offset":27883},"end":{"line":602,"column":8,"offset":27888},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Production Orders","position":{"start":{"line":602,"column":11,"offset":27891},"end":{"line":602,"column":28,"offset":27908},"indent":[]}}],"position":{"start":{"line":602,"column":11,"offset":27891},"end":{"line":602,"column":28,"offset":27908},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Process Orders","position":{"start":{"line":602,"column":31,"offset":27911},"end":{"line":602,"column":45,"offset":27925},"indent":[]}}],"position":{"start":{"line":602,"column":31,"offset":27911},"end":{"line":602,"column":45,"offset":27925},"indent":[]}}],"position":{"start":{"line":602,"column":1,"offset":27881},"end":{"line":602,"column":47,"offset":27927},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Name of the ‘steps’ in your process or production order","position":{"start":{"line":604,"column":3,"offset":27979},"end":{"line":604,"column":58,"offset":28034},"indent":[]}}],"position":{"start":{"line":604,"column":3,"offset":27979},"end":{"line":604,"column":58,"offset":28034},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"phase/activity (I’ve seen both names, ABAP uses mostly ‘phase’)","position":{"start":{"line":604,"column":61,"offset":28037},"end":{"line":604,"column":124,"offset":28100},"indent":[]}}],"position":{"start":{"line":604,"column":61,"offset":28037},"end":{"line":604,"column":124,"offset":28100},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"operation","position":{"start":{"line":604,"column":127,"offset":28103},"end":{"line":604,"column":136,"offset":28112},"indent":[]}}],"position":{"start":{"line":604,"column":127,"offset":28103},"end":{"line":604,"column":136,"offset":28112},"indent":[]}}],"position":{"start":{"line":604,"column":1,"offset":27977},"end":{"line":604,"column":138,"offset":28114},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Get order detail of order","position":{"start":{"line":605,"column":3,"offset":28117},"end":{"line":605,"column":28,"offset":28142},"indent":[]}}],"position":{"start":{"line":605,"column":3,"offset":28117},"end":{"line":605,"column":28,"offset":28142},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"BAPI_PRODORD_GET_DETAIL","position":{"start":{"line":605,"column":31,"offset":28145},"end":{"line":605,"column":56,"offset":28170},"indent":[]}}],"position":{"start":{"line":605,"column":31,"offset":28145},"end":{"line":605,"column":56,"offset":28170},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"BAPI_PROCORD_GET_DETAIL","position":{"start":{"line":605,"column":59,"offset":28173},"end":{"line":605,"column":84,"offset":28198},"indent":[]}}],"position":{"start":{"line":605,"column":59,"offset":28173},"end":{"line":605,"column":84,"offset":28198},"indent":[]}}],"position":{"start":{"line":605,"column":1,"offset":28115},"end":{"line":605,"column":86,"offset":28200},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"detail of order ‘step’ type","position":{"start":{"line":606,"column":3,"offset":28203},"end":{"line":606,"column":30,"offset":28230},"indent":[]}}],"position":{"start":{"line":606,"column":3,"offset":28203},"end":{"line":606,"column":30,"offset":28230},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"bapi_order_phase","position":{"start":{"line":606,"column":33,"offset":28233},"end":{"line":606,"column":51,"offset":28251},"indent":[]}}],"position":{"start":{"line":606,"column":33,"offset":28233},"end":{"line":606,"column":52,"offset":28252},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"bapi_order_operation1","position":{"start":{"line":606,"column":56,"offset":28256},"end":{"line":606,"column":79,"offset":28279},"indent":[]}}],"position":{"start":{"line":606,"column":56,"offset":28256},"end":{"line":606,"column":79,"offset":28279},"indent":[]}}],"position":{"start":{"line":606,"column":1,"offset":28201},"end":{"line":606,"column":81,"offset":28281},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Function for timeticket proposals","position":{"start":{"line":607,"column":3,"offset":28284},"end":{"line":607,"column":36,"offset":28317},"indent":[]}}],"position":{"start":{"line":607,"column":3,"offset":28284},"end":{"line":607,"column":36,"offset":28317},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"BAPI_PRODORD_GET_DETAIL","position":{"start":{"line":607,"column":39,"offset":28320},"end":{"line":607,"column":64,"offset":28345},"indent":[]}}],"position":{"start":{"line":607,"column":39,"offset":28320},"end":{"line":607,"column":64,"offset":28345},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"BAPI_PROCORD_GET_DETAIL","position":{"start":{"line":607,"column":67,"offset":28348},"end":{"line":607,"column":92,"offset":28373},"indent":[]}}],"position":{"start":{"line":607,"column":67,"offset":28348},"end":{"line":607,"column":92,"offset":28373},"indent":[]}}],"position":{"start":{"line":607,"column":1,"offset":28282},"end":{"line":607,"column":94,"offset":28375},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Function for order confirmation","position":{"start":{"line":608,"column":3,"offset":28378},"end":{"line":608,"column":34,"offset":28409},"indent":[]}}],"position":{"start":{"line":608,"column":3,"offset":28378},"end":{"line":608,"column":34,"offset":28409},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"BAPI_PRODORDCONF_CREATE_TT","position":{"start":{"line":608,"column":37,"offset":28412},"end":{"line":608,"column":65,"offset":28440},"indent":[]}}],"position":{"start":{"line":608,"column":37,"offset":28412},"end":{"line":608,"column":65,"offset":28440},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"BAPI_PROCORDCONF_CREATE_TT","position":{"start":{"line":608,"column":68,"offset":28443},"end":{"line":608,"column":96,"offset":28471},"indent":[]}}],"position":{"start":{"line":608,"column":68,"offset":28443},"end":{"line":608,"column":96,"offset":28471},"indent":[]}}],"position":{"start":{"line":608,"column":1,"offset":28376},"end":{"line":608,"column":98,"offset":28473},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"timetickets","position":{"start":{"line":609,"column":3,"offset":28476},"end":{"line":609,"column":16,"offset":28489},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":609,"column":16,"offset":28489},"end":{"line":609,"column":17,"offset":28490},"indent":[]}},{"type":"inlineCode","value":"TYPE","position":{"start":{"line":609,"column":17,"offset":28490},"end":{"line":609,"column":23,"offset":28496},"indent":[]}},{"type":"text","value":" in order confirmation function","position":{"start":{"line":609,"column":23,"offset":28496},"end":{"line":609,"column":54,"offset":28527},"indent":[]}}],"position":{"start":{"line":609,"column":3,"offset":28476},"end":{"line":609,"column":54,"offset":28527},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"bapi_pp_timeticket","position":{"start":{"line":609,"column":57,"offset":28530},"end":{"line":609,"column":77,"offset":28550},"indent":[]}}],"position":{"start":{"line":609,"column":57,"offset":28530},"end":{"line":609,"column":77,"offset":28550},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"bapi_pi_timeticket1","position":{"start":{"line":609,"column":80,"offset":28553},"end":{"line":609,"column":101,"offset":28574},"indent":[]}}],"position":{"start":{"line":609,"column":80,"offset":28553},"end":{"line":609,"column":101,"offset":28574},"indent":[]}}],"position":{"start":{"line":609,"column":1,"offset":28474},"end":{"line":609,"column":103,"offset":28576},"indent":[]}}],"position":{"start":{"line":602,"column":1,"offset":27881},"end":{"line":609,"column":103,"offset":28576},"indent":[1,1,1,1,1,1,1]}},{"type":"html","value":"<hr/>","position":{"start":{"line":611,"column":1,"offset":28578},"end":{"line":611,"column":6,"offset":28583},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"There are more, but you can find those in the code for yourself. The important thing to notice is that the key challenging part here, calculating the confirmation activity amounts, uses the same internal function module, ","position":{"start":{"line":613,"column":1,"offset":28585},"end":{"line":613,"column":222,"offset":28806},"indent":[]}},{"type":"inlineCode","value":"","position":{"start":{"line":613,"column":222,"offset":28806},"end":{"line":613,"column":224,"offset":28808},"indent":[]}}],"position":{"start":{"line":613,"column":1,"offset":28585},"end":{"line":613,"column":224,"offset":28808},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Here’s the code for calculating activities for process orders - ","position":{"start":{"line":615,"column":1,"offset":28810},"end":{"line":615,"column":65,"offset":28874},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"note the slight change in all the variable names!","position":{"start":{"line":615,"column":66,"offset":28875},"end":{"line":615,"column":115,"offset":28924},"indent":[]}}],"position":{"start":{"line":615,"column":65,"offset":28874},"end":{"line":615,"column":116,"offset":28925},"indent":[]}},{"type":"text","value":" - and be careful with your types (carefully look over the ","position":{"start":{"line":615,"column":116,"offset":28925},"end":{"line":615,"column":175,"offset":28984},"indent":[]}},{"type":"inlineCode","value":"DATA:","position":{"start":{"line":615,"column":175,"offset":28984},"end":{"line":615,"column":182,"offset":28991},"indent":[]}},{"type":"text","value":" statement), otherwise you’ll get 💥","position":{"start":{"line":615,"column":182,"offset":28991},"end":{"line":615,"column":218,"offset":29027},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"exploding runtime errors","position":{"start":{"line":615,"column":220,"offset":29029},"end":{"line":615,"column":244,"offset":29053},"indent":[]}}],"position":{"start":{"line":615,"column":218,"offset":29027},"end":{"line":615,"column":246,"offset":29055},"indent":[]}},{"type":"text","value":"💥 when you try to confirm something with one of our two main functions and you pass, for example, the  ","position":{"start":{"line":615,"column":246,"offset":29055},"end":{"line":615,"column":350,"offset":29159},"indent":[]}},{"type":"inlineCode","value":"lt_timetickets","position":{"start":{"line":615,"column":350,"offset":29159},"end":{"line":615,"column":366,"offset":29175},"indent":[]}},{"type":"text","value":" with the production type ","position":{"start":{"line":615,"column":366,"offset":29175},"end":{"line":615,"column":392,"offset":29201},"indent":[]}},{"type":"inlineCode","value":"","position":{"start":{"line":615,"column":392,"offset":29201},"end":{"line":615,"column":394,"offset":29203},"indent":[]}},{"type":"text","value":", and you pass it into the of the ","position":{"start":{"line":615,"column":394,"offset":29203},"end":{"line":615,"column":428,"offset":29237},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"process","position":{"start":{"line":615,"column":429,"offset":29238},"end":{"line":615,"column":436,"offset":29245},"indent":[]}}],"position":{"start":{"line":615,"column":428,"offset":29237},"end":{"line":615,"column":437,"offset":29246},"indent":[]}},{"type":"text","value":" order function module.","position":{"start":{"line":615,"column":437,"offset":29246},"end":{"line":615,"column":460,"offset":29269},"indent":[]}}],"position":{"start":{"line":615,"column":1,"offset":28810},"end":{"line":615,"column":460,"offset":29269},"indent":[]}},{"type":"html","lang":"abap","value":"<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code>  <span class=\"token keyword\">DATA</span> <span class=\"token punctuation\">:</span> lt_filters           <span class=\"token keyword\">TYPE</span>           /iwbep/t_mgw_select_option<span class=\"token punctuation\">,</span>\n         ls_filters           <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_filters<span class=\"token punctuation\">,</span>\n         lt_select_options    <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n         ls_plant_so          <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_orderid_so        <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_fin_conf_so       <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_dev_reason_so     <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_conf_text_so      <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_conf_quan_unit_so <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_yield_so          <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_scrap_so          <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_stge_loc_so       <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_batch_so          <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_reserv_no_so      <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_res_item_so       <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_entry_qnt_so      <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_entry_uom_so      <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         lt_stg_loc           <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n         ls_stg_loc           <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_stg_loc<span class=\"token punctuation\">,</span>\n         lt_batch             <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n         ls_batch             <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_batch<span class=\"token punctuation\">,</span>\n         lt_reserv_no         <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n         ls_reserv_no         <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_reserv_no<span class=\"token punctuation\">,</span>\n         lt_res_item          <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n         ls_res_item          <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_res_item<span class=\"token punctuation\">,</span>\n         lt_entry_qnt         <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n         ls_entry_qnt         <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_entry_qnt<span class=\"token punctuation\">,</span>\n         lt_entry_uom         <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n         ls_entry_uom         <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_entry_uom<span class=\"token punctuation\">,</span>\n         ls_return            <span class=\"token keyword\">TYPE</span> bapiret1<span class=\"token punctuation\">,</span>\n         lt_goodsmovements    <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span> bapi2017_gm_item_create<span class=\"token punctuation\">,</span>\n         ls_goodsmovements    <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_goodsmovements<span class=\"token punctuation\">,</span>\n         lv_reserv_lines      <span class=\"token keyword\">TYPE</span> int4<span class=\"token punctuation\">,</span>\n         lv_index             <span class=\"token keyword\">TYPE</span> int4 <span class=\"token keyword\">VALUE</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n         lt_detail_return     <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span> bapi_coru_return<span class=\"token punctuation\">,</span>\n         ls_detail_return     <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_detail_return<span class=\"token punctuation\">,</span>\n         lv_log_handle        <span class=\"token keyword\">TYPE</span> balloghndl<span class=\"token punctuation\">,</span>\n         lv_message           <span class=\"token keyword\">TYPE</span> char200<span class=\"token punctuation\">,</span>\n         lo_logger            <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">REF</span> <span class=\"token keyword\">TO</span> zcl_bc_app_logger<span class=\"token punctuation\">,</span>\n         es_entityset         <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> et_entityset<span class=\"token punctuation\">,</span>\n         lv_error_message     <span class=\"token keyword\">TYPE</span> bapi_msg<span class=\"token punctuation\">,</span>\n         ls_order_objects     <span class=\"token keyword\">TYPE</span> bapi_pi_order_objects<span class=\"token punctuation\">,</span>\n         lt_phase             <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span> bapi_order_phase<span class=\"token punctuation\">,</span>\n         ls_phase             <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_phase<span class=\"token punctuation\">,</span>\n         lt_timetickets       <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span> bapi_pi_timeticket1<span class=\"token punctuation\">,</span>\n         ls_timetickets       <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_timetickets<span class=\"token punctuation\">,</span>\n         lv_number            <span class=\"token keyword\">TYPE</span> bapi_order_key<span class=\"token token-operator punctuation\">-</span>order_number<span class=\"token punctuation\">,</span>\n         ls_op                <span class=\"token keyword\">TYPE</span> rcrop<span class=\"token punctuation\">,</span>\n         ls_vgw               <span class=\"token keyword\">TYPE</span> rcrvgw<span class=\"token punctuation\">,</span>\n         ls_afvc              <span class=\"token keyword\">TYPE</span> afvc<span class=\"token punctuation\">,</span>\n         ls_plpo              <span class=\"token keyword\">TYPE</span> plpo<span class=\"token punctuation\">,</span>\n         lv_value_fix         <span class=\"token keyword\">TYPE</span> p <span class=\"token keyword\">DECIMALS</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n         lv_value_var         <span class=\"token keyword\">TYPE</span> p <span class=\"token keyword\">DECIMALS</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n         lv_value             <span class=\"token keyword\">TYPE</span> p <span class=\"token keyword\">DECIMALS</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n         lv_unit              <span class=\"token keyword\">TYPE</span> rcrvgw<span class=\"token token-operator punctuation\">-</span>vge01<span class=\"token punctuation\">,</span>\n         lv_output            <span class=\"token keyword\">TYPE</span> p <span class=\"token keyword\">DECIMALS</span> <span class=\"token number\">3</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">FIELD-SYMBOLS</span><span class=\"token punctuation\">:</span> &lt;fs_timetickets> <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_timetickets<span class=\"token punctuation\">.</span>\n\n  <span class=\"token eol-comment comment\">\" create a log instance</span>\n  <span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">OBJECT</span> lo_logger\n    <span class=\"token keyword\">EXPORTING</span>\n      iv_subobject <span class=\"token operator\">=</span> <span class=\"token string\">'ZPP_APP'</span><span class=\"token punctuation\">.</span>\n  lo_logger<span class=\"token token-operator punctuation\">-></span>create_log<span class=\"token punctuation\">(</span> <span class=\"token keyword\">IMPORTING</span> ev_log_handle <span class=\"token operator\">=</span> lv_log_handle <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n  lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> <span class=\"token string\">'Begin Method PROCCONFIRMATION_GET_ENTITYSET.'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n\n  <span class=\"token eol-comment comment\">\"get $filter through the io_tech request (odata request)</span>\n  lt_filters <span class=\"token operator\">=</span> io_tech_request_context<span class=\"token token-operator punctuation\">-></span>get_filter<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span>->get_filter_select_options<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token eol-comment comment\">\" Process filters</span>\n\n  <span class=\"token eol-comment comment\">\" for these below we just need the singular select option structure</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'PLANT'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_plant_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ORDERID'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_orderid_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'FIN_CONF'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_fin_conf_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'DEV_REASON'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_dev_reason_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'CONF_TEXT'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_conf_text_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'CONF_QUAN_UNIT'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_conf_quan_unit_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'YIELD'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_yield_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'SCRAP'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_scrap_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token eol-comment comment\">\" for the following we need tables (make a loop and get the values from each)</span>\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'STGE_LOC'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_stg_loc <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'BATCH'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_batch <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'RESERV_NO'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_reserv_no <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'RES_ITEM'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_res_item <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ENTRY_QNT'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_entry_qnt <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ENTRY_UOM'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_entry_uom <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n  <span class=\"token eol-comment comment\">\" Create goodsmovement structure for all the retroactive items</span>\n  <span class=\"token keyword\">DESCRIBE</span> <span class=\"token keyword\">TABLE</span> lt_reserv_no <span class=\"token keyword\">LINES</span> lv_reserv_lines<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">DO</span> lv_reserv_lines <span class=\"token keyword\">TIMES</span><span class=\"token punctuation\">.</span>\n    ls_stg_loc <span class=\"token operator\">=</span> lt_stg_loc[ lv_index ]<span class=\"token punctuation\">.</span>\n    ls_batch <span class=\"token operator\">=</span> lt_batch[ lv_index ]<span class=\"token punctuation\">.</span>\n    ls_reserv_no <span class=\"token operator\">=</span> lt_reserv_no[ lv_index ]<span class=\"token punctuation\">.</span>\n    ls_res_item <span class=\"token operator\">=</span> lt_res_item[ lv_index ]<span class=\"token punctuation\">.</span>\n    ls_entry_qnt <span class=\"token operator\">=</span> lt_entry_qnt[ lv_index ]<span class=\"token punctuation\">.</span>\n    ls_entry_uom <span class=\"token operator\">=</span> lt_entry_uom[ lv_index ]<span class=\"token punctuation\">.</span>\n    ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>plant <span class=\"token operator\">=</span> ls_plant_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" fixed factory</span>\n    ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>stge_loc <span class=\"token operator\">=</span> ls_stg_loc<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>batch <span class=\"token operator\">=</span> ls_batch<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>move_type <span class=\"token operator\">=</span> <span class=\"token string\">'261'</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" fixed movement type</span>\n    ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>item_text <span class=\"token operator\">=</span> <span class=\"token string\">'Warenbewegung für Rückmeldung PP APP'</span><span class=\"token punctuation\">.</span>\n    ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>reserv_no <span class=\"token operator\">=</span> ls_reserv_no<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>res_item <span class=\"token operator\">=</span> ls_res_item<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>entry_qnt <span class=\"token operator\">=</span> ls_entry_qnt<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>entry_uom <span class=\"token operator\">=</span> ls_entry_uom<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">APPEND</span> ls_goodsmovements <span class=\"token keyword\">TO</span> lt_goodsmovements<span class=\"token punctuation\">.</span>\n    lv_index <span class=\"token operator\">=</span> lv_index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDDO</span><span class=\"token punctuation\">.</span>\n\n  ls_order_objects<span class=\"token token-operator punctuation\">-</span>phases <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n  lv_number <span class=\"token operator\">=</span> ls_orderid_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'BAPI_PROCORD_GET_DETAIL'</span>\n    <span class=\"token keyword\">EXPORTING</span>\n      <span class=\"token keyword\">number</span>        <span class=\"token operator\">=</span> lv_number\n<span class=\"token comment\">*       COLLECTIVE_ORDER       =</span>\n      order_objects <span class=\"token operator\">=</span> ls_order_objects\n<span class=\"token comment\">*     IMPORTING</span>\n<span class=\"token comment\">*       RETURN        =</span>\n    <span class=\"token keyword\">TABLES</span>\n<span class=\"token comment\">*       HEADER        =</span>\n<span class=\"token comment\">*       POSITION      =</span>\n<span class=\"token comment\">*       SEQUENCE      =</span>\n      phase         <span class=\"token operator\">=</span> lt_phase\n<span class=\"token comment\">*       TRIGGER_POINT =</span>\n<span class=\"token comment\">*       COMPONENT     =</span>\n<span class=\"token comment\">*       PROD_REL_TOOL =</span>\n    <span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">LOOP</span> <span class=\"token keyword\">AT</span> lt_phase <span class=\"token keyword\">INTO</span> ls_phase<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" for each phase - create both the activities table and timetickets table</span>\n    <span class=\"token keyword\">CLEAR</span> ls_timetickets<span class=\"token punctuation\">.</span>\n\n    <span class=\"token eol-comment comment\">\" this is the full key for table AFVC - Auftragsarbeitsvorgang for the routing number and counter - should always work with SELECT SINGLE</span>\n    <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">SINGLE</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> afvc <span class=\"token keyword\">INTO</span> ls_afvc\n      <span class=\"token keyword\">WHERE</span> aufpl <span class=\"token operator\">=</span> ls_phase<span class=\"token token-operator punctuation\">-</span>routing_no\n      <span class=\"token keyword\">AND</span>   aplzl <span class=\"token operator\">=</span> ls_phase<span class=\"token token-operator punctuation\">-</span>counter<span class=\"token punctuation\">.</span>\n\n    <span class=\"token eol-comment comment\">\" this is the full key for table PLPO - Plan: Vorgang - so it should always work with SELECT SINGLE</span>\n    <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">SINGLE</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> plpo <span class=\"token keyword\">INTO</span> ls_plpo\n      <span class=\"token keyword\">WHERE</span> plnty <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>plnty\n      <span class=\"token keyword\">AND</span> plnnr <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>plnnr\n      <span class=\"token keyword\">AND</span> plnkn <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>plnkn\n      <span class=\"token keyword\">AND</span> zaehl <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>zaehl<span class=\"token punctuation\">.</span>\n\n    <span class=\"token eol-comment comment\">\" now provide all the standard values (vorgabewert) VGW01, 02, etc into the calculation formula</span>\n    <span class=\"token keyword\">MOVE-CORRESPONDING</span> ls_plpo <span class=\"token keyword\">TO</span> ls_op<span class=\"token punctuation\">.</span>\n    ls_op<span class=\"token token-operator punctuation\">-</span>mgvrg <span class=\"token operator\">=</span> ls_yield_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_op<span class=\"token token-operator punctuation\">-</span>meinh <span class=\"token operator\">=</span> ls_conf_quan_unit_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">MOVE-CORRESPONDING</span> ls_plpo <span class=\"token keyword\">TO</span> ls_vgw<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">DO</span> <span class=\"token number\">6</span> <span class=\"token keyword\">TIMES</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" for each activity (usually 4 activities here at company, but there can be up to 6 activities total)</span>\n      <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">1</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw01 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span>\n      <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">2</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw02 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span>\n      <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">3</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw03 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span>\n      <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">4</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw04 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span>\n      <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">5</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw05 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span>\n      <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">6</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw06 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">CONTINUE</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" skip and 0 values</span>\n      <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'CR_WORKCENTER_FORMULA_CALC'</span> <span class=\"token eol-comment comment\">\" You can see a SAP standard example with the function in the source code for transaction CR03 for costing formula: Program SAPLCRA0, Include LCRA0F71, Form FORMEL_RESULT_CALC, line 55</span>\n        <span class=\"token keyword\">EXPORTING</span>\n          arbid             <span class=\"token operator\">=</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>arbid\n          op                <span class=\"token operator\">=</span> ls_op\n          vgw               <span class=\"token operator\">=</span> ls_vgw\n          <span class=\"token keyword\">index</span>             <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>index\n          <span class=\"token keyword\">date</span>              <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>datum\n        <span class=\"token keyword\">IMPORTING</span>\n          value_fix         <span class=\"token operator\">=</span> lv_value_fix\n          value_var         <span class=\"token operator\">=</span> lv_value_var\n          <span class=\"token keyword\">unit</span>              <span class=\"token operator\">=</span> lv_unit\n        <span class=\"token keyword\">EXCEPTIONS</span>\n          missing_parameter <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n          not_found         <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n          division_by_zero  <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n          <span class=\"token keyword\">OTHERS</span>            <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">CONCATENATE</span> sy<span class=\"token token-operator punctuation\">-</span>msgno sy<span class=\"token token-operator punctuation\">-</span>msgid sy<span class=\"token token-operator punctuation\">-</span>msgv1 sy<span class=\"token token-operator punctuation\">-</span>msgv2 sy<span class=\"token token-operator punctuation\">-</span>msgv3 sy<span class=\"token token-operator punctuation\">-</span>msgv4 <span class=\"token keyword\">INTO</span> es_entityset<span class=\"token token-operator punctuation\">-</span>error_message<span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n\n      lv_value <span class=\"token operator\">=</span> lv_value_fix <span class=\"token operator\">+</span> lv_value_var<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" total value is the sum of the fixed and varible values for this activity</span>\n\n      <span class=\"token eol-comment comment\">\" Convert any </span><span class=\"token string\">'H'</span> <span class=\"token keyword\">values</span> <span class=\"token keyword\">to</span> <span class=\"token string\">'MIN'</span>\n      <span class=\"token keyword\">IF</span> lv_unit <span class=\"token keyword\">NE</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'UNIT_CONVERSION_SIMPLE'</span>\n          <span class=\"token keyword\">EXPORTING</span>\n            <span class=\"token keyword\">input</span>                <span class=\"token operator\">=</span> lv_value\n            unit_in              <span class=\"token operator\">=</span> lv_unit\n            unit_out             <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span>\n          <span class=\"token keyword\">IMPORTING</span>\n            <span class=\"token keyword\">output</span>               <span class=\"token operator\">=</span> lv_output\n          <span class=\"token keyword\">EXCEPTIONS</span>\n            conversion_not_found <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n            division_by_zero     <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n            input_invalid        <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n            output_invalid       <span class=\"token operator\">=</span> <span class=\"token number\">4</span>\n            <span class=\"token keyword\">overflow</span>             <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\n            type_invalid         <span class=\"token operator\">=</span> <span class=\"token number\">6</span>\n            units_missing        <span class=\"token operator\">=</span> <span class=\"token number\">7</span>\n            unit_in_not_found    <span class=\"token operator\">=</span> <span class=\"token number\">8</span>\n            unit_out_not_found   <span class=\"token operator\">=</span> <span class=\"token number\">9</span>\n            <span class=\"token keyword\">OTHERS</span>               <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n          lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n          <span class=\"token keyword\">CONCATENATE</span> sy<span class=\"token token-operator punctuation\">-</span>msgno sy<span class=\"token token-operator punctuation\">-</span>msgid sy<span class=\"token token-operator punctuation\">-</span>msgv1 sy<span class=\"token token-operator punctuation\">-</span>msgv2 sy<span class=\"token token-operator punctuation\">-</span>msgv3 sy<span class=\"token token-operator punctuation\">-</span>msgv4 <span class=\"token keyword\">INTO</span> es_entityset<span class=\"token token-operator punctuation\">-</span>error_message<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">ELSE</span><span class=\"token punctuation\">.</span>\n        lv_output <span class=\"token operator\">=</span> lv_value<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" copy over MIN value</span>\n      <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n\n      <span class=\"token keyword\">CASE</span> sy<span class=\"token token-operator punctuation\">-</span>index<span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">WHEN</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity1  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit1 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">WHEN</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity2  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit2 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">WHEN</span> <span class=\"token number\">3</span><span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity3  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit3 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">WHEN</span> <span class=\"token number\">4</span><span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity4  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit4 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">WHEN</span> <span class=\"token number\">5</span><span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity5  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit5 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">WHEN</span> <span class=\"token number\">6</span><span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity6  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit6 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">ENDCASE</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">ENDDO</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token eol-comment comment\">\" Also build the table to confirm the operations (Vorgänge)</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_no    <span class=\"token operator\">=</span> ls_phase<span class=\"token token-operator punctuation\">-</span>conf_no<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>orderid    <span class=\"token operator\">=</span> ls_orderid_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>phase      <span class=\"token operator\">=</span> ls_phase<span class=\"token token-operator punctuation\">-</span>operation_number<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>resource   <span class=\"token operator\">=</span> ls_phase<span class=\"token token-operator punctuation\">-</span>resource<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" Resource in process orders is the equivalent of work_center (wrk_cntr) for production orders</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>plant      <span class=\"token operator\">=</span> ls_plant_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>logdate    <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>datlo<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>logtime    <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>timlo<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>postg_date <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>datlo<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>yield <span class=\"token operator\">=</span> ls_yield_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>scrap <span class=\"token operator\">=</span> ls_scrap_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>fin_conf <span class=\"token operator\">=</span> ls_fin_conf_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" also overwrite the proposed tiel oder endruckmeldung - take what the user provides!</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_quan_unit <span class=\"token operator\">=</span> ls_conf_quan_unit_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" Also the unit</span>\n    <span class=\"token keyword\">APPEND</span> ls_timetickets <span class=\"token keyword\">TO</span> lt_timetickets<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDLOOP</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'BAPI_PROCORDCONF_CREATE_TT'</span>\n<span class=\"token comment\">*     EXPORTING</span>\n<span class=\"token comment\">*       POST_WRONG_ENTRIES             = '0'</span>\n<span class=\"token comment\">*       TESTRUN                        =</span>\n    <span class=\"token keyword\">IMPORTING</span>\n      <span class=\"token keyword\">return</span>         <span class=\"token operator\">=</span> ls_return\n    <span class=\"token keyword\">TABLES</span>\n      timetickets    <span class=\"token operator\">=</span> lt_timetickets\n      goodsmovements <span class=\"token operator\">=</span> lt_goodsmovements\n<span class=\"token comment\">*       LINK_CONF_GOODSMOV             =</span>\n<span class=\"token comment\">*       CHARACTERISTICS_WIPBATCH       =</span>\n<span class=\"token comment\">*       LINK_CONF_CHAR_WIPBATCH        =</span>\n<span class=\"token comment\">*       CHARACTERISTICS_BATCH          =</span>\n<span class=\"token comment\">*       LINK_GM_CHAR_BATCH             =</span>\n      detail_return  <span class=\"token operator\">=</span> lt_detail_return\n    <span class=\"token keyword\">EXCEPTIONS</span>\n      <span class=\"token keyword\">OTHERS</span>         <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n    lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n    <span class=\"token keyword\">CONCATENATE</span> sy<span class=\"token token-operator punctuation\">-</span>msgno sy<span class=\"token token-operator punctuation\">-</span>msgid sy<span class=\"token token-operator punctuation\">-</span>msgv1 sy<span class=\"token token-operator punctuation\">-</span>msgv2 sy<span class=\"token token-operator punctuation\">-</span>msgv3 sy<span class=\"token token-operator punctuation\">-</span>msgv4 <span class=\"token keyword\">INTO</span> es_entityset<span class=\"token token-operator punctuation\">-</span>error_message<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">IF</span> ls_return <span class=\"token keyword\">IS</span> <span class=\"token keyword\">NOT</span> <span class=\"token keyword\">INITIAL</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">LOOP</span> <span class=\"token keyword\">AT</span> lt_detail_return <span class=\"token keyword\">INTO</span> ls_detail_return <span class=\"token keyword\">WHERE</span> <span class=\"token keyword\">type</span> <span class=\"token keyword\">EQ</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">.</span>\n      lv_error_message <span class=\"token operator\">=</span> ls_detail_return<span class=\"token token-operator punctuation\">-</span>message<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">ENDLOOP</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">CONCATENATE</span> <span class=\"token string\">'Fehler bei der Rückmeldung: '</span> lv_error_message <span class=\"token keyword\">INTO</span> lv_message<span class=\"token punctuation\">.</span>\n    lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> lv_message <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n    es_entityset<span class=\"token token-operator punctuation\">-</span>error_message <span class=\"token operator\">=</span> lv_error_message<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n\n  lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> <span class=\"token string\">'Ende Method PROCCONFIRMATION_GET_ENTITYSET.'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n  lo_logger<span class=\"token token-operator punctuation\">-></span>save_log<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token eol-comment comment\">\" FB Documentation says COMMIT WORK is required</span>\n  <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'BAPI_TRANSACTION_COMMIT'</span>\n    <span class=\"token keyword\">EXPORTING</span>\n      <span class=\"token keyword\">wait</span> <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">COMMIT</span> <span class=\"token keyword\">WORK</span> <span class=\"token keyword\">AND</span> <span class=\"token keyword\">WAIT</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>","position":{"start":{"line":617,"column":1,"offset":29271},"end":{"line":955,"column":4,"offset":44165},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Final Comments","position":{"start":{"line":957,"column":4,"offset":44170},"end":{"line":957,"column":18,"offset":44184},"indent":[]}}],"position":{"start":{"line":957,"column":1,"offset":44167},"end":{"line":957,"column":18,"offset":44184},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Whew. Did it feel like a marathon? :runner: Because it felt to ","position":{"start":{"line":959,"column":1,"offset":44186},"end":{"line":959,"column":64,"offset":44249},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"me","position":{"start":{"line":959,"column":65,"offset":44250},"end":{"line":959,"column":67,"offset":44252},"indent":[]}}],"position":{"start":{"line":959,"column":64,"offset":44249},"end":{"line":959,"column":68,"offset":44253},"indent":[]}},{"type":"text","value":" like a marathon all that time I was scratching my head. I hope you all enjoyed and found this post useful for a not-so-often programmed function of this production planning section of SAP.","position":{"start":{"line":959,"column":68,"offset":44253},"end":{"line":959,"column":257,"offset":44442},"indent":[]}}],"position":{"start":{"line":959,"column":1,"offset":44186},"end":{"line":959,"column":257,"offset":44442},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Another note and quick plug 😄 I hope everyone can appreciate the time I put into creating these posts (","position":{"start":{"line":961,"column":1,"offset":44444},"end":{"line":961,"column":105,"offset":44548},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"hint:","position":{"start":{"line":961,"column":106,"offset":44549},"end":{"line":961,"column":111,"offset":44554},"indent":[]}}],"position":{"start":{"line":961,"column":105,"offset":44548},"end":{"line":961,"column":112,"offset":44555},"indent":[]}},{"type":"text","value":" posts this long take a ","position":{"start":{"line":961,"column":112,"offset":44555},"end":{"line":961,"column":136,"offset":44579},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"LONG","position":{"start":{"line":961,"column":138,"offset":44581},"end":{"line":961,"column":142,"offset":44585},"indent":[]}}],"position":{"start":{"line":961,"column":136,"offset":44579},"end":{"line":961,"column":144,"offset":44587},"indent":[]}},{"type":"text","value":" time to write!). It would make me happy and give me the motivation to keep writing these detailed ABAP posts if you’d consider donating (in the footer of any page on this blog) I have a ","position":{"start":{"line":961,"column":144,"offset":44587},"end":{"line":961,"column":331,"offset":44774},"indent":[]}},{"type":"link","title":null,"url":"https://www.paypal.me/chrisfrewin","children":[{"type":"text","value":"PayPal.me link","position":{"start":{"line":961,"column":332,"offset":44775},"end":{"line":961,"column":346,"offset":44789},"indent":[]}}],"position":{"start":{"line":961,"column":331,"offset":44774},"end":{"line":961,"column":382,"offset":44825},"indent":[]}},{"type":"text","value":", and I’m also an Ethereum developer if you’d like to donate Ether or if you would like to donate some RaiBlocks, as I am a RaiBlocks enthusiast if you would prefer to donate in that way.","position":{"start":{"line":961,"column":382,"offset":44825},"end":{"line":961,"column":569,"offset":45012},"indent":[]}}],"position":{"start":{"line":961,"column":1,"offset":44444},"end":{"line":961,"column":569,"offset":45012},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"💩 Ok, plug done! 💩","position":{"start":{"line":963,"column":1,"offset":45014},"end":{"line":963,"column":21,"offset":45034},"indent":[]}}],"position":{"start":{"line":963,"column":1,"offset":45014},"end":{"line":963,"column":21,"offset":45034},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cheers! 🍺","position":{"start":{"line":965,"column":1,"offset":45036},"end":{"line":965,"column":11,"offset":45046},"indent":[]}}],"position":{"start":{"line":965,"column":1,"offset":45036},"end":{"line":965,"column":11,"offset":45046},"indent":[]}},{"type":"html","value":"<hr/>","position":{"start":{"line":967,"column":1,"offset":45048},"end":{"line":967,"column":6,"offset":45053},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Footnotes","position":{"start":{"line":969,"column":3,"offset":45057},"end":{"line":969,"column":12,"offset":45066},"indent":[]}}],"position":{"start":{"line":969,"column":1,"offset":45055},"end":{"line":969,"column":12,"offset":45066},"indent":[]}},{"type":"html","value":"<div id=\"footnote-1\">\n1. Activities/phases are for production orders; Operations are for process orders. From this point onward, I will refer just to activities, since this post focuses on production orders and then I finally post the adjacent code for process orders.\n</div>","position":{"start":{"line":971,"column":1,"offset":45068},"end":{"line":973,"column":7,"offset":45343},"indent":[1,1]}},{"type":"html","value":"<div id=\"footnote-2\">\n2. I have to give credit where credit is due! I received a lot of assistance from our production planning module supervisor - he showed me the transactions that finally got me to a working result. 👍\n</div>","position":{"start":{"line":975,"column":1,"offset":45345},"end":{"line":977,"column":7,"offset":45573},"indent":[1,1]}},{"type":"html","value":"<div id=\"footnote-3\">\n3. Note: At my company, we usually use only up to four confirmation activities. Note that there can be up to six, but for this example, we'll say that the confirmation process has only a maximum of four.\n</div>","position":{"start":{"line":979,"column":1,"offset":45575},"end":{"line":981,"column":7,"offset":45807},"indent":[1,1]}},{"type":"html","value":"<div id=\"footnote-4\">\n4. You can set up your production planning (PP) module to give you a proposal amount for the activities, directly when you are doing confirmations transaction `CO11N`:","position":{"start":{"line":983,"column":1,"offset":45809},"end":{"line":984,"column":168,"offset":45998},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Upon pressing ‘enter’ for with a new amount:\n","position":{"start":{"line":986,"column":1,"offset":46000},"end":{"line":987,"column":1,"offset":46045},"indent":[1]}},{"type":"html","title":null,"url":"co11n-1.jpeg","alt":"Automatic calculation of confirmation activities by the System in transaction CO11N","position":{"start":{"line":987,"column":1,"offset":46045},"end":{"line":987,"column":101,"offset":46145},"indent":[]}}],"position":{"start":{"line":986,"column":1,"offset":46000},"end":{"line":987,"column":101,"offset":46145},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Pressing ‘OK’ for this window, we get a popup:","position":{"start":{"line":989,"column":1,"offset":46147},"end":{"line":989,"column":47,"offset":46193},"indent":[]}}],"position":{"start":{"line":989,"column":1,"offset":46147},"end":{"line":989,"column":47,"offset":46193},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"co11n-2.jpeg","alt":"Filling confirmation activities by hand in transaction CO11N","position":{"start":{"line":991,"column":1,"offset":46195},"end":{"line":991,"column":78,"offset":46272},"indent":[]}}],"position":{"start":{"line":991,"column":1,"offset":46195},"end":{"line":991,"column":78,"offset":46272},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We see that the Labor time is provided here. It’s likely 30 min for a full 100 KG, since the system is proposing only 15 minutes for 50 KG, half of what the full order amount should be. (I know, it’s not a full four field example - but values would also be proposed if you had more fields like machine time, machine set-up, etc.)","position":{"start":{"line":993,"column":1,"offset":46274},"end":{"line":993,"column":330,"offset":46603},"indent":[]}}],"position":{"start":{"line":993,"column":1,"offset":46274},"end":{"line":993,"column":330,"offset":46603},"indent":[]}},{"type":"html","value":"</div>","position":{"start":{"line":994,"column":1,"offset":46604},"end":{"line":994,"column":7,"offset":46610},"indent":[]}},{"type":"html","value":"<div id=\"footnote-4\">\n4. I ended up determining that you can exclude parameter `co_a` without any issues - however, this may be how the settings at my own company work - you can look deeper into the SAP example to include it.\n</div>","position":{"start":{"line":996,"column":1,"offset":46612},"end":{"line":998,"column":7,"offset":46844},"indent":[1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":999,"column":1,"offset":46845}}}},{"id":"transformer-remark-markdown-html-a60bf6189c1b048e350881bd57d5d833-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-emoji","value":"<h1>First off, Congratulations! 🎊</h1>\n<p><sup>And a happy new year! (If you’re viewing this in the summer or something, see the date!)</sup></p>\n<h2>You’ve found the only post on the entire internet that describes the full process of calculating activity amounts for production order confirmations by programming it directly using SAP ABAP! 😱😱😱</h2>\n<h2>I hope you use this post to maximum effectiveness, because it took me four days to find, build, and get a working answer. 😄</h2>\n<h2>The Problem</h2>\n<p>Let’s jump right into ABAP programming: the go-to function module to calculate time ticket proposals for production orders is with function module <code>BAPI_PRODORDCONF_GET_TT_PROP</code>:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'BAPI_PRODORDCONF_GET_TT_PROP'</span>\n<span class=\"token comment\">* EXPORTING</span>\n<span class=\"token comment\">*   PROPOSE                  = ' '</span>\n<span class=\"token comment\">* IMPORTING</span>\n<span class=\"token comment\">*   RETURN                   =</span>\n  <span class=\"token keyword\">TABLES</span>\n    timetickets              <span class=\"token operator\">=</span>\n<span class=\"token comment\">*   GOODSMOVEMENTS           =</span>\n<span class=\"token comment\">*   LINK_CONF_GOODSMOV       =</span>\n<span class=\"token comment\">*   DETAIL_RETURN            =</span>\n          <span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>\n<p>Likewise, there is a very similiar <code>BAPI_PROCORDCONF_GET_TT_PROP</code> for process orders:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'BAPI_PROCORDCONF_GET_TT_PROP'</span>\n<span class=\"token comment\">* EXPORTING</span>\n<span class=\"token comment\">*   PROPOSE                  = ' '</span>\n<span class=\"token comment\">* IMPORTING</span>\n<span class=\"token comment\">*   RETURN                   =</span>\n  <span class=\"token keyword\">TABLES</span>\n    timetickets              <span class=\"token operator\">=</span>\n<span class=\"token comment\">*   GOODSMOVEMENTS           =</span>\n<span class=\"token comment\">*   LINK_CONF_GOODSMOV       =</span>\n<span class=\"token comment\">*   DETAIL_RETURN            =</span>\n          <span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>\n<p>Pretty similar. However, as part of my indentured servitude that is being a full-time employee, I spent a day tinkering, writing, and testing code with these function modules. No matter what combinations of inputs I provided, I couldn’t get the <em>activity confirmation amount</em> to be calculated, which are a very important part of the final calculation of the confirmation! (more on the actual final confirmation submission is also included in later on) From scrounging around on SCN and the SAP blog, I learned that many developers had the same issue with these functions. (Things like date, yield/scrap amounts, and the goods movements would be proposed just fine by these BAPIs.)</p>\n<p>So, <strong>calculating these activity confirmation amounts programmatically (in ABAP) will be the main focus of this post <sup><a href=\"#footnote-1\">2</a></sup>.</strong></p>\n<p>Unfortunately, with much more digging, the reason the two functions wouldn’t produce activity confirmation amounts never became quite clear to me. I realized I would have to calculate them in a more manual manner and then add them to those BAPI structures <code>lt_timetickets</code> manually.</p>\n<h2>The Calculation Function Module</h2>\n<p>Through SAP GUI in transaction <code>CO11N</code>, determining system-proposed confirmation amounts is easy enough by and asking the system to do the calculation for us <sup><a href=\"#footnote-3\">3</a></sup>. My struggle was finding the programmatic way to do this in ABAP.</p>\n<p>Anyone with significant production planning experience (i.e., not me 😂 ) knows that the actual formula behind the activity calculation is not with the activity itself, but with the work center <em>behind</em> the activity <sup><a href=\"#footnote-4\">3</a></sup>.</p>\n<p>In transaction <code>CR03</code> (display work center), in the ‘Costing’ Tab, there is a ‘Formula’ button with the check symbol on it:</p>\n<p></p>\n<p>This was my starting point to find any sort of function that could do this programmatically - with more time, I learned from SCN of a function that does exactly that! It’s called <code>CR_WORKCENTER_FORMULA_CALC</code>!</p>\n<p>Let’s head on over to transaction <code>SE37</code> and test it ourselves!</p>\n<p></p>\n<p>😑😑😑 shit… SAP, you had one job to do!</p>\n<p>Fine. We’ll do it ourselves. We can open up the source code of <code>CR_WORKCENTER_FORMULA_CALC</code> and set a breakpoint in the first line:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/function-breakpoint-7f2c794c579923ae724605626ba5369b-f1f65.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 61.25954198473282%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABR0lEQVQoz5WS63KDIBCF8ypt0okXQIyXxIBATDCavv/znC7WjpM/Hf3BrKzD2Q/O2SVJAsYY0jRFdkzg9gJ1xNFcr5C5RBzHm9YuCHLBJ0FJgubAEdH3VqE3QcZ/CUNDty363kNrhZh6OQ2RXEAIgTzPkWXZesLQcF2H79eA0A/78UPClWf4YYB/9ui8RzT/W0XYGgPf08HuBinlLHjBuWngbvZfsYWQL4TGGgzjQIcdnLPoPzOoot5oypugJUKPB1E6R+JEaOnKeVGgoHWitckUpTXu9w7ja4SgQYHQVhc86f1OZQkh5TZTLF3zSQaMvoc/ZHicmukJOhpSHxlailWZRNBUmy825VZRNXtORqYzIVsIw/WDGXwOetiHuDCqq95wKOu3YDuaFMJ9VYqyqKGotqZFWVUbgj0T/tEFooly3qdpstrlH3u1coVcvutYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"The first possible line in the function we can breakpoint\"\n        title=\"\"\n        src=\"/blog/static/function-breakpoint-7f2c794c579923ae724605626ba5369b-fb8a0.png\"\n        srcset=\"/blog/static/function-breakpoint-7f2c794c579923ae724605626ba5369b-1a291.png 148w,\n/blog/static/function-breakpoint-7f2c794c579923ae724605626ba5369b-2bc4a.png 295w,\n/blog/static/function-breakpoint-7f2c794c579923ae724605626ba5369b-fb8a0.png 590w,\n/blog/static/function-breakpoint-7f2c794c579923ae724605626ba5369b-526de.png 885w,\n/blog/static/function-breakpoint-7f2c794c579923ae724605626ba5369b-f1f65.png 1048w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>and in CR03, drag our <a href=\"https://chrisfrew.in/debugging-abap-with-sap-shortcut\">debugging shortcut into the calculation window</a>, and we press return SAP debugging’s return button to jump out to whatever parent program is calling this function… \n  <a class=\"gatsby-resp-image-link\" href=\"/blog/static/return-00b1c8c77e113cd8f5a0809a202489c2-0c9b0.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n  \n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; ; max-width: 58px; margin-left: auto; margin-right: auto;\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAACj0lEQVQ4y9WUy06TQRiGWbv0BrgFlm5MjFfghoWEhSIJJkQSVKBKOFSCIEJCKiooBBALCATahBKIcsZISilt/xYolFIOErSlfwsUaAUep8UGJYVg1IWLNzOTmTzzfoeZOJ9xmr+puH8OlCdtR6NBOp6LUf4d4DHEinfCgldvYsvmYnPKjjwhHR0+JzTu2JkVv2We7bk1Qut7WB4rWBwdISDWYbe+qRlOiyaGwyPY+vt+bCW5zFeV03clHs2liziHBsTBWeRxM7Je+iGLcG6NCY0AvXozO043loJMepMvY2yuoftqPF0JF1ixTHKwEyLkkfkmbwr52d/cZndlXaRHiu3QK24MA6XCuxjV1ewfgCE/A7d+nLeNLSQmJ3ErLY0bKTdJSU0lMek6qtIy9mdcbJyA/uJQKryH/nkxm9ICPoONXfMcExodrVU19HVqGB4ZYWhgkA8D/ZjGPrEt8npmyJIIeaq1lsAW+FxfkB1rbJtmYclNb3Mbt9PTeaBQkJ5xh/qqF4RsTjYM1tjAwMJXpKJseq4l8LE4k8GsZIyVSnwWB37hwjQ0RqdWQ0+3ji6tlvH+QQLiMm8shxHbYtM9Oo6rsQ5X/WsWa1+y2t6GR1QzIMLXNbVwX5FDkVJJtnDZ/KqOoHUhtsMo1G+yszW7wpZ9VfTjZ/wil0HnKgQPmZ4w0vCmkY62dprUaoZ1veyY7Wc4jD6x8JMTt3pE5YPSPFp1K9kFeZRVVFD5TEWlSkVpRTnalnfsSQ68pzk8qXAoQdsCPQ1qHuU85Gm+kpLcfJ7kFVKQpaCjui6yv3FeYKRY4vCe1QFzKxzal4SWIyNzyxGYd9J6/u8rmoYw1COad+MnhdfRUGP24f/1wf6pvgPpiV2HYVoizQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\">\n      <img class=\"gatsby-resp-image-image\" style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\" alt=\"return\" title=\"\" src=\"/blog/static/return-00b1c8c77e113cd8f5a0809a202489c2-0c9b0.png\" srcset=\"/blog/static/return-00b1c8c77e113cd8f5a0809a202489c2-0c9b0.png 58w\" sizes=\"(max-width: 58px) 100vw, 58px\">\n    </span>\n  </span>\n  \n  </a>\n     and…</p>\n<p>🙏 Violá! 🙏 We’ve found where <code>CR_WORKCENTER_FORMULA_CALC</code> is called out in the wild!</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/function-found-264ed624475401f4e4bc06397a03d9b9-f42d4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 80.1670146137787%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABsElEQVQ4y5WT627iMBCF+yy7vcWX3CEXx4SEJu1WK22FhETL+z/H6YwhXSBBpT9GljX25zMzxzdBEEBKCaUVfN8H72dJhDSKkcQxwjB0oZSE53nfxo0DKgZqCCEgCN7aAn/zGl1hIfwQ6XwOu1ggL4rrgAxSSu3XRw+5DmEqg5LCmBKCzvjK+5lCfVAoCZjeS/gP4irANJB7eFCoCdT9CmDuNapbDXOnENODpQmweorRrmK3mor2XYymiVCWdJ7yp0C9Bw4vJaSyJmB1p5E/cO5UybDnu1KKr7v/h6JOgUN0fUcKynF5UYI/r6+omyUqa5Fl2dFQpLgItAtLdtJjoPZdrmmbE/XfKmS7rFbtGBhE6J972GXt8gPUARl23sOYerj8rdGHOWqdjIHUuzRNXcxmszMfUsmsckoh96aylTM1/5jjkudk+EnbsMLBh+cHaiqppZIKAvLXPB4K5y77UE/3kNVl2fziUKIonAael5wcesjGZi9O/QolHn9e8vPLi/Pb29s/9P2Ts4kxZl9ycjsGFtnhD5PCpmmw2Wyw/fjAdrfDZvuOHa3vtF+v11fFJxYD8ulTKPJeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"There you are `CR_WORKCENTER_FORMULA_CALC`\"\n        title=\"\"\n        src=\"/blog/static/function-found-264ed624475401f4e4bc06397a03d9b9-fb8a0.png\"\n        srcset=\"/blog/static/function-found-264ed624475401f4e4bc06397a03d9b9-1a291.png 148w,\n/blog/static/function-found-264ed624475401f4e4bc06397a03d9b9-2bc4a.png 295w,\n/blog/static/function-found-264ed624475401f4e4bc06397a03d9b9-fb8a0.png 590w,\n/blog/static/function-found-264ed624475401f4e4bc06397a03d9b9-526de.png 885w,\n/blog/static/function-found-264ed624475401f4e4bc06397a03d9b9-f42d4.png 958w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>(For those deeply interested, you can find exactly where the function is called in SAP Program <code>SAPLCRA0</code>, Include <code>LCRA0F71</code>, line 55, at least for SAPGUI 740.)</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/form-program-1d2cbb852e085c74901d5a542ef48c3a-ab5af.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 12.916666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAjklEQVQI13WNyw7CIBBF+f+PMi60MbEiUIqUIlQaY/CV+gXXCSZd1cXJzUzmnmEX0SByhbv1eLqwyIPI/oxwkBiOCjfT/71lYrWBrWrkloSWll1EPnkkrnGVtuQoDYJQUOsKYU/Cxv1uF2CKhFM3FD4+4e0iCTQ0le22Rkvp6WHYCTiaX9zMTDbO3dLvE767N9XvLiHEkQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Calling program details\"\n        title=\"\"\n        src=\"/blog/static/form-program-1d2cbb852e085c74901d5a542ef48c3a-fb8a0.png\"\n        srcset=\"/blog/static/form-program-1d2cbb852e085c74901d5a542ef48c3a-1a291.png 148w,\n/blog/static/form-program-1d2cbb852e085c74901d5a542ef48c3a-2bc4a.png 295w,\n/blog/static/form-program-1d2cbb852e085c74901d5a542ef48c3a-fb8a0.png 590w,\n/blog/static/form-program-1d2cbb852e085c74901d5a542ef48c3a-526de.png 885w,\n/blog/static/form-program-1d2cbb852e085c74901d5a542ef48c3a-ab5af.png 960w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2>The Details (The Hard Part)</h2>\n<p>So what the heck does SAP do with this function? Well, first, they are doing a do loop six times. Aha, we know why - because there can be a total of six confirmation values <sup><a href=\"#footnote-3\">3</a></sup>  - SAP is by default looping over all of them.</p>\n<p>Now for the function parameters themselves: they pass the work center code (<code>arbid</code>), the operation number (<code>rcrop</code>), the index of the confirmation (a value of 1-6), our 4 default values (<code>vgw</code>), and the date (<code>date</code>).</p>\n<p>In turn, the function spits out the fixed value amount of the activity calculation (<code>value_fix</code>), the variable part (<code>value_var</code>), both in whatever unit the function gives out in <code>unit</code>, and <code>co_a</code> is for the cost center accounting <sup><a href=\"#footnote-4\">4</a></sup>. There are actually four exceptions to this function, so I’m not sure why SAP internal is taking only two of them. In any case, there are other <code>IMPORTING</code> and <code>EXPORTING</code> parameters in the function signature, but this looks like a good starting point as a minimum. In fact, as you’ll see below, the final working version of the code I created is almost exactly the same except where I found out with a bit of playing around.</p>\n<p>So I mentioned the default values that must go into <code>vgw</code> - these are the four values that are the equivalent of those four fields we can type into in <code>COR3</code> for checking the formula, things like setup time, machine time, personnel setup, and personnel time. It might sound like a lot of work to hunt down these values, but luckily these are master data and can be determined with a few select statements, first from table <code>AFVC</code> ‘operation within an order’, and then table <code>PLPO</code> ‘task list - operation/activity’:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token eol-comment comment\">\" this is the full key for table AFVC - operation within an order - for the routing number and counter - should always work with SELECT SINGLE</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">SINGLE</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> afvc <span class=\"token keyword\">INTO</span> ls_afvc\n  <span class=\"token keyword\">WHERE</span> aufpl <span class=\"token operator\">=</span> ls_operation<span class=\"token token-operator punctuation\">-</span>routing_no\n  <span class=\"token keyword\">AND</span>   aplzl <span class=\"token operator\">=</span> ls_operation<span class=\"token token-operator punctuation\">-</span>counter<span class=\"token punctuation\">.</span>\n\n<span class=\"token eol-comment comment\">\" this is the full key for table PLPO - task list - operation/activity - so it should always work with SELECT SINGLE</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">SINGLE</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> plpo <span class=\"token keyword\">INTO</span> ls_plpo\n  <span class=\"token keyword\">WHERE</span> plnty <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>plnty\n  <span class=\"token keyword\">AND</span> plnnr <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>plnnr\n  <span class=\"token keyword\">AND</span> plnkn <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>plnkn\n  <span class=\"token keyword\">AND</span> zaehl <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>zaehl<span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>\n<p>The routing number <code>ls_operation-routing_no</code> and counter <code>ls_operation-counter</code> we’ve gotten from function <code>BAPI_PRODORD_GET_DETAIL</code>:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token eol-comment comment\">\" need only the operations from the function</span>\n    ls_order_objects<span class=\"token token-operator punctuation\">-</span>operations <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n    lv_number <span class=\"token operator\">=</span> ls_orderid_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'BAPI_PRODORD_GET_DETAIL'</span>\n      <span class=\"token keyword\">EXPORTING</span>\n        <span class=\"token keyword\">number</span>        <span class=\"token operator\">=</span> lv_number\n<span class=\"token comment\">*       COLLECTIVE_ORDER       =</span>\n        order_objects <span class=\"token operator\">=</span> ls_order_objects\n<span class=\"token comment\">*     IMPORTING</span>\n<span class=\"token comment\">*       RETURN        =</span>\n      <span class=\"token keyword\">TABLES</span>\n<span class=\"token comment\">*       HEADER        =</span>\n<span class=\"token comment\">*       POSITION      =</span>\n<span class=\"token comment\">*       SEQUENCE      =</span>\n        operation     <span class=\"token operator\">=</span> lt_operation\n<span class=\"token comment\">*       TRIGGER_POINT =</span>\n<span class=\"token comment\">*       COMPONENT     =</span>\n<span class=\"token comment\">*       PROD_REL_TOOL =</span>\n      <span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>\n<p>(There is plenty of SAP standard documentation and discussion on SCN on how to use <code>BAPI_PRODORD_GET_DETAIL</code>, so I’ll leave that to you if you need more info 😉. Here we are just getting the operation information from the order - that’s all we need.)</p>\n<p>We can finally move the corresponding fields of <code>ls_plpo</code> to <code>ls_vgw</code>:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">MOVE-CORRESPONDING</span> ls_plpo <span class=\"token keyword\">TO</span> ls_vgw<span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>\n<p>However, in addition to these four values, there are two more that are essential, that is the yield amount (<code>mgvrg</code>), and the unit (<code>meinh</code>)! We can pass them right into <code>ls_op</code> as well:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">MOVE-CORRESPONDING</span> ls_plpo <span class=\"token keyword\">TO</span> ls_op<span class=\"token punctuation\">.</span>\nls_op<span class=\"token token-operator punctuation\">-</span>mgvrg <span class=\"token operator\">=</span> ls_yield_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\nls_op<span class=\"token token-operator punctuation\">-</span>meinh <span class=\"token operator\">=</span> ls_conf_quan_unit_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>\n<p>Armed with our structures <code>ls_afvc</code>, <code>ls_op</code>, and <code>ls_vgw</code>, we are ready to call our function:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'CR_WORKCENTER_FORMULA_CALC'</span> <span class=\"token eol-comment comment\">\" You can see a SAP standard example with the function in the source code for transaction CR03 for costing formula: Program SAPLCRA0, Include LCRA0F71, Form FORMEL_RESULT_CALC, line 55</span>\n  <span class=\"token keyword\">EXPORTING</span>\n    arbid             <span class=\"token operator\">=</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>arbid\n    op                <span class=\"token operator\">=</span> ls_op\n    vgw               <span class=\"token operator\">=</span> ls_vgw\n    <span class=\"token keyword\">index</span>             <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>index\n    <span class=\"token keyword\">date</span>              <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>datum\n  <span class=\"token keyword\">IMPORTING</span>\n    value_fix          <span class=\"token operator\">=</span> lv_value_fix\n    value_var         <span class=\"token operator\">=</span> lv_value_var\n    <span class=\"token keyword\">unit</span>              <span class=\"token operator\">=</span> lv_unit\n  <span class=\"token keyword\">EXCEPTIONS</span>\n    missing_parameter <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n    not_found         <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n    division_by_zero  <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n    <span class=\"token keyword\">OTHERS</span>            <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">CONCATENATE</span> sy<span class=\"token token-operator punctuation\">-</span>msgno sy<span class=\"token token-operator punctuation\">-</span>msgid sy<span class=\"token token-operator punctuation\">-</span>msgv1 sy<span class=\"token token-operator punctuation\">-</span>msgv2 sy<span class=\"token token-operator punctuation\">-</span>msgv3 sy<span class=\"token token-operator punctuation\">-</span>msgv4 <span class=\"token keyword\">INTO</span> es_entityset<span class=\"token token-operator punctuation\">-</span>error_message<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>\n<p>We want the total, right? Okay, we just add the fixed value and variable value part:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code>lv_value <span class=\"token operator\">=</span> lv_value_fix <span class=\"token operator\">+</span> lv_value_var<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" total value is the sum of the fixed and variable values for this activity</span>\n</code></pre>\n      </div>\n<p>A requirement by my company was to have all the activity confirmation values with the same unit (I find it cleaner anyway to have all the activity confirmation values in the same unit anyway). Unfortunately, the default unit for some of the activities was hours, so we have to take a small intermediary step and call a conversion function before we are truly done:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token eol-comment comment\">\" convert any </span><span class=\"token string\">'H'</span> <span class=\"token keyword\">values</span> <span class=\"token keyword\">to</span> <span class=\"token string\">'MIN'</span>\n<span class=\"token keyword\">IF</span> lv_unit <span class=\"token keyword\">NE</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'UNIT_CONVERSION_SIMPLE'</span>\n    <span class=\"token keyword\">EXPORTING</span>\n      <span class=\"token keyword\">input</span>                <span class=\"token operator\">=</span> lv_value\n      unit_in              <span class=\"token operator\">=</span> lv_unit\n      unit_out             <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span>\n    <span class=\"token keyword\">IMPORTING</span>\n      <span class=\"token keyword\">output</span>               <span class=\"token operator\">=</span> lv_output\n    <span class=\"token keyword\">EXCEPTIONS</span>\n      conversion_not_found <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n      division_by_zero     <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n      input_invalid        <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n      output_invalid       <span class=\"token operator\">=</span> <span class=\"token number\">4</span>\n      <span class=\"token keyword\">overflow</span>              <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\n      type_invalid         <span class=\"token operator\">=</span> <span class=\"token number\">6</span>\n      units_missing        <span class=\"token operator\">=</span> <span class=\"token number\">7</span>\n      unit_in_not_found    <span class=\"token operator\">=</span> <span class=\"token number\">8</span>\n      unit_out_not_found   <span class=\"token operator\">=</span> <span class=\"token number\">9</span>\n      <span class=\"token keyword\">OTHERS</span>               <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n    lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n    <span class=\"token keyword\">CONCATENATE</span> sy<span class=\"token token-operator punctuation\">-</span>msgno sy<span class=\"token token-operator punctuation\">-</span>msgid sy<span class=\"token token-operator punctuation\">-</span>msgv1 sy<span class=\"token token-operator punctuation\">-</span>msgv2 sy<span class=\"token token-operator punctuation\">-</span>msgv3 sy<span class=\"token token-operator punctuation\">-</span>msgv4 <span class=\"token keyword\">INTO</span> es_entityset<span class=\"token token-operator punctuation\">-</span>error_message<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>\n<p>We then finally carry over this converted <code>lv_output</code> over to the <code>conf_activity</code> field for <code>lt_timetickets</code>, doing this for all 1-6 <code>conf_activity</code>’s:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">CASE</span> sy<span class=\"token token-operator punctuation\">-</span>index<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">WHEN</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity1  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit1 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">WHEN</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity2  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit2 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">WHEN</span> <span class=\"token number\">3</span><span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity3  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit3 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">WHEN</span> <span class=\"token number\">4</span><span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity4  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit4 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">WHEN</span> <span class=\"token number\">5</span><span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity5  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit5 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">WHEN</span> <span class=\"token number\">6</span><span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity6  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit6 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">ENDCASE</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>\n<p>With that, we can call the final confirmation function, with all our calculated values wrapped up in <code>lt_timetickets</code>:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token eol-comment comment\">\" create confirmation</span>\n<span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'BAPI_PRODORDCONF_CREATE_TT'</span>\n<span class=\"token comment\">*     EXPORTING</span>\n<span class=\"token comment\">*       POST_WRONG_ENTRIES             = '0'</span>\n<span class=\"token comment\">*       TESTRUN                        =</span>\n<span class=\"token comment\">*       CALL_ON_INBOUND_QUEUE          = ' '</span>\n  <span class=\"token keyword\">IMPORTING</span>\n    <span class=\"token keyword\">return</span>         <span class=\"token operator\">=</span> ls_return\n  <span class=\"token keyword\">TABLES</span>\n    timetickets    <span class=\"token operator\">=</span> lt_timetickets\n    goodsmovements <span class=\"token operator\">=</span> lt_goodsmovements\n<span class=\"token comment\">*       LINK_CONF_GOODSMOV             =</span>\n<span class=\"token comment\">*       CHARACTERISTICS_WIPBATCH       =</span>\n<span class=\"token comment\">*       LINK_CONF_CHAR_WIPBATCH        =</span>\n    detail_return  <span class=\"token operator\">=</span> lt_detail_return\n<span class=\"token comment\">*       CHARACTERISTICS_BATCH          =</span>\n<span class=\"token comment\">*       LINK_GM_CHAR_BATCH             =</span>\n  <span class=\"token keyword\">EXCEPTIONS</span>\n    <span class=\"token keyword\">OTHERS</span>         <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n  lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n  <span class=\"token keyword\">CONCATENATE</span> sy<span class=\"token token-operator punctuation\">-</span>msgno sy<span class=\"token token-operator punctuation\">-</span>msgid sy<span class=\"token token-operator punctuation\">-</span>msgv1 sy<span class=\"token token-operator punctuation\">-</span>msgv2 sy<span class=\"token token-operator punctuation\">-</span>msgv3 sy<span class=\"token token-operator punctuation\">-</span>msgv4 <span class=\"token keyword\">INTO</span> es_entityset<span class=\"token token-operator punctuation\">-</span>error_message<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>\n<p>If you were sharp, you realized all of this code is only on the operation level - so indeed, the six-level loop must be done each time, for each operation - we have to throw all the above code into a loop over our operations! See below for the full result!</p>\n<h2>Production Orders</h2>\n<p>In summary, the full code looks like this:</p>\n<p><strong>NOTE: the full code examples were written for a SAP Gateway environment - i.e. the server environment from a SAPUI5 OData call! If you try to copy and paste this code directly into something like a report or function, ABAP statements like:</strong></p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code>lt_filters <span class=\"token operator\">=</span> io_tech_request_context<span class=\"token token-operator punctuation\">-></span>get_filter<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span>->get_filter_select_options<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>\n<p>won’t be in scope and won’t compile without errors! However, if you are familiar with the CRUD based methods of the SAP Gateway backend, these will fit nicely into the <code>GET_ENTITYSET</code> method 😄</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code><span class=\"token keyword\">DATA</span> <span class=\"token punctuation\">:</span> lt_filters           <span class=\"token keyword\">TYPE</span>           /iwbep/t_mgw_select_option<span class=\"token punctuation\">,</span>\n           ls_filters           <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_filters<span class=\"token punctuation\">,</span>\n           lt_select_options    <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n           ls_plant_so          <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n           ls_orderid_so        <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n           ls_fin_conf_so       <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n           ls_dev_reason_so     <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n           ls_conf_text_so      <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n           ls_conf_quan_unit_so <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n           ls_yield_so          <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n           ls_scrap_so          <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n           lt_stg_loc           <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n           ls_stg_loc           <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_stg_loc<span class=\"token punctuation\">,</span>\n           lt_batch             <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n           ls_batch             <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_batch<span class=\"token punctuation\">,</span>\n           lt_reserv_no         <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n           ls_reserv_no         <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_reserv_no<span class=\"token punctuation\">,</span>\n           lt_res_item          <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n           ls_res_item          <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_res_item<span class=\"token punctuation\">,</span>\n           lt_entry_qnt         <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n           ls_entry_qnt         <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_entry_qnt<span class=\"token punctuation\">,</span>\n           lt_entry_uom         <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n           ls_entry_uom         <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_entry_uom<span class=\"token punctuation\">,</span>\n           ls_return            <span class=\"token keyword\">TYPE</span> bapiret1<span class=\"token punctuation\">,</span>\n           lt_goodsmovements    <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span> bapi2017_gm_item_create<span class=\"token punctuation\">,</span>\n           ls_goodsmovements    <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_goodsmovements<span class=\"token punctuation\">,</span>\n           lv_reserv_lines      <span class=\"token keyword\">TYPE</span> int4<span class=\"token punctuation\">,</span>\n           lv_index             <span class=\"token keyword\">TYPE</span> int4 <span class=\"token keyword\">VALUE</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n           lt_detail_return     <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span> bapi_coru_return<span class=\"token punctuation\">,</span>\n           ls_detail_return     <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_detail_return<span class=\"token punctuation\">,</span>\n           lv_log_handle        <span class=\"token keyword\">TYPE</span> balloghndl<span class=\"token punctuation\">,</span>\n           lv_message           <span class=\"token keyword\">TYPE</span> char200<span class=\"token punctuation\">,</span>\n           lo_logger            <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">REF</span> <span class=\"token keyword\">TO</span> zcl_bc_app_logger<span class=\"token punctuation\">,</span>\n           es_entityset         <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> et_entityset<span class=\"token punctuation\">,</span>\n           lv_error_message     <span class=\"token keyword\">TYPE</span> bapi_msg<span class=\"token punctuation\">,</span>\n           ls_order_objects     <span class=\"token keyword\">TYPE</span> bapi_pp_order_objects<span class=\"token punctuation\">,</span>\n           lt_operation         <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span> bapi_order_operation1<span class=\"token punctuation\">,</span>\n           ls_operation         <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_operation<span class=\"token punctuation\">,</span>\n           lt_timetickets       <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  bapi_pp_timeticket<span class=\"token punctuation\">,</span>\n           ls_timetickets       <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_timetickets<span class=\"token punctuation\">,</span>\n           lv_number            <span class=\"token keyword\">TYPE</span> bapi_order_key<span class=\"token token-operator punctuation\">-</span>order_number<span class=\"token punctuation\">,</span>\n           ls_propose           <span class=\"token keyword\">TYPE</span> bapi_pp_conf_prop<span class=\"token punctuation\">,</span>\n           ls_op                <span class=\"token keyword\">TYPE</span> rcrop<span class=\"token punctuation\">,</span>\n           ls_vgw               <span class=\"token keyword\">TYPE</span> rcrvgw<span class=\"token punctuation\">,</span>\n           ls_afvc              <span class=\"token keyword\">TYPE</span> afvc<span class=\"token punctuation\">,</span>\n           ls_plpo              <span class=\"token keyword\">TYPE</span> plpo<span class=\"token punctuation\">,</span>\n           lv_value_fix         <span class=\"token keyword\">TYPE</span> p <span class=\"token keyword\">DECIMALS</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n           lv_value_var         <span class=\"token keyword\">TYPE</span> p <span class=\"token keyword\">DECIMALS</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n           lv_value             <span class=\"token keyword\">TYPE</span> p <span class=\"token keyword\">DECIMALS</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n           lv_unit              <span class=\"token keyword\">TYPE</span> rcrvgw<span class=\"token token-operator punctuation\">-</span>vge01<span class=\"token punctuation\">,</span>\n           lv_output            <span class=\"token keyword\">TYPE</span> p <span class=\"token keyword\">DECIMALS</span> <span class=\"token number\">3</span><span class=\"token punctuation\">.</span>\n\n           <span class=\"token eol-comment comment\">\" Create a log instance</span>\n    <span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">OBJECT</span> lo_logger\n      <span class=\"token keyword\">EXPORTING</span>\n        iv_subobject <span class=\"token operator\">=</span> <span class=\"token string\">'ZPP_APP'</span><span class=\"token punctuation\">.</span>\n    lo_logger<span class=\"token token-operator punctuation\">-></span>create_log<span class=\"token punctuation\">(</span> <span class=\"token keyword\">IMPORTING</span> ev_log_handle <span class=\"token operator\">=</span> lv_log_handle <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n    lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> <span class=\"token string\">'Begin Method PRODCONFIRMATION_GET_ENTITYSET.'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n\n    <span class=\"token eol-comment comment\">\"get $filter through the io_tech request (odata request)</span>\n    lt_filters <span class=\"token operator\">=</span> io_tech_request_context<span class=\"token token-operator punctuation\">-></span>get_filter<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span>->get_filter_select_options<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token eol-comment comment\">\" Process filters</span>\n\n    <span class=\"token eol-comment comment\">\" for these below we just need the singular select option structure</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'PLANT'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_plant_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ORDERID'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_orderid_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'FIN_CONF'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_fin_conf_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'DEV_REASON'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_dev_reason_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'CONF_TEXT'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_conf_text_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'CONF_QUAN_UNIT'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_conf_quan_unit_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'YIELD'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_yield_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'SCRAP'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_scrap_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token eol-comment comment\">\" for the following we need tables (make a loop and get the values from each)</span>\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'STGE_LOC'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_stg_loc <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'BATCH'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_batch <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'RESERV_NO'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_reserv_no <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'RES_ITEM'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_res_item <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ENTRY_QNT'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_entry_qnt <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ENTRY_UOM'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n    lt_entry_uom <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n<span class=\"token eol-comment comment\">\" Create goodsmovement structure for all the retroactive items</span>\n    <span class=\"token keyword\">DESCRIBE</span> <span class=\"token keyword\">TABLE</span> lt_reserv_no <span class=\"token keyword\">LINES</span> lv_reserv_lines<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">DO</span> lv_reserv_lines <span class=\"token keyword\">TIMES</span><span class=\"token punctuation\">.</span>\n      ls_stg_loc <span class=\"token operator\">=</span> lt_stg_loc[ lv_index ]<span class=\"token punctuation\">.</span>\n      ls_batch <span class=\"token operator\">=</span> lt_batch[ lv_index ]<span class=\"token punctuation\">.</span>\n      ls_reserv_no <span class=\"token operator\">=</span> lt_reserv_no[ lv_index ]<span class=\"token punctuation\">.</span>\n      ls_res_item <span class=\"token operator\">=</span> lt_res_item[ lv_index ]<span class=\"token punctuation\">.</span>\n      ls_entry_qnt <span class=\"token operator\">=</span> lt_entry_qnt[ lv_index ]<span class=\"token punctuation\">.</span>\n      ls_entry_uom <span class=\"token operator\">=</span> lt_entry_uom[ lv_index ]<span class=\"token punctuation\">.</span>\n      ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>plant <span class=\"token operator\">=</span> ls_plant_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" fixed factory</span>\n      ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>stge_loc <span class=\"token operator\">=</span> ls_stg_loc<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>batch <span class=\"token operator\">=</span> ls_batch<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>move_type <span class=\"token operator\">=</span> <span class=\"token string\">'261'</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" fixed movement type</span>\n      ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>item_text <span class=\"token operator\">=</span> <span class=\"token string\">'Warenbewegung für Rückmeldung PP APP'</span><span class=\"token punctuation\">.</span>\n      ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>reserv_no <span class=\"token operator\">=</span> ls_reserv_no<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>res_item <span class=\"token operator\">=</span> ls_res_item<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>entry_qnt <span class=\"token operator\">=</span> ls_entry_qnt<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>entry_uom <span class=\"token operator\">=</span> ls_entry_uom<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">APPEND</span> ls_goodsmovements <span class=\"token keyword\">TO</span> lt_goodsmovements<span class=\"token punctuation\">.</span>\n      lv_index <span class=\"token operator\">=</span> lv_index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">ENDDO</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token eol-comment comment\">\" need only the operations from the function</span>\n    ls_order_objects<span class=\"token token-operator punctuation\">-</span>operations <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n    lv_number <span class=\"token operator\">=</span> ls_orderid_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'BAPI_PRODORD_GET_DETAIL'</span>\n      <span class=\"token keyword\">EXPORTING</span>\n        <span class=\"token keyword\">number</span>        <span class=\"token operator\">=</span> lv_number\n<span class=\"token comment\">*       COLLECTIVE_ORDER       =</span>\n        order_objects <span class=\"token operator\">=</span> ls_order_objects\n<span class=\"token comment\">*     IMPORTING</span>\n<span class=\"token comment\">*       RETURN        =</span>\n      <span class=\"token keyword\">TABLES</span>\n<span class=\"token comment\">*       HEADER        =</span>\n<span class=\"token comment\">*       POSITION      =</span>\n<span class=\"token comment\">*       SEQUENCE      =</span>\n        operation     <span class=\"token operator\">=</span> lt_operation\n<span class=\"token comment\">*       TRIGGER_POINT =</span>\n<span class=\"token comment\">*       COMPONENT     =</span>\n<span class=\"token comment\">*       PROD_REL_TOOL =</span>\n      <span class=\"token punctuation\">.</span>\n\n    <span class=\"token eol-comment comment\">\" build structures for each step (each operation)</span>\n    <span class=\"token keyword\">LOOP</span> <span class=\"token keyword\">AT</span> lt_operation <span class=\"token keyword\">INTO</span> ls_operation<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">CLEAR</span> ls_timetickets<span class=\"token punctuation\">.</span>\n\n      <span class=\"token eol-comment comment\">\" this is the full key for table AFVC - Auftragsarbeitsvorgang for the routing number and counter - should always work with SELECT SINGLE</span>\n      <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">SINGLE</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> afvc <span class=\"token keyword\">INTO</span> ls_afvc\n        <span class=\"token keyword\">WHERE</span> aufpl <span class=\"token operator\">=</span> ls_operation<span class=\"token token-operator punctuation\">-</span>routing_no\n        <span class=\"token keyword\">AND</span>   aplzl <span class=\"token operator\">=</span> ls_operation<span class=\"token token-operator punctuation\">-</span>counter<span class=\"token punctuation\">.</span>\n\n      <span class=\"token eol-comment comment\">\" this is the full key for table PLPO - Plan: Vorgang - so it should always work with SELECT SINGLE</span>\n      <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">SINGLE</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> plpo <span class=\"token keyword\">INTO</span> ls_plpo\n        <span class=\"token keyword\">WHERE</span> plnty <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>plnty\n        <span class=\"token keyword\">AND</span> plnnr <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>plnnr\n        <span class=\"token keyword\">AND</span> plnkn <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>plnkn\n        <span class=\"token keyword\">AND</span> zaehl <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>zaehl<span class=\"token punctuation\">.</span>\n\n      <span class=\"token eol-comment comment\">\" now provide all the standard values (vorgabewert) VGW01, 02, etc into the calculation formula</span>\n      <span class=\"token keyword\">MOVE-CORRESPONDING</span> ls_plpo <span class=\"token keyword\">TO</span> ls_op<span class=\"token punctuation\">.</span>\n      ls_op<span class=\"token token-operator punctuation\">-</span>mgvrg <span class=\"token operator\">=</span> ls_yield_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_op<span class=\"token token-operator punctuation\">-</span>meinh <span class=\"token operator\">=</span> ls_conf_quan_unit_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">MOVE-CORRESPONDING</span> ls_plpo <span class=\"token keyword\">TO</span> ls_vgw<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">DO</span> <span class=\"token number\">6</span> <span class=\"token keyword\">TIMES</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" for each activity (usually 4 activities here at my company, but there can be up to 6 activities total)</span>\n        <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">1</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw01 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span>\n        <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">2</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw02 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span>\n        <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">3</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw03 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span>\n        <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">4</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw04 <span class=\"token keyword\">EQ</span> 0f\n        <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">5</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw05 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span>\n        <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">6</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw06 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">CONTINUE</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" skip and 0 values</span>\n        <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'CR_WORKCENTER_FORMULA_CALC'</span> <span class=\"token eol-comment comment\">\" You can see a SAP standard example with the function in the source code for transaction CR03 for costing formula: Program SAPLCRA0, Include LCRA0F71, Form FORMEL_RESULT_CALC, line 55</span>\n          <span class=\"token keyword\">EXPORTING</span>\n            arbid             <span class=\"token operator\">=</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>arbid\n            op                <span class=\"token operator\">=</span> ls_op\n            vgw               <span class=\"token operator\">=</span> ls_vgw\n            <span class=\"token keyword\">index</span>             <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>index\n            <span class=\"token keyword\">date</span>              <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>datum\n          <span class=\"token keyword\">IMPORTING</span>\n            value_fix          <span class=\"token operator\">=</span> lv_value_fix\n            value_var         <span class=\"token operator\">=</span> lv_value_var\n            <span class=\"token keyword\">unit</span>              <span class=\"token operator\">=</span> lv_unit\n          <span class=\"token keyword\">EXCEPTIONS</span>\n            missing_parameter <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n            not_found         <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n            division_by_zero  <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n            <span class=\"token keyword\">OTHERS</span>            <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">CONCATENATE</span> sy<span class=\"token token-operator punctuation\">-</span>msgno sy<span class=\"token token-operator punctuation\">-</span>msgid sy<span class=\"token token-operator punctuation\">-</span>msgv1 sy<span class=\"token token-operator punctuation\">-</span>msgv2 sy<span class=\"token token-operator punctuation\">-</span>msgv3 sy<span class=\"token token-operator punctuation\">-</span>msgv4 <span class=\"token keyword\">INTO</span> es_entityset<span class=\"token token-operator punctuation\">-</span>error_message<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n\n        lv_value <span class=\"token operator\">=</span> lv_value_fix <span class=\"token operator\">+</span> lv_value_var<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" total value is the sum of the fixed and varible values for this activity</span>\n\n        <span class=\"token eol-comment comment\">\" convert any </span><span class=\"token string\">'H'</span> <span class=\"token keyword\">values</span> <span class=\"token keyword\">to</span> <span class=\"token string\">'MIN'</span>\n        <span class=\"token keyword\">IF</span> lv_unit <span class=\"token keyword\">NE</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'UNIT_CONVERSION_SIMPLE'</span>\n            <span class=\"token keyword\">EXPORTING</span>\n              <span class=\"token keyword\">input</span>                <span class=\"token operator\">=</span> lv_value\n              unit_in              <span class=\"token operator\">=</span> lv_unit\n              unit_out             <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span>\n            <span class=\"token keyword\">IMPORTING</span>\n              <span class=\"token keyword\">output</span>               <span class=\"token operator\">=</span> lv_output\n            <span class=\"token keyword\">EXCEPTIONS</span>\n              conversion_not_found <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n              division_by_zero     <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n              input_invalid        <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n              output_invalid       <span class=\"token operator\">=</span> <span class=\"token number\">4</span>\n              <span class=\"token keyword\">overflow</span>              <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\n              type_invalid         <span class=\"token operator\">=</span> <span class=\"token number\">6</span>\n              units_missing        <span class=\"token operator\">=</span> <span class=\"token number\">7</span>\n              unit_in_not_found    <span class=\"token operator\">=</span> <span class=\"token number\">8</span>\n              unit_out_not_found   <span class=\"token operator\">=</span> <span class=\"token number\">9</span>\n              <span class=\"token keyword\">OTHERS</span>               <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n            lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n            <span class=\"token keyword\">CONCATENATE</span> sy<span class=\"token token-operator punctuation\">-</span>msgno sy<span class=\"token token-operator punctuation\">-</span>msgid sy<span class=\"token token-operator punctuation\">-</span>msgv1 sy<span class=\"token token-operator punctuation\">-</span>msgv2 sy<span class=\"token token-operator punctuation\">-</span>msgv3 sy<span class=\"token token-operator punctuation\">-</span>msgv4 <span class=\"token keyword\">INTO</span> es_entityset<span class=\"token token-operator punctuation\">-</span>error_message<span class=\"token punctuation\">.</span>\n            <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">ELSE</span><span class=\"token punctuation\">.</span>\n          lv_output <span class=\"token operator\">=</span> lv_value<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" copy over MIN value</span>\n        <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n\n        <span class=\"token keyword\">CASE</span> sy<span class=\"token token-operator punctuation\">-</span>index<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">WHEN</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity1  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit1 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">WHEN</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity2  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit2 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">WHEN</span> <span class=\"token number\">3</span><span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity3  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit3 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">WHEN</span> <span class=\"token number\">4</span><span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity4  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit4 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">WHEN</span> <span class=\"token number\">5</span><span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity5  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit5 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">WHEN</span> <span class=\"token number\">6</span><span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity6  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n            ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit6 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">ENDCASE</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">ENDDO</span><span class=\"token punctuation\">.</span>\n\n      <span class=\"token eol-comment comment\">\" Now build the table to confirm the operations (Vorgänge)</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_no     <span class=\"token operator\">=</span> ls_operation<span class=\"token token-operator punctuation\">-</span>conf_no<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>orderid     <span class=\"token operator\">=</span> ls_orderid_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>sequence    <span class=\"token operator\">=</span> ls_operation<span class=\"token token-operator punctuation\">-</span>sequence_no<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>operation   <span class=\"token operator\">=</span> ls_operation<span class=\"token token-operator punctuation\">-</span>operation_number<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>work_cntr   <span class=\"token operator\">=</span> ls_operation<span class=\"token token-operator punctuation\">-</span>work_center<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" Resource for process order, logdate, logtime, and posting date added to the table</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>plant       <span class=\"token operator\">=</span> ls_plant_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>logdate     <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>datlo<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>logtime     <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>timlo<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>postg_date  <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>datlo<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>yield <span class=\"token operator\">=</span> ls_yield_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>scrap <span class=\"token operator\">=</span> ls_scrap_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>fin_conf <span class=\"token operator\">=</span> ls_fin_conf_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" also overwrite the proposed partial or final confirmation - take what the user provides!</span>\n      ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_quan_unit <span class=\"token operator\">=</span> ls_conf_quan_unit_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" Also the unit</span>\n      <span class=\"token keyword\">APPEND</span> ls_timetickets <span class=\"token keyword\">TO</span> lt_timetickets<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">ENDLOOP</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token eol-comment comment\">\" create confirmation</span>\n    <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'BAPI_PRODORDCONF_CREATE_TT'</span>\n<span class=\"token comment\">*     EXPORTING</span>\n<span class=\"token comment\">*       POST_WRONG_ENTRIES             = '0'</span>\n<span class=\"token comment\">*       TESTRUN                        =</span>\n<span class=\"token comment\">*       CALL_ON_INBOUND_QUEUE          = ' '</span>\n      <span class=\"token keyword\">IMPORTING</span>\n        <span class=\"token keyword\">return</span>         <span class=\"token operator\">=</span> ls_return\n      <span class=\"token keyword\">TABLES</span>\n        timetickets    <span class=\"token operator\">=</span> lt_timetickets\n        goodsmovements <span class=\"token operator\">=</span> lt_goodsmovements\n<span class=\"token comment\">*       LINK_CONF_GOODSMOV             =</span>\n<span class=\"token comment\">*       CHARACTERISTICS_WIPBATCH       =</span>\n<span class=\"token comment\">*       LINK_CONF_CHAR_WIPBATCH        =</span>\n        detail_return  <span class=\"token operator\">=</span> lt_detail_return\n<span class=\"token comment\">*       CHARACTERISTICS_BATCH          =</span>\n<span class=\"token comment\">*       LINK_GM_CHAR_BATCH             =</span>\n      <span class=\"token keyword\">EXCEPTIONS</span>\n        <span class=\"token keyword\">OTHERS</span>         <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n      lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n      <span class=\"token keyword\">CONCATENATE</span> sy<span class=\"token token-operator punctuation\">-</span>msgno sy<span class=\"token token-operator punctuation\">-</span>msgid sy<span class=\"token token-operator punctuation\">-</span>msgv1 sy<span class=\"token token-operator punctuation\">-</span>msgv2 sy<span class=\"token token-operator punctuation\">-</span>msgv3 sy<span class=\"token token-operator punctuation\">-</span>msgv4 <span class=\"token keyword\">INTO</span> es_entityset<span class=\"token token-operator punctuation\">-</span>error_message<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>\n<h2>Process Orders</h2>\n<p>Because SAP is ever-so-special, process orders have a slightly different program process due to a few name changes. Here is a summary of some of those name and type changes:</p>\n<hr/>\n<table>\n<thead>\n<tr>\n<th>Topic</th>\n<th>Production Orders</th>\n<th>Process Orders</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Name of the ‘steps’ in your process or production order</td>\n<td>phase/activity (I’ve seen both names, ABAP uses mostly ‘phase’)</td>\n<td>operation</td>\n</tr>\n<tr>\n<td>Get order detail of order</td>\n<td><code>BAPI_PRODORD_GET_DETAIL</code></td>\n<td><code>BAPI_PROCORD_GET_DETAIL</code></td>\n</tr>\n<tr>\n<td>detail of order ‘step’ type</td>\n<td><code>bapi_order_phase</code></td>\n<td><code>bapi_order_operation1</code></td>\n</tr>\n<tr>\n<td>Function for timeticket proposals</td>\n<td><code>BAPI_PRODORD_GET_DETAIL</code></td>\n<td><code>BAPI_PROCORD_GET_DETAIL</code></td>\n</tr>\n<tr>\n<td>Function for order confirmation</td>\n<td><code>BAPI_PRODORDCONF_CREATE_TT</code></td>\n<td><code>BAPI_PROCORDCONF_CREATE_TT</code></td>\n</tr>\n<tr>\n<td><code>timetickets</code>\n \n<code>TYPE</code>\n in order confirmation function</td>\n<td><code>bapi_pp_timeticket</code></td>\n<td><code>bapi_pi_timeticket1</code></td>\n</tr>\n</tbody>\n</table>\n<hr/>\n<p>There are more, but you can find those in the code for yourself. The important thing to notice is that the key challenging part here, calculating the confirmation activity amounts, uses the same internal function module, <code></code></p>\n<p>Here’s the code for calculating activities for process orders - <em>note the slight change in all the variable names!</em> - and be careful with your types (carefully look over the <code>DATA:</code> statement), otherwise you’ll get 💥<strong>exploding runtime errors</strong>💥 when you try to confirm something with one of our two main functions and you pass, for example, the  <code>lt_timetickets</code> with the production type <code></code>, and you pass it into the of the <em>process</em> order function module.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-abap\"><code>  <span class=\"token keyword\">DATA</span> <span class=\"token punctuation\">:</span> lt_filters           <span class=\"token keyword\">TYPE</span>           /iwbep/t_mgw_select_option<span class=\"token punctuation\">,</span>\n         ls_filters           <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_filters<span class=\"token punctuation\">,</span>\n         lt_select_options    <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n         ls_plant_so          <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_orderid_so        <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_fin_conf_so       <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_dev_reason_so     <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_conf_text_so      <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_conf_quan_unit_so <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_yield_so          <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_scrap_so          <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_stge_loc_so       <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_batch_so          <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_reserv_no_so      <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_res_item_so       <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_entry_qnt_so      <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         ls_entry_uom_so      <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_select_options<span class=\"token punctuation\">,</span>\n         lt_stg_loc           <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n         ls_stg_loc           <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_stg_loc<span class=\"token punctuation\">,</span>\n         lt_batch             <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n         ls_batch             <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_batch<span class=\"token punctuation\">,</span>\n         lt_reserv_no         <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n         ls_reserv_no         <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_reserv_no<span class=\"token punctuation\">,</span>\n         lt_res_item          <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n         ls_res_item          <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_res_item<span class=\"token punctuation\">,</span>\n         lt_entry_qnt         <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n         ls_entry_qnt         <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_entry_qnt<span class=\"token punctuation\">,</span>\n         lt_entry_uom         <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span>  /iwbep/s_cod_select_option<span class=\"token punctuation\">,</span>\n         ls_entry_uom         <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_entry_uom<span class=\"token punctuation\">,</span>\n         ls_return            <span class=\"token keyword\">TYPE</span> bapiret1<span class=\"token punctuation\">,</span>\n         lt_goodsmovements    <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span> bapi2017_gm_item_create<span class=\"token punctuation\">,</span>\n         ls_goodsmovements    <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_goodsmovements<span class=\"token punctuation\">,</span>\n         lv_reserv_lines      <span class=\"token keyword\">TYPE</span> int4<span class=\"token punctuation\">,</span>\n         lv_index             <span class=\"token keyword\">TYPE</span> int4 <span class=\"token keyword\">VALUE</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n         lt_detail_return     <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span> bapi_coru_return<span class=\"token punctuation\">,</span>\n         ls_detail_return     <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_detail_return<span class=\"token punctuation\">,</span>\n         lv_log_handle        <span class=\"token keyword\">TYPE</span> balloghndl<span class=\"token punctuation\">,</span>\n         lv_message           <span class=\"token keyword\">TYPE</span> char200<span class=\"token punctuation\">,</span>\n         lo_logger            <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">REF</span> <span class=\"token keyword\">TO</span> zcl_bc_app_logger<span class=\"token punctuation\">,</span>\n         es_entityset         <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> et_entityset<span class=\"token punctuation\">,</span>\n         lv_error_message     <span class=\"token keyword\">TYPE</span> bapi_msg<span class=\"token punctuation\">,</span>\n         ls_order_objects     <span class=\"token keyword\">TYPE</span> bapi_pi_order_objects<span class=\"token punctuation\">,</span>\n         lt_phase             <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span> bapi_order_phase<span class=\"token punctuation\">,</span>\n         ls_phase             <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_phase<span class=\"token punctuation\">,</span>\n         lt_timetickets       <span class=\"token keyword\">TYPE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">OF</span> bapi_pi_timeticket1<span class=\"token punctuation\">,</span>\n         ls_timetickets       <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_timetickets<span class=\"token punctuation\">,</span>\n         lv_number            <span class=\"token keyword\">TYPE</span> bapi_order_key<span class=\"token token-operator punctuation\">-</span>order_number<span class=\"token punctuation\">,</span>\n         ls_op                <span class=\"token keyword\">TYPE</span> rcrop<span class=\"token punctuation\">,</span>\n         ls_vgw               <span class=\"token keyword\">TYPE</span> rcrvgw<span class=\"token punctuation\">,</span>\n         ls_afvc              <span class=\"token keyword\">TYPE</span> afvc<span class=\"token punctuation\">,</span>\n         ls_plpo              <span class=\"token keyword\">TYPE</span> plpo<span class=\"token punctuation\">,</span>\n         lv_value_fix         <span class=\"token keyword\">TYPE</span> p <span class=\"token keyword\">DECIMALS</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n         lv_value_var         <span class=\"token keyword\">TYPE</span> p <span class=\"token keyword\">DECIMALS</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n         lv_value             <span class=\"token keyword\">TYPE</span> p <span class=\"token keyword\">DECIMALS</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n         lv_unit              <span class=\"token keyword\">TYPE</span> rcrvgw<span class=\"token token-operator punctuation\">-</span>vge01<span class=\"token punctuation\">,</span>\n         lv_output            <span class=\"token keyword\">TYPE</span> p <span class=\"token keyword\">DECIMALS</span> <span class=\"token number\">3</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">FIELD-SYMBOLS</span><span class=\"token punctuation\">:</span> &lt;fs_timetickets> <span class=\"token keyword\">LIKE</span> <span class=\"token keyword\">LINE</span> <span class=\"token keyword\">OF</span> lt_timetickets<span class=\"token punctuation\">.</span>\n\n  <span class=\"token eol-comment comment\">\" create a log instance</span>\n  <span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">OBJECT</span> lo_logger\n    <span class=\"token keyword\">EXPORTING</span>\n      iv_subobject <span class=\"token operator\">=</span> <span class=\"token string\">'ZPP_APP'</span><span class=\"token punctuation\">.</span>\n  lo_logger<span class=\"token token-operator punctuation\">-></span>create_log<span class=\"token punctuation\">(</span> <span class=\"token keyword\">IMPORTING</span> ev_log_handle <span class=\"token operator\">=</span> lv_log_handle <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n  lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> <span class=\"token string\">'Begin Method PROCCONFIRMATION_GET_ENTITYSET.'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n\n  <span class=\"token eol-comment comment\">\"get $filter through the io_tech request (odata request)</span>\n  lt_filters <span class=\"token operator\">=</span> io_tech_request_context<span class=\"token token-operator punctuation\">-></span>get_filter<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span>->get_filter_select_options<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token eol-comment comment\">\" Process filters</span>\n\n  <span class=\"token eol-comment comment\">\" for these below we just need the singular select option structure</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'PLANT'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_plant_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ORDERID'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_orderid_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'FIN_CONF'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_fin_conf_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'DEV_REASON'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_dev_reason_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'CONF_TEXT'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_conf_text_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'CONF_QUAN_UNIT'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_conf_quan_unit_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'YIELD'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_yield_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'SCRAP'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_select_options <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_select_options <span class=\"token keyword\">INTO</span> ls_scrap_so <span class=\"token keyword\">INDEX</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token eol-comment comment\">\" for the following we need tables (make a loop and get the values from each)</span>\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'STGE_LOC'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_stg_loc <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'BATCH'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_batch <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'RESERV_NO'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_reserv_no <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'RES_ITEM'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_res_item <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ENTRY_QNT'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_entry_qnt <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CLEAR</span> ls_filters<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">READ</span> <span class=\"token keyword\">TABLE</span> lt_filters <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">property</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ENTRY_UOM'</span> <span class=\"token keyword\">INTO</span> ls_filters<span class=\"token punctuation\">.</span>\n  lt_entry_uom <span class=\"token operator\">=</span> ls_filters<span class=\"token token-operator punctuation\">-</span>select_options<span class=\"token punctuation\">.</span>\n\n  <span class=\"token eol-comment comment\">\" Create goodsmovement structure for all the retroactive items</span>\n  <span class=\"token keyword\">DESCRIBE</span> <span class=\"token keyword\">TABLE</span> lt_reserv_no <span class=\"token keyword\">LINES</span> lv_reserv_lines<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">DO</span> lv_reserv_lines <span class=\"token keyword\">TIMES</span><span class=\"token punctuation\">.</span>\n    ls_stg_loc <span class=\"token operator\">=</span> lt_stg_loc[ lv_index ]<span class=\"token punctuation\">.</span>\n    ls_batch <span class=\"token operator\">=</span> lt_batch[ lv_index ]<span class=\"token punctuation\">.</span>\n    ls_reserv_no <span class=\"token operator\">=</span> lt_reserv_no[ lv_index ]<span class=\"token punctuation\">.</span>\n    ls_res_item <span class=\"token operator\">=</span> lt_res_item[ lv_index ]<span class=\"token punctuation\">.</span>\n    ls_entry_qnt <span class=\"token operator\">=</span> lt_entry_qnt[ lv_index ]<span class=\"token punctuation\">.</span>\n    ls_entry_uom <span class=\"token operator\">=</span> lt_entry_uom[ lv_index ]<span class=\"token punctuation\">.</span>\n    ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>plant <span class=\"token operator\">=</span> ls_plant_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" fixed factory</span>\n    ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>stge_loc <span class=\"token operator\">=</span> ls_stg_loc<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>batch <span class=\"token operator\">=</span> ls_batch<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>move_type <span class=\"token operator\">=</span> <span class=\"token string\">'261'</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" fixed movement type</span>\n    ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>item_text <span class=\"token operator\">=</span> <span class=\"token string\">'Warenbewegung für Rückmeldung PP APP'</span><span class=\"token punctuation\">.</span>\n    ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>reserv_no <span class=\"token operator\">=</span> ls_reserv_no<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>res_item <span class=\"token operator\">=</span> ls_res_item<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>entry_qnt <span class=\"token operator\">=</span> ls_entry_qnt<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_goodsmovements<span class=\"token token-operator punctuation\">-</span>entry_uom <span class=\"token operator\">=</span> ls_entry_uom<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">APPEND</span> ls_goodsmovements <span class=\"token keyword\">TO</span> lt_goodsmovements<span class=\"token punctuation\">.</span>\n    lv_index <span class=\"token operator\">=</span> lv_index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDDO</span><span class=\"token punctuation\">.</span>\n\n  ls_order_objects<span class=\"token token-operator punctuation\">-</span>phases <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n  lv_number <span class=\"token operator\">=</span> ls_orderid_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'BAPI_PROCORD_GET_DETAIL'</span>\n    <span class=\"token keyword\">EXPORTING</span>\n      <span class=\"token keyword\">number</span>        <span class=\"token operator\">=</span> lv_number\n<span class=\"token comment\">*       COLLECTIVE_ORDER       =</span>\n      order_objects <span class=\"token operator\">=</span> ls_order_objects\n<span class=\"token comment\">*     IMPORTING</span>\n<span class=\"token comment\">*       RETURN        =</span>\n    <span class=\"token keyword\">TABLES</span>\n<span class=\"token comment\">*       HEADER        =</span>\n<span class=\"token comment\">*       POSITION      =</span>\n<span class=\"token comment\">*       SEQUENCE      =</span>\n      phase         <span class=\"token operator\">=</span> lt_phase\n<span class=\"token comment\">*       TRIGGER_POINT =</span>\n<span class=\"token comment\">*       COMPONENT     =</span>\n<span class=\"token comment\">*       PROD_REL_TOOL =</span>\n    <span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">LOOP</span> <span class=\"token keyword\">AT</span> lt_phase <span class=\"token keyword\">INTO</span> ls_phase<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" for each phase - create both the activities table and timetickets table</span>\n    <span class=\"token keyword\">CLEAR</span> ls_timetickets<span class=\"token punctuation\">.</span>\n\n    <span class=\"token eol-comment comment\">\" this is the full key for table AFVC - Auftragsarbeitsvorgang for the routing number and counter - should always work with SELECT SINGLE</span>\n    <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">SINGLE</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> afvc <span class=\"token keyword\">INTO</span> ls_afvc\n      <span class=\"token keyword\">WHERE</span> aufpl <span class=\"token operator\">=</span> ls_phase<span class=\"token token-operator punctuation\">-</span>routing_no\n      <span class=\"token keyword\">AND</span>   aplzl <span class=\"token operator\">=</span> ls_phase<span class=\"token token-operator punctuation\">-</span>counter<span class=\"token punctuation\">.</span>\n\n    <span class=\"token eol-comment comment\">\" this is the full key for table PLPO - Plan: Vorgang - so it should always work with SELECT SINGLE</span>\n    <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">SINGLE</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> plpo <span class=\"token keyword\">INTO</span> ls_plpo\n      <span class=\"token keyword\">WHERE</span> plnty <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>plnty\n      <span class=\"token keyword\">AND</span> plnnr <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>plnnr\n      <span class=\"token keyword\">AND</span> plnkn <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>plnkn\n      <span class=\"token keyword\">AND</span> zaehl <span class=\"token keyword\">EQ</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>zaehl<span class=\"token punctuation\">.</span>\n\n    <span class=\"token eol-comment comment\">\" now provide all the standard values (vorgabewert) VGW01, 02, etc into the calculation formula</span>\n    <span class=\"token keyword\">MOVE-CORRESPONDING</span> ls_plpo <span class=\"token keyword\">TO</span> ls_op<span class=\"token punctuation\">.</span>\n    ls_op<span class=\"token token-operator punctuation\">-</span>mgvrg <span class=\"token operator\">=</span> ls_yield_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_op<span class=\"token token-operator punctuation\">-</span>meinh <span class=\"token operator\">=</span> ls_conf_quan_unit_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">MOVE-CORRESPONDING</span> ls_plpo <span class=\"token keyword\">TO</span> ls_vgw<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">DO</span> <span class=\"token number\">6</span> <span class=\"token keyword\">TIMES</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" for each activity (usually 4 activities here at company, but there can be up to 6 activities total)</span>\n      <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">1</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw01 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span>\n      <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">2</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw02 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span>\n      <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">3</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw03 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span>\n      <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">4</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw04 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span>\n      <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">5</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw05 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span>\n      <span class=\"token keyword\">OR</span> sy<span class=\"token token-operator punctuation\">-</span>index <span class=\"token keyword\">EQ</span> <span class=\"token number\">6</span> <span class=\"token keyword\">AND</span> ls_vgw<span class=\"token token-operator punctuation\">-</span>vgw06 <span class=\"token keyword\">EQ</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">CONTINUE</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" skip and 0 values</span>\n      <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'CR_WORKCENTER_FORMULA_CALC'</span> <span class=\"token eol-comment comment\">\" You can see a SAP standard example with the function in the source code for transaction CR03 for costing formula: Program SAPLCRA0, Include LCRA0F71, Form FORMEL_RESULT_CALC, line 55</span>\n        <span class=\"token keyword\">EXPORTING</span>\n          arbid             <span class=\"token operator\">=</span> ls_afvc<span class=\"token token-operator punctuation\">-</span>arbid\n          op                <span class=\"token operator\">=</span> ls_op\n          vgw               <span class=\"token operator\">=</span> ls_vgw\n          <span class=\"token keyword\">index</span>             <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>index\n          <span class=\"token keyword\">date</span>              <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>datum\n        <span class=\"token keyword\">IMPORTING</span>\n          value_fix         <span class=\"token operator\">=</span> lv_value_fix\n          value_var         <span class=\"token operator\">=</span> lv_value_var\n          <span class=\"token keyword\">unit</span>              <span class=\"token operator\">=</span> lv_unit\n        <span class=\"token keyword\">EXCEPTIONS</span>\n          missing_parameter <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n          not_found         <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n          division_by_zero  <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n          <span class=\"token keyword\">OTHERS</span>            <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">CONCATENATE</span> sy<span class=\"token token-operator punctuation\">-</span>msgno sy<span class=\"token token-operator punctuation\">-</span>msgid sy<span class=\"token token-operator punctuation\">-</span>msgv1 sy<span class=\"token token-operator punctuation\">-</span>msgv2 sy<span class=\"token token-operator punctuation\">-</span>msgv3 sy<span class=\"token token-operator punctuation\">-</span>msgv4 <span class=\"token keyword\">INTO</span> es_entityset<span class=\"token token-operator punctuation\">-</span>error_message<span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n\n      lv_value <span class=\"token operator\">=</span> lv_value_fix <span class=\"token operator\">+</span> lv_value_var<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" total value is the sum of the fixed and varible values for this activity</span>\n\n      <span class=\"token eol-comment comment\">\" Convert any </span><span class=\"token string\">'H'</span> <span class=\"token keyword\">values</span> <span class=\"token keyword\">to</span> <span class=\"token string\">'MIN'</span>\n      <span class=\"token keyword\">IF</span> lv_unit <span class=\"token keyword\">NE</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'UNIT_CONVERSION_SIMPLE'</span>\n          <span class=\"token keyword\">EXPORTING</span>\n            <span class=\"token keyword\">input</span>                <span class=\"token operator\">=</span> lv_value\n            unit_in              <span class=\"token operator\">=</span> lv_unit\n            unit_out             <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span>\n          <span class=\"token keyword\">IMPORTING</span>\n            <span class=\"token keyword\">output</span>               <span class=\"token operator\">=</span> lv_output\n          <span class=\"token keyword\">EXCEPTIONS</span>\n            conversion_not_found <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n            division_by_zero     <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n            input_invalid        <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n            output_invalid       <span class=\"token operator\">=</span> <span class=\"token number\">4</span>\n            <span class=\"token keyword\">overflow</span>             <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\n            type_invalid         <span class=\"token operator\">=</span> <span class=\"token number\">6</span>\n            units_missing        <span class=\"token operator\">=</span> <span class=\"token number\">7</span>\n            unit_in_not_found    <span class=\"token operator\">=</span> <span class=\"token number\">8</span>\n            unit_out_not_found   <span class=\"token operator\">=</span> <span class=\"token number\">9</span>\n            <span class=\"token keyword\">OTHERS</span>               <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n          lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n          <span class=\"token keyword\">CONCATENATE</span> sy<span class=\"token token-operator punctuation\">-</span>msgno sy<span class=\"token token-operator punctuation\">-</span>msgid sy<span class=\"token token-operator punctuation\">-</span>msgv1 sy<span class=\"token token-operator punctuation\">-</span>msgv2 sy<span class=\"token token-operator punctuation\">-</span>msgv3 sy<span class=\"token token-operator punctuation\">-</span>msgv4 <span class=\"token keyword\">INTO</span> es_entityset<span class=\"token token-operator punctuation\">-</span>error_message<span class=\"token punctuation\">.</span>\n          <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">ELSE</span><span class=\"token punctuation\">.</span>\n        lv_output <span class=\"token operator\">=</span> lv_value<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" copy over MIN value</span>\n      <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n\n      <span class=\"token keyword\">CASE</span> sy<span class=\"token token-operator punctuation\">-</span>index<span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">WHEN</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity1  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit1 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">WHEN</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity2  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit2 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">WHEN</span> <span class=\"token number\">3</span><span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity3  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit3 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">WHEN</span> <span class=\"token number\">4</span><span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity4  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit4 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">WHEN</span> <span class=\"token number\">5</span><span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity5  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit5 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n        <span class=\"token keyword\">WHEN</span> <span class=\"token number\">6</span><span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_activity6  <span class=\"token operator\">=</span> lv_output<span class=\"token punctuation\">.</span>\n          ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_acti_unit6 <span class=\"token operator\">=</span> <span class=\"token string\">'MIN'</span><span class=\"token punctuation\">.</span>\n      <span class=\"token keyword\">ENDCASE</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">ENDDO</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token eol-comment comment\">\" Also build the table to confirm the operations (Vorgänge)</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_no    <span class=\"token operator\">=</span> ls_phase<span class=\"token token-operator punctuation\">-</span>conf_no<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>orderid    <span class=\"token operator\">=</span> ls_orderid_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>phase      <span class=\"token operator\">=</span> ls_phase<span class=\"token token-operator punctuation\">-</span>operation_number<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>resource   <span class=\"token operator\">=</span> ls_phase<span class=\"token token-operator punctuation\">-</span>resource<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" Resource in process orders is the equivalent of work_center (wrk_cntr) for production orders</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>plant      <span class=\"token operator\">=</span> ls_plant_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>logdate    <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>datlo<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>logtime    <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>timlo<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>postg_date <span class=\"token operator\">=</span> sy<span class=\"token token-operator punctuation\">-</span>datlo<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>yield <span class=\"token operator\">=</span> ls_yield_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>scrap <span class=\"token operator\">=</span> ls_scrap_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>fin_conf <span class=\"token operator\">=</span> ls_fin_conf_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" also overwrite the proposed tiel oder endruckmeldung - take what the user provides!</span>\n    ls_timetickets<span class=\"token token-operator punctuation\">-</span>conf_quan_unit <span class=\"token operator\">=</span> ls_conf_quan_unit_so<span class=\"token token-operator punctuation\">-</span>low<span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" Also the unit</span>\n    <span class=\"token keyword\">APPEND</span> ls_timetickets <span class=\"token keyword\">TO</span> lt_timetickets<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDLOOP</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'BAPI_PROCORDCONF_CREATE_TT'</span>\n<span class=\"token comment\">*     EXPORTING</span>\n<span class=\"token comment\">*       POST_WRONG_ENTRIES             = '0'</span>\n<span class=\"token comment\">*       TESTRUN                        =</span>\n    <span class=\"token keyword\">IMPORTING</span>\n      <span class=\"token keyword\">return</span>         <span class=\"token operator\">=</span> ls_return\n    <span class=\"token keyword\">TABLES</span>\n      timetickets    <span class=\"token operator\">=</span> lt_timetickets\n      goodsmovements <span class=\"token operator\">=</span> lt_goodsmovements\n<span class=\"token comment\">*       LINK_CONF_GOODSMOV             =</span>\n<span class=\"token comment\">*       CHARACTERISTICS_WIPBATCH       =</span>\n<span class=\"token comment\">*       LINK_CONF_CHAR_WIPBATCH        =</span>\n<span class=\"token comment\">*       CHARACTERISTICS_BATCH          =</span>\n<span class=\"token comment\">*       LINK_GM_CHAR_BATCH             =</span>\n      detail_return  <span class=\"token operator\">=</span> lt_detail_return\n    <span class=\"token keyword\">EXCEPTIONS</span>\n      <span class=\"token keyword\">OTHERS</span>         <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">IF</span> sy<span class=\"token token-operator punctuation\">-</span>subrc <span class=\"token operator\">&lt;></span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span>\n    lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n    <span class=\"token keyword\">CONCATENATE</span> sy<span class=\"token token-operator punctuation\">-</span>msgno sy<span class=\"token token-operator punctuation\">-</span>msgid sy<span class=\"token token-operator punctuation\">-</span>msgv1 sy<span class=\"token token-operator punctuation\">-</span>msgv2 sy<span class=\"token token-operator punctuation\">-</span>msgv3 sy<span class=\"token token-operator punctuation\">-</span>msgv4 <span class=\"token keyword\">INTO</span> es_entityset<span class=\"token token-operator punctuation\">-</span>error_message<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">IF</span> ls_return <span class=\"token keyword\">IS</span> <span class=\"token keyword\">NOT</span> <span class=\"token keyword\">INITIAL</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">LOOP</span> <span class=\"token keyword\">AT</span> lt_detail_return <span class=\"token keyword\">INTO</span> ls_detail_return <span class=\"token keyword\">WHERE</span> <span class=\"token keyword\">type</span> <span class=\"token keyword\">EQ</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">.</span>\n      lv_error_message <span class=\"token operator\">=</span> ls_detail_return<span class=\"token token-operator punctuation\">-</span>message<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">ENDLOOP</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">CONCATENATE</span> <span class=\"token string\">'Fehler bei der Rückmeldung: '</span> lv_error_message <span class=\"token keyword\">INTO</span> lv_message<span class=\"token punctuation\">.</span>\n    lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> lv_message <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n    es_entityset<span class=\"token token-operator punctuation\">-</span>error_message <span class=\"token operator\">=</span> lv_error_message<span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">APPEND</span> es_entityset <span class=\"token keyword\">TO</span> et_entityset<span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">ENDIF</span><span class=\"token punctuation\">.</span>\n\n  lo_logger<span class=\"token token-operator punctuation\">-></span>create_message<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle iv_message <span class=\"token operator\">=</span> <span class=\"token string\">'Ende Method PROCCONFIRMATION_GET_ENTITYSET.'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token eol-comment comment\">\" add custom message to message log</span>\n  lo_logger<span class=\"token token-operator punctuation\">-></span>save_log<span class=\"token punctuation\">(</span> <span class=\"token keyword\">EXPORTING</span> iv_log_handle <span class=\"token operator\">=</span> lv_log_handle <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token eol-comment comment\">\" FB Documentation says COMMIT WORK is required</span>\n  <span class=\"token keyword\">CALL</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token string\">'BAPI_TRANSACTION_COMMIT'</span>\n    <span class=\"token keyword\">EXPORTING</span>\n      <span class=\"token keyword\">wait</span> <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">COMMIT</span> <span class=\"token keyword\">WORK</span> <span class=\"token keyword\">AND</span> <span class=\"token keyword\">WAIT</span><span class=\"token punctuation\">.</span>\n</code></pre>\n      </div>\n<h2>Final Comments</h2>\n<p>Whew. Did it feel like a marathon? :runner: Because it felt to <em>me</em> like a marathon all that time I was scratching my head. I hope you all enjoyed and found this post useful for a not-so-often programmed function of this production planning section of SAP.</p>\n<p>Another note and quick plug 😄 I hope everyone can appreciate the time I put into creating these posts (<em>hint:</em> posts this long take a <strong>LONG</strong> time to write!). It would make me happy and give me the motivation to keep writing these detailed ABAP posts if you’d consider donating (in the footer of any page on this blog) I have a <a href=\"https://www.paypal.me/chrisfrewin\">PayPal.me link</a>, and I’m also an Ethereum developer if you’d like to donate Ether or if you would like to donate some RaiBlocks, as I am a RaiBlocks enthusiast if you would prefer to donate in that way.</p>\n<p>💩 Ok, plug done! 💩</p>\n<p>Cheers! 🍺</p>\n<hr/>\n<h1>Footnotes</h1>\n<div id=\"footnote-1\">\n1. Activities/phases are for production orders; Operations are for process orders. From this point onward, I will refer just to activities, since this post focuses on production orders and then I finally post the adjacent code for process orders.\n</div>\n<div id=\"footnote-2\">\n2. I have to give credit where credit is due! I received a lot of assistance from our production planning module supervisor - he showed me the transactions that finally got me to a working result. 👍\n</div>\n<div id=\"footnote-3\">\n3. Note: At my company, we usually use only up to four confirmation activities. Note that there can be up to six, but for this example, we'll say that the confirmation process has only a maximum of four.\n</div>\n<div id=\"footnote-4\">\n4. You can set up your production planning (PP) module to give you a proposal amount for the activities, directly when you are doing confirmations transaction `CO11N`:\n<p>Upon pressing ‘enter’ for with a new amount:\n</p>\n<p>Pressing ‘OK’ for this window, we get a popup:</p>\n<p></p>\n<p>We see that the Labor time is provided here. It’s likely 30 min for a full 100 KG, since the system is proposing only 15 minutes for 50 KG, half of what the full order amount should be. (I know, it’s not a full four field example - but values would also be proposed if you had more fields like machine time, machine set-up, etc.)</p>\n</div>\n<div id=\"footnote-4\">\n4. I ended up determining that you can exclude parameter `co_a` without any issues - however, this may be how the settings at my own company work - you can look deeper into the SAP example to include it.\n</div>"}]}